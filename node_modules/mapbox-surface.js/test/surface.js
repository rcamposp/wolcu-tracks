describe("surface", function() {

    L.mapbox.accessToken = 'pk.eyJ1IjoiYm9iYnlzdWQiLCJhIjoiZlY0VElqTSJ9.gGJetUgdQKj64oeS5j9kzQ';
    var surface = L.mapbox.surface();
    var surfaceOptions = {
        mapid: 'mapbox.mapbox-terrain-v1',
        layer: 'contour',
        fields: 'ele',
    };

    describe('getData', function() {
        it('getData using L.latlng', function(done) {
            surface.getData(surfaceOptions, L.latLng(34.59223698151803, -119.5667839050293), function(err, res) {
                expect(JSON.stringify(res)).to.eql('{"results":[{"id":0,"latlng":{"lat":34.59223698151803,"lng":-119.5667839050293},"ele":1111.8767164576957,"distance":0}],"attribution":"<a href=\'https://www.mapbox.com/about/maps/\' target=\'_blank\'>&copy; Mapbox</a>"}');
                done();
            });
        });
        it('getData using a signle array', function(done) {
            surface.getData(surfaceOptions, [34.60876906580382, -119.58189010620117], function(err, res) {
                expect(JSON.stringify(res)).to.eql('{"results":[{"id":0,"latlng":{"lat":34.60876906580382,"lng":-119.58189010620117},"ele":891.2292729788564,"distance":0}],"attribution":"<a href=\'https://www.mapbox.com/about/maps/\' target=\'_blank\'>&copy; Mapbox</a>"}');
                done();
            });
        });
        it('getData using a signle array', function(done) {
            surface.getData(surfaceOptions, [[34.60876906580382, -119.58189010620117]], function(err, res) {
                expect(JSON.stringify(res)).to.eql('{"results":[{"id":0,"latlng":{"lat":34.60876906580382,"lng":-119.58189010620117},"ele":891.2292729788564,"distance":0}],"attribution":"<a href=\'https://www.mapbox.com/about/maps/\' target=\'_blank\'>&copy; Mapbox</a>"}');
                done();
            });
        });
        it('getData with many points', function(done) {
            surface.getData(surfaceOptions, [[34.60876906580382,-119.58189010620117],[34.60453038355465,-119.57639694213866],[34.60241096129153,-119.57588195800781],[34.60043278504442,-119.57502365112303],[34.59704151614417,-119.57244873046874],[34.5949219027687,-119.57056045532227],[34.59223698151803,-119.5667839050293],[34.590823830216586,-119.56438064575194],[34.5871495243434,-119.5616340637207],[34.5863015845293,-119.55854415893553],[34.584888332277814,-119.55562591552734],[34.58319239785046,-119.55305099487305],[34.580789764834705,-119.55099105834961],[34.57796304883451,-119.54961776733398],[34.57683233551799,-119.54927444458006],[34.57626697309206,-119.54652786254883],[34.57428817432136,-119.54172134399414],[34.57315741101919,-119.53845977783203],[34.57273337081576,-119.53433990478517],[34.57287471779053,-119.52987670898438],[34.57188528392067,-119.52507019042967],[34.570330435477956,-119.52232360839842],[34.57004773263718,-119.5192337036133],[34.570754487936846,-119.51391220092772],[34.57174393526374,-119.51082229614258],[34.573298757273044,-119.50841903686523],[34.57697367552368,-119.50824737548828],[34.57909374677031,-119.50927734374999],[34.58036576356307,-119.50927734374999],[34.58206175567162,-119.50653076171874],[34.58333372704127,-119.50515747070311],[34.584888332277814,-119.50498580932617],[34.587714812745794,-119.50498580932617],[34.58983461000389,-119.50807571411133],[34.59039988013903,-119.51030731201172],[34.59039988013903,-119.51374053955077],[34.59039988013903,-119.51562881469727],[34.590541197071914,-119.51751708984375],[34.59124777813088,-119.5199203491211],[34.593367485252614,-119.52180862426756],[34.59463928356551,-119.52266693115234],[34.59647629119911,-119.52438354492186],[34.59859586491132,-119.52695846557616],[34.60029148493807,-119.52713012695314],[34.60368262114034,-119.52833175659178],[34.60537813731427,-119.52833175659178],[34.60735619576234,-119.52833175659178],[34.60947549180879,-119.52833175659178],[34.61145345264612,-119.52833175659178],[34.61286625296409,-119.52833175659178],[34.619647359797206,-119.52919006347656]], function(err, res) {
                expect(JSON.stringify(res)).to.eql('{"results":[{"id":0,"latlng":{"lat":34.60876906580382,"lng":-119.58189010620117},"ele":891.2292729788564,"distance":0},{"id":1,"latlng":{"lat":34.60453038355465,"lng":-119.57639694213866},"ele":1287.8785665107716,"distance":0.241},{"id":2,"latlng":{"lat":34.60241096129153,"lng":-119.57588195800781},"ele":1298.4463133148868,"distance":0.474},{"id":3,"latlng":{"lat":34.60043278504442,"lng":-119.57502365112303},"ele":1230.4727613684643,"distance":0.92},{"id":4,"latlng":{"lat":34.59704151614417,"lng":-119.57244873046874},"ele":1270,"distance":1.212},{"id":5,"latlng":{"lat":34.5949219027687,"lng":-119.57056045532227},"ele":1276.1151612687497,"distance":1.669},{"id":6,"latlng":{"lat":34.59223698151803,"lng":-119.5667839050293},"ele":1111.8767164576957,"distance":1.94},{"id":7,"latlng":{"lat":34.590823830216586,"lng":-119.56438064575194},"ele":1042.3161563580536,"distance":2.42},{"id":8,"latlng":{"lat":34.5871495243434,"lng":-119.5616340637207},"ele":1006.4805215675134,"distance":2.719},{"id":9,"latlng":{"lat":34.5863015845293,"lng":-119.55854415893553},"ele":945.372413907269,"distance":3.029},{"id":10,"latlng":{"lat":34.584888332277814,"lng":-119.55562591552734},"ele":902.7620645176737,"distance":3.331},{"id":11,"latlng":{"lat":34.58319239785046,"lng":-119.55305099487305},"ele":873.8451142571326,"distance":3.659},{"id":12,"latlng":{"lat":34.580789764834705,"lng":-119.55099105834961},"ele":860.9841844545881,"distance":3.998},{"id":13,"latlng":{"lat":34.57796304883451,"lng":-119.54961776733398},"ele":797.539521370865,"distance":4.127},{"id":14,"latlng":{"lat":34.57683233551799,"lng":-119.54927444458006},"ele":761.498246407121,"distance":4.387},{"id":15,"latlng":{"lat":34.57626697309206,"lng":-119.54652786254883},"ele":805.6560516770077,"distance":4.879},{"id":16,"latlng":{"lat":34.57428817432136,"lng":-119.54172134399414},"ele":1034.5163434165906,"distance":5.204},{"id":17,"latlng":{"lat":34.57315741101919,"lng":-119.53845977783203},"ele":1069.9999999990807,"distance":5.584},{"id":18,"latlng":{"lat":34.57273337081576,"lng":-119.53433990478517},"ele":1045.0170818644015,"distance":5.994},{"id":19,"latlng":{"lat":34.57287471779053,"lng":-119.52987670898438},"ele":1086.0133522646681,"distance":6.448},{"id":20,"latlng":{"lat":34.57188528392067,"lng":-119.52507019042967},"ele":1177.5154917576717,"distance":6.753},{"id":21,"latlng":{"lat":34.570330435477956,"lng":-119.52232360839842},"ele":1254.6837070289587,"distance":7.038},{"id":22,"latlng":{"lat":34.57004773263718,"lng":-119.5192337036133},"ele":1318.6956521761979,"distance":7.533},{"id":23,"latlng":{"lat":34.570754487936846,"lng":-119.51391220092772},"ele":1359.6767703811418,"distance":7.836},{"id":24,"latlng":{"lat":34.57174393526374,"lng":-119.51082229614258},"ele":1307.104497215218,"distance":8.117},{"id":25,"latlng":{"lat":34.573298757273044,"lng":-119.50841903686523},"ele":1319.1034285871153,"distance":8.526},{"id":26,"latlng":{"lat":34.57697367552368,"lng":-119.50824737548828},"ele":1406.3286713286057,"distance":8.78},{"id":27,"latlng":{"lat":34.57909374677031,"lng":-119.50927734374999},"ele":1272.6081097555334,"distance":8.922},{"id":28,"latlng":{"lat":34.58036576356307,"lng":-119.50927734374999},"ele":1206.23443250733,"distance":9.236},{"id":29,"latlng":{"lat":34.58206175567162,"lng":-119.50653076171874},"ele":1227.885837562742,"distance":9.426},{"id":30,"latlng":{"lat":34.58333372704127,"lng":-119.50515747070311},"ele":1225.5933460733756,"distance":9.6},{"id":31,"latlng":{"lat":34.584888332277814,"lng":-119.50498580932617},"ele":1332.5424841178549,"distance":9.914},{"id":32,"latlng":{"lat":34.587714812745794,"lng":-119.50498580932617},"ele":1424.7769558255625,"distance":10.283},{"id":33,"latlng":{"lat":34.58983461000389,"lng":-119.50807571411133},"ele":1305.6896551701723,"distance":10.497},{"id":34,"latlng":{"lat":34.59039988013903,"lng":-119.51030731201172},"ele":1198.7952522381547,"distance":10.811},{"id":35,"latlng":{"lat":34.59039988013903,"lng":-119.51374053955077},"ele":1109.8099857716365,"distance":10.984},{"id":36,"latlng":{"lat":34.59039988013903,"lng":-119.51562881469727},"ele":1033.3210525720078,"distance":11.158},{"id":37,"latlng":{"lat":34.590541197071914,"lng":-119.51751708984375},"ele":1058.3571085112844,"distance":11.392},{"id":38,"latlng":{"lat":34.59124777813088,"lng":-119.5199203491211},"ele":1081.704882650214,"distance":11.685},{"id":39,"latlng":{"lat":34.593367485252614,"lng":-119.52180862426756},"ele":1153.4873756972254,"distance":11.847},{"id":40,"latlng":{"lat":34.59463928356551,"lng":-119.52266693115234},"ele":1115.0208301439534,"distance":12.105},{"id":41,"latlng":{"lat":34.59647629119911,"lng":-119.52438354492186},"ele":1225.6542078896275,"distance":12.438},{"id":42,"latlng":{"lat":34.59859586491132,"lng":-119.52695846557616},"ele":1294.1558963212817,"distance":12.628},{"id":43,"latlng":{"lat":34.60029148493807,"lng":-119.52713012695314},"ele":1287.3014805489188,"distance":13.021},{"id":44,"latlng":{"lat":34.60368262114034,"lng":-119.52833175659178},"ele":1328.1707317085893,"distance":13.21},{"id":45,"latlng":{"lat":34.60537813731427,"lng":-119.52833175659178},"ele":1379.2524662859598,"distance":13.43},{"id":46,"latlng":{"lat":34.60735619576234,"lng":-119.52833175659178},"ele":1314.050179918049,"distance":13.666},{"id":47,"latlng":{"lat":34.60947549180879,"lng":-119.52833175659178},"ele":1175.901080197535,"distance":13.886},{"id":48,"latlng":{"lat":34.61145345264612,"lng":-119.52833175659178},"ele":1100.8657088564726,"distance":14.043},{"id":49,"latlng":{"lat":34.61286625296409,"lng":-119.52833175659178},"ele":1086.7962275920056,"distance":14.802},{"id":50,"latlng":{"lat":34.619647359797206,"lng":-119.52919006347656},"ele":1157.222222217521,"distance":15.561}],"attribution":"<a href=\'https://www.mapbox.com/about/maps/\' target=\'_blank\'>&copy; Mapbox</a>"}');
                done();
            });
        });
        it('getData with many points and return geojson', function(done) {
            var surfaceOptionsGeoJson = {
                mapid: 'mapbox.mapbox-terrain-v1',
                layer: 'contour',
                fields: 'ele',
                geojson: true
            };
            surface.getData(surfaceOptionsGeoJson, [[34.60876906580382,-119.58189010620117],[34.60453038355465,-119.57639694213866],[34.60241096129153,-119.57588195800781],[34.60043278504442,-119.57502365112303],[34.59704151614417,-119.57244873046874],[34.5949219027687,-119.57056045532227],[34.59223698151803,-119.5667839050293],[34.590823830216586,-119.56438064575194],[34.5871495243434,-119.5616340637207],[34.5863015845293,-119.55854415893553],[34.584888332277814,-119.55562591552734],[34.58319239785046,-119.55305099487305],[34.580789764834705,-119.55099105834961],[34.57796304883451,-119.54961776733398],[34.57683233551799,-119.54927444458006],[34.57626697309206,-119.54652786254883],[34.57428817432136,-119.54172134399414],[34.57315741101919,-119.53845977783203],[34.57273337081576,-119.53433990478517],[34.57287471779053,-119.52987670898438],[34.57188528392067,-119.52507019042967],[34.570330435477956,-119.52232360839842],[34.57004773263718,-119.5192337036133],[34.570754487936846,-119.51391220092772],[34.57174393526374,-119.51082229614258],[34.573298757273044,-119.50841903686523],[34.57697367552368,-119.50824737548828],[34.57909374677031,-119.50927734374999],[34.58036576356307,-119.50927734374999],[34.58206175567162,-119.50653076171874],[34.58333372704127,-119.50515747070311],[34.584888332277814,-119.50498580932617],[34.587714812745794,-119.50498580932617],[34.58983461000389,-119.50807571411133],[34.59039988013903,-119.51030731201172],[34.59039988013903,-119.51374053955077],[34.59039988013903,-119.51562881469727],[34.590541197071914,-119.51751708984375],[34.59124777813088,-119.5199203491211],[34.593367485252614,-119.52180862426756],[34.59463928356551,-119.52266693115234],[34.59647629119911,-119.52438354492186],[34.59859586491132,-119.52695846557616],[34.60029148493807,-119.52713012695314],[34.60368262114034,-119.52833175659178],[34.60537813731427,-119.52833175659178],[34.60735619576234,-119.52833175659178],[34.60947549180879,-119.52833175659178],[34.61145345264612,-119.52833175659178],[34.61286625296409,-119.52833175659178],[34.619647359797206,-119.52919006347656]], function(err, res) {
                expect(JSON.stringify(res)).to.eql('{"results":{"type":"FeatureCollection","features":[{"type":"Feature","geometry":{"type":"Point","coordinates":[-119.58189010620117,34.60876906580382]},"properties":{"id":0,"ele":891.2292729788564}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-119.57639694213866,34.60453038355465]},"properties":{"id":1,"ele":1287.8785665107716}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-119.57588195800781,34.60241096129153]},"properties":{"id":2,"ele":1298.4463133148868}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-119.57502365112303,34.60043278504442]},"properties":{"id":3,"ele":1230.4727613684643}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-119.57244873046874,34.59704151614417]},"properties":{"id":4,"ele":1270}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-119.57056045532227,34.5949219027687]},"properties":{"id":5,"ele":1276.1151612687497}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-119.5667839050293,34.59223698151803]},"properties":{"id":6,"ele":1111.8767164576957}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-119.56438064575194,34.590823830216586]},"properties":{"id":7,"ele":1042.3161563580536}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-119.5616340637207,34.5871495243434]},"properties":{"id":8,"ele":1006.4805215675134}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-119.55854415893553,34.5863015845293]},"properties":{"id":9,"ele":945.372413907269}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-119.55562591552734,34.584888332277814]},"properties":{"id":10,"ele":902.7620645176737}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-119.55305099487305,34.58319239785046]},"properties":{"id":11,"ele":873.8451142571326}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-119.55099105834961,34.580789764834705]},"properties":{"id":12,"ele":860.9841844545881}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-119.54961776733398,34.57796304883451]},"properties":{"id":13,"ele":797.539521370865}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-119.54927444458006,34.57683233551799]},"properties":{"id":14,"ele":761.498246407121}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-119.54652786254883,34.57626697309206]},"properties":{"id":15,"ele":805.6560516770077}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-119.54172134399414,34.57428817432136]},"properties":{"id":16,"ele":1034.5163434165906}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-119.53845977783203,34.57315741101919]},"properties":{"id":17,"ele":1069.9999999990807}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-119.53433990478517,34.57273337081576]},"properties":{"id":18,"ele":1045.0170818644015}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-119.52987670898438,34.57287471779053]},"properties":{"id":19,"ele":1086.0133522646681}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-119.52507019042967,34.57188528392067]},"properties":{"id":20,"ele":1177.5154917576717}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-119.52232360839842,34.570330435477956]},"properties":{"id":21,"ele":1254.6837070289587}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-119.5192337036133,34.57004773263718]},"properties":{"id":22,"ele":1318.6956521761979}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-119.51391220092772,34.570754487936846]},"properties":{"id":23,"ele":1359.6767703811418}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-119.51082229614258,34.57174393526374]},"properties":{"id":24,"ele":1307.104497215218}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-119.50841903686523,34.573298757273044]},"properties":{"id":25,"ele":1319.1034285871153}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-119.50824737548828,34.57697367552368]},"properties":{"id":26,"ele":1406.3286713286057}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-119.50927734374999,34.57909374677031]},"properties":{"id":27,"ele":1272.6081097555334}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-119.50927734374999,34.58036576356307]},"properties":{"id":28,"ele":1206.23443250733}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-119.50653076171874,34.58206175567162]},"properties":{"id":29,"ele":1227.885837562742}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-119.50515747070311,34.58333372704127]},"properties":{"id":30,"ele":1225.5933460733756}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-119.50498580932617,34.584888332277814]},"properties":{"id":31,"ele":1332.5424841178549}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-119.50498580932617,34.587714812745794]},"properties":{"id":32,"ele":1424.7769558255625}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-119.50807571411133,34.58983461000389]},"properties":{"id":33,"ele":1305.6896551701723}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-119.51030731201172,34.59039988013903]},"properties":{"id":34,"ele":1198.7952522381547}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-119.51374053955077,34.59039988013903]},"properties":{"id":35,"ele":1109.8099857716365}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-119.51562881469727,34.59039988013903]},"properties":{"id":36,"ele":1033.3210525720078}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-119.51751708984375,34.590541197071914]},"properties":{"id":37,"ele":1058.3571085112844}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-119.5199203491211,34.59124777813088]},"properties":{"id":38,"ele":1081.704882650214}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-119.52180862426756,34.593367485252614]},"properties":{"id":39,"ele":1153.4873756972254}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-119.52266693115234,34.59463928356551]},"properties":{"id":40,"ele":1115.0208301439534}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-119.52438354492186,34.59647629119911]},"properties":{"id":41,"ele":1225.6542078896275}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-119.52695846557616,34.59859586491132]},"properties":{"id":42,"ele":1294.1558963212817}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-119.52713012695314,34.60029148493807]},"properties":{"id":43,"ele":1287.3014805489188}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-119.52833175659178,34.60368262114034]},"properties":{"id":44,"ele":1328.1707317085893}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-119.52833175659178,34.60537813731427]},"properties":{"id":45,"ele":1379.2524662859598}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-119.52833175659178,34.60735619576234]},"properties":{"id":46,"ele":1314.050179918049}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-119.52833175659178,34.60947549180879]},"properties":{"id":47,"ele":1175.901080197535}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-119.52833175659178,34.61145345264612]},"properties":{"id":48,"ele":1100.8657088564726}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-119.52833175659178,34.61286625296409]},"properties":{"id":49,"ele":1086.7962275920056}},{"type":"Feature","geometry":{"type":"Point","coordinates":[-119.52919006347656,34.619647359797206]},"properties":{"id":50,"ele":1157.222222217521}}]},"attribution":"<a href=\'https://www.mapbox.com/about/maps/\' target=\'_blank\'>&copy; Mapbox</a>"}');
                done();
            });
        });
    });

    describe('calculateBetween', function(){
        it('should calculateBetween for 10 points', function(done){
            surface.calculateBetween(surfaceOptions, [34.6107, -119.4648], [34.5678, -119.4614], 10, function(err, res) {
                expect(JSON.stringify(res)).to.eql('{"results":[{"id":0,"latlng":{"lat":34.606410000000004,"lng":-119.46446},"ele":1574.3403883271435,"distance":0},{"id":1,"latlng":{"lat":34.60212,"lng":-119.46412},"ele":1558.6911208019378,"distance":0.479},{"id":2,"latlng":{"lat":34.59783,"lng":-119.46378},"ele":1547.5045745633086,"distance":0.957},{"id":3,"latlng":{"lat":34.59354,"lng":-119.46343999999999},"ele":1452.1683892694584,"distance":1.436},{"id":4,"latlng":{"lat":34.58925,"lng":-119.4631},"ele":1518.5486916267546,"distance":1.914},{"id":5,"latlng":{"lat":34.58496,"lng":-119.46276},"ele":1543.0883114763915,"distance":2.393},{"id":6,"latlng":{"lat":34.58067,"lng":-119.46242},"ele":1576.637463453755,"distance":2.871},{"id":7,"latlng":{"lat":34.57638,"lng":-119.46208},"ele":1670.2149247658926,"distance":3.35},{"id":8,"latlng":{"lat":34.572089999999996,"lng":-119.46173999999999},"ele":1644.1182950606571,"distance":3.829},{"id":9,"latlng":{"lat":34.5678,"lng":-119.4614},"ele":1744.3316522340954,"distance":4.307}],"attribution":"<a href=\'https://www.mapbox.com/about/maps/\' target=\'_blank\'>&copy; Mapbox</a>"}');
                done();
            });
        });
        it('should return error for 301 points', function(done){
            surface.calculateBetween(surfaceOptions, [34.6107, -119.4648], [34.5678, -119.4614], 301, function(err, res) {
                expect(err).to.eql('Query is too long, max number of points is 300.');
                done();
            });
        });
    });

    describe('getInfo', function(){
        it('should return information about mapid', function(done) {
            surface.getInfo('mapbox.mapbox-terrain-v1', function(err, res){
                expect(res).to.eql([{"description":"Generalized landcover classification","fields":{"class":"One of: wood, scrub, grass, crop, snow"},"maxzoom":22,"minzoom":0,"layer":"landcover"},{"description":"","fields":{"class":"One of: full_shadow, medium_shadow, medium_highlight, full_highlight"},"maxzoom":22,"minzoom":0,"layer":"hillshade"},{"description":"Elevation contour lines","fields":{"ele":"Integer. The elevation of the contour in meters.","index":"Indicator for every 2nd, 5th, or 10th contour. One of: 2, 5, 10, null"},"maxzoom":22,"minzoom":0,"layer":"contour"}]);
                done();
            });
        });
    });

    describe('chart', function(){
        it('Should make chart', function(done) {
            surface.getData(surfaceOptions, [[34.60876906580382,-119.58189010620117],[34.60453038355465,-119.57639694213866],[34.60241096129153,-119.57588195800781],[34.60043278504442,-119.57502365112303],[34.59704151614417,-119.57244873046874],[34.5949219027687,-119.57056045532227],[34.59223698151803,-119.5667839050293],[34.590823830216586,-119.56438064575194],[34.5871495243434,-119.5616340637207],[34.5863015845293,-119.55854415893553],[34.584888332277814,-119.55562591552734],[34.58319239785046,-119.55305099487305],[34.580789764834705,-119.55099105834961],[34.57796304883451,-119.54961776733398],[34.57683233551799,-119.54927444458006],[34.57626697309206,-119.54652786254883],[34.57428817432136,-119.54172134399414],[34.57315741101919,-119.53845977783203],[34.57273337081576,-119.53433990478517],[34.57287471779053,-119.52987670898438],[34.57188528392067,-119.52507019042967],[34.570330435477956,-119.52232360839842],[34.57004773263718,-119.5192337036133],[34.570754487936846,-119.51391220092772],[34.57174393526374,-119.51082229614258],[34.573298757273044,-119.50841903686523],[34.57697367552368,-119.50824737548828],[34.57909374677031,-119.50927734374999],[34.58036576356307,-119.50927734374999],[34.58206175567162,-119.50653076171874],[34.58333372704127,-119.50515747070311],[34.584888332277814,-119.50498580932617],[34.587714812745794,-119.50498580932617],[34.58983461000389,-119.50807571411133],[34.59039988013903,-119.51030731201172],[34.59039988013903,-119.51374053955077],[34.59039988013903,-119.51562881469727],[34.590541197071914,-119.51751708984375],[34.59124777813088,-119.5199203491211],[34.593367485252614,-119.52180862426756],[34.59463928356551,-119.52266693115234],[34.59647629119911,-119.52438354492186],[34.59859586491132,-119.52695846557616],[34.60029148493807,-119.52713012695314],[34.60368262114034,-119.52833175659178],[34.60537813731427,-119.52833175659178],[34.60735619576234,-119.52833175659178],[34.60947549180879,-119.52833175659178],[34.61145345264612,-119.52833175659178],[34.61286625296409,-119.52833175659178],[34.619647359797206,-119.52919006347656]], function(err, res) {
                var elevationChart = L.mapbox.surface.chart({
                    position: 'topright',
                    chartType: 'area',
                    yAxis: {
                        data: 'ele',
                        label: 'Elevation (m)',
                        numberOfTicks: 4
                    },
                    margin: [40, 18, 25, 48],
                    height: 100,
                    width: 350
                }, res);
                expect(elevationChart).to.eql({"options":{"position":"topright","collapsed":true,"autoZIndex":true,"chartType":"area","yAxis":{"data":"ele","label":"Elevation (m)","numberOfTicks":4},"margin":[40,18,25,48],"height":100,"width":350,"data":{"results":[{"id":0,"latlng":{"lat":34.60876906580382,"lng":-119.58189010620117},"ele":891.2292729788564,"distance":0},{"id":1,"latlng":{"lat":34.60453038355465,"lng":-119.57639694213866},"ele":1287.8785665107716,"distance":0.241},{"id":2,"latlng":{"lat":34.60241096129153,"lng":-119.57588195800781},"ele":1298.4463133148868,"distance":0.474},{"id":3,"latlng":{"lat":34.60043278504442,"lng":-119.57502365112303},"ele":1230.4727613684643,"distance":0.92},{"id":4,"latlng":{"lat":34.59704151614417,"lng":-119.57244873046874},"ele":1270,"distance":1.212},{"id":5,"latlng":{"lat":34.5949219027687,"lng":-119.57056045532227},"ele":1276.1151612687497,"distance":1.669},{"id":6,"latlng":{"lat":34.59223698151803,"lng":-119.5667839050293},"ele":1111.8767164576957,"distance":1.94},{"id":7,"latlng":{"lat":34.590823830216586,"lng":-119.56438064575194},"ele":1042.3161563580536,"distance":2.42},{"id":8,"latlng":{"lat":34.5871495243434,"lng":-119.5616340637207},"ele":1006.4805215675134,"distance":2.719},{"id":9,"latlng":{"lat":34.5863015845293,"lng":-119.55854415893553},"ele":945.372413907269,"distance":3.029},{"id":10,"latlng":{"lat":34.584888332277814,"lng":-119.55562591552734},"ele":902.7620645176737,"distance":3.331},{"id":11,"latlng":{"lat":34.58319239785046,"lng":-119.55305099487305},"ele":873.8451142571326,"distance":3.659},{"id":12,"latlng":{"lat":34.580789764834705,"lng":-119.55099105834961},"ele":860.9841844545881,"distance":3.998},{"id":13,"latlng":{"lat":34.57796304883451,"lng":-119.54961776733398},"ele":797.539521370865,"distance":4.127},{"id":14,"latlng":{"lat":34.57683233551799,"lng":-119.54927444458006},"ele":761.498246407121,"distance":4.387},{"id":15,"latlng":{"lat":34.57626697309206,"lng":-119.54652786254883},"ele":805.6560516770077,"distance":4.879},{"id":16,"latlng":{"lat":34.57428817432136,"lng":-119.54172134399414},"ele":1034.5163434165906,"distance":5.204},{"id":17,"latlng":{"lat":34.57315741101919,"lng":-119.53845977783203},"ele":1069.9999999990807,"distance":5.584},{"id":18,"latlng":{"lat":34.57273337081576,"lng":-119.53433990478517},"ele":1045.0170818644015,"distance":5.994},{"id":19,"latlng":{"lat":34.57287471779053,"lng":-119.52987670898438},"ele":1086.0133522646681,"distance":6.448},{"id":20,"latlng":{"lat":34.57188528392067,"lng":-119.52507019042967},"ele":1177.5154917576717,"distance":6.753},{"id":21,"latlng":{"lat":34.570330435477956,"lng":-119.52232360839842},"ele":1254.6837070289587,"distance":7.038},{"id":22,"latlng":{"lat":34.57004773263718,"lng":-119.5192337036133},"ele":1318.6956521761979,"distance":7.533},{"id":23,"latlng":{"lat":34.570754487936846,"lng":-119.51391220092772},"ele":1359.6767703811418,"distance":7.836},{"id":24,"latlng":{"lat":34.57174393526374,"lng":-119.51082229614258},"ele":1307.104497215218,"distance":8.117},{"id":25,"latlng":{"lat":34.573298757273044,"lng":-119.50841903686523},"ele":1319.1034285871153,"distance":8.526},{"id":26,"latlng":{"lat":34.57697367552368,"lng":-119.50824737548828},"ele":1406.3286713286057,"distance":8.78},{"id":27,"latlng":{"lat":34.57909374677031,"lng":-119.50927734374999},"ele":1272.6081097555334,"distance":8.922},{"id":28,"latlng":{"lat":34.58036576356307,"lng":-119.50927734374999},"ele":1206.23443250733,"distance":9.236},{"id":29,"latlng":{"lat":34.58206175567162,"lng":-119.50653076171874},"ele":1227.885837562742,"distance":9.426},{"id":30,"latlng":{"lat":34.58333372704127,"lng":-119.50515747070311},"ele":1225.5933460733756,"distance":9.6},{"id":31,"latlng":{"lat":34.584888332277814,"lng":-119.50498580932617},"ele":1332.5424841178549,"distance":9.914},{"id":32,"latlng":{"lat":34.587714812745794,"lng":-119.50498580932617},"ele":1424.7769558255625,"distance":10.283},{"id":33,"latlng":{"lat":34.58983461000389,"lng":-119.50807571411133},"ele":1305.6896551701723,"distance":10.497},{"id":34,"latlng":{"lat":34.59039988013903,"lng":-119.51030731201172},"ele":1198.7952522381547,"distance":10.811},{"id":35,"latlng":{"lat":34.59039988013903,"lng":-119.51374053955077},"ele":1109.8099857716365,"distance":10.984},{"id":36,"latlng":{"lat":34.59039988013903,"lng":-119.51562881469727},"ele":1033.3210525720078,"distance":11.158},{"id":37,"latlng":{"lat":34.590541197071914,"lng":-119.51751708984375},"ele":1058.3571085112844,"distance":11.392},{"id":38,"latlng":{"lat":34.59124777813088,"lng":-119.5199203491211},"ele":1081.704882650214,"distance":11.685},{"id":39,"latlng":{"lat":34.593367485252614,"lng":-119.52180862426756},"ele":1153.4873756972254,"distance":11.847},{"id":40,"latlng":{"lat":34.59463928356551,"lng":-119.52266693115234},"ele":1115.0208301439534,"distance":12.105},{"id":41,"latlng":{"lat":34.59647629119911,"lng":-119.52438354492186},"ele":1225.6542078896275,"distance":12.438},{"id":42,"latlng":{"lat":34.59859586491132,"lng":-119.52695846557616},"ele":1294.1558963212817,"distance":12.628},{"id":43,"latlng":{"lat":34.60029148493807,"lng":-119.52713012695314},"ele":1287.3014805489188,"distance":13.021},{"id":44,"latlng":{"lat":34.60368262114034,"lng":-119.52833175659178},"ele":1328.1707317085893,"distance":13.21},{"id":45,"latlng":{"lat":34.60537813731427,"lng":-119.52833175659178},"ele":1379.2524662859598,"distance":13.43},{"id":46,"latlng":{"lat":34.60735619576234,"lng":-119.52833175659178},"ele":1314.050179918049,"distance":13.666},{"id":47,"latlng":{"lat":34.60947549180879,"lng":-119.52833175659178},"ele":1175.901080197535,"distance":13.886},{"id":48,"latlng":{"lat":34.61145345264612,"lng":-119.52833175659178},"ele":1100.8657088564726,"distance":14.043},{"id":49,"latlng":{"lat":34.61286625296409,"lng":-119.52833175659178},"ele":1086.7962275920056,"distance":14.802},{"id":50,"latlng":{"lat":34.619647359797206,"lng":-119.52919006347656},"ele":1157.222222217521,"distance":15.561}],"attribution":"<a href='https://www.mapbox.com/about/maps/' target='_blank'>&copy; Mapbox</a>"}},"_initHooksCalled":true});
                done();
            });
        });
    });
});
