(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
'use strict';

if (!L.mapbox) throw new Error('include mapbox.js before mapbox.directions.js');

L.mapbox.surface = require('./src/surface.js');
L.mapbox.surface.chart = require('./src/chart.js');
L.mapbox.surface.line = require('./src/line.js');
},{"./src/chart.js":3,"./src/line.js":4,"./src/surface.js":5}],2:[function(require,module,exports){
!function(){var d3={version:"3.4.1"};d3.ascending=function(a,b){return a<b?-1:a>b?1:a>=b?0:NaN};d3.descending=function(a,b){return b<a?-1:b>a?1:b>=a?0:NaN};d3.min=function(array,f){var i=-1,n=array.length,a,b;if(arguments.length===1){while(++i<n&&!((a=array[i])!=null&&a<=a))a=undefined;while(++i<n)if((b=array[i])!=null&&a>b)a=b}else{while(++i<n&&!((a=f.call(array,array[i],i))!=null&&a<=a))a=undefined;while(++i<n)if((b=f.call(array,array[i],i))!=null&&a>b)a=b}return a};d3.max=function(array,f){var i=-1,n=array.length,a,b;if(arguments.length===1){while(++i<n&&!((a=array[i])!=null&&a<=a))a=undefined;while(++i<n)if((b=array[i])!=null&&b>a)a=b}else{while(++i<n&&!((a=f.call(array,array[i],i))!=null&&a<=a))a=undefined;while(++i<n)if((b=f.call(array,array[i],i))!=null&&b>a)a=b}return a};d3.extent=function(array,f){var i=-1,n=array.length,a,b,c;if(arguments.length===1){while(++i<n&&!((a=c=array[i])!=null&&a<=a))a=c=undefined;while(++i<n)if((b=array[i])!=null){if(a>b)a=b;if(c<b)c=b}}else{while(++i<n&&!((a=c=f.call(array,array[i],i))!=null&&a<=a))a=undefined;while(++i<n)if((b=f.call(array,array[i],i))!=null){if(a>b)a=b;if(c<b)c=b}}return[a,c]};d3.sum=function(array,f){var s=0,n=array.length,a,i=-1;if(arguments.length===1){while(++i<n)if(!isNaN(a=+array[i]))s+=a}else{while(++i<n)if(!isNaN(a=+f.call(array,array[i],i)))s+=a}return s};function d3_number(x){return x!=null&&!isNaN(x)}d3.mean=function(array,f){var n=array.length,a,m=0,i=-1,j=0;if(arguments.length===1){while(++i<n)if(d3_number(a=array[i]))m+=(a-m)/++j}else{while(++i<n)if(d3_number(a=f.call(array,array[i],i)))m+=(a-m)/++j}return j?m:undefined};d3.quantile=function(values,p){var H=(values.length-1)*p+1,h=Math.floor(H),v=+values[h-1],e=H-h;return e?v+e*(values[h]-v):v};d3.median=function(array,f){if(arguments.length>1)array=array.map(f);array=array.filter(d3_number);return array.length?d3.quantile(array.sort(d3.ascending),.5):undefined};d3.bisector=function(f){return{left:function(a,x,lo,hi){if(arguments.length<3)lo=0;if(arguments.length<4)hi=a.length;while(lo<hi){var mid=lo+hi>>>1;if(f.call(a,a[mid],mid)<x)lo=mid+1;else hi=mid}return lo},right:function(a,x,lo,hi){if(arguments.length<3)lo=0;if(arguments.length<4)hi=a.length;while(lo<hi){var mid=lo+hi>>>1;if(x<f.call(a,a[mid],mid))hi=mid;else lo=mid+1}return lo}}};var d3_bisector=d3.bisector(function(d){return d});d3.bisectLeft=d3_bisector.left;d3.bisect=d3.bisectRight=d3_bisector.right;d3.shuffle=function(array){var m=array.length,t,i;while(m){i=Math.random()*m--|0;t=array[m],array[m]=array[i],array[i]=t}return array};d3.permute=function(array,indexes){var i=indexes.length,permutes=new Array(i);while(i--)permutes[i]=array[indexes[i]];return permutes};d3.pairs=function(array){var i=0,n=array.length-1,p0,p1=array[0],pairs=new Array(n<0?0:n);while(i<n)pairs[i]=[p0=p1,p1=array[++i]];return pairs};d3.zip=function(){if(!(n=arguments.length))return[];for(var i=-1,m=d3.min(arguments,d3_zipLength),zips=new Array(m);++i<m;){for(var j=-1,n,zip=zips[i]=new Array(n);++j<n;){zip[j]=arguments[j][i]}}return zips};function d3_zipLength(d){return d.length}d3.transpose=function(matrix){return d3.zip.apply(d3,matrix)};d3.keys=function(map){var keys=[];for(var key in map)keys.push(key);return keys};d3.values=function(map){var values=[];for(var key in map)values.push(map[key]);return values};d3.entries=function(map){var entries=[];for(var key in map)entries.push({key:key,value:map[key]});return entries};d3.merge=function(arrays){var n=arrays.length,m,i=-1,j=0,merged,array;while(++i<n)j+=arrays[i].length;merged=new Array(j);while(--n>=0){array=arrays[n];m=array.length;while(--m>=0){merged[--j]=array[m]}}return merged};var abs=Math.abs;d3.range=function(start,stop,step){if(arguments.length<3){step=1;if(arguments.length<2){stop=start;start=0}}if((stop-start)/step===Infinity)throw new Error("infinite range");var range=[],k=d3_range_integerScale(abs(step)),i=-1,j;start*=k,stop*=k,step*=k;if(step<0)while((j=start+step*++i)>stop)range.push(j/k);else while((j=start+step*++i)<stop)range.push(j/k);return range};function d3_range_integerScale(x){var k=1;while(x*k%1)k*=10;return k}function d3_class(ctor,properties){try{for(var key in properties){Object.defineProperty(ctor.prototype,key,{value:properties[key],enumerable:false})}}catch(e){ctor.prototype=properties}}d3.map=function(object){var map=new d3_Map;if(object instanceof d3_Map)object.forEach(function(key,value){map.set(key,value)});else for(var key in object)map.set(key,object[key]);return map};function d3_Map(){}d3_class(d3_Map,{has:d3_map_has,get:function(key){return this[d3_map_prefix+key]},set:function(key,value){return this[d3_map_prefix+key]=value},remove:d3_map_remove,keys:d3_map_keys,values:function(){var values=[];this.forEach(function(key,value){values.push(value)});return values},entries:function(){var entries=[];this.forEach(function(key,value){entries.push({key:key,value:value})});return entries},size:d3_map_size,empty:d3_map_empty,forEach:function(f){for(var key in this)if(key.charCodeAt(0)===d3_map_prefixCode)f.call(this,key.substring(1),this[key])}});var d3_map_prefix="\x00",d3_map_prefixCode=d3_map_prefix.charCodeAt(0);function d3_map_has(key){return d3_map_prefix+key in this}function d3_map_remove(key){key=d3_map_prefix+key;return key in this&&delete this[key]}function d3_map_keys(){var keys=[];this.forEach(function(key){keys.push(key)});return keys}function d3_map_size(){var size=0;for(var key in this)if(key.charCodeAt(0)===d3_map_prefixCode)++size;return size}function d3_map_empty(){for(var key in this)if(key.charCodeAt(0)===d3_map_prefixCode)return false;return true}d3.nest=function(){var nest={},keys=[],sortKeys=[],sortValues,rollup;function map(mapType,array,depth){if(depth>=keys.length)return rollup?rollup.call(nest,array):sortValues?array.sort(sortValues):array;var i=-1,n=array.length,key=keys[depth++],keyValue,object,setter,valuesByKey=new d3_Map,values;while(++i<n){if(values=valuesByKey.get(keyValue=key(object=array[i]))){values.push(object)}else{valuesByKey.set(keyValue,[object])}}if(mapType){object=mapType();setter=function(keyValue,values){object.set(keyValue,map(mapType,values,depth))}}else{object={};setter=function(keyValue,values){object[keyValue]=map(mapType,values,depth)}}valuesByKey.forEach(setter);return object}function entries(map,depth){if(depth>=keys.length)return map;var array=[],sortKey=sortKeys[depth++];map.forEach(function(key,keyMap){array.push({key:key,values:entries(keyMap,depth)})});return sortKey?array.sort(function(a,b){return sortKey(a.key,b.key)}):array}nest.map=function(array,mapType){return map(mapType,array,0)};nest.entries=function(array){return entries(map(d3.map,array,0),0)};nest.key=function(d){keys.push(d);return nest};nest.sortKeys=function(order){sortKeys[keys.length-1]=order;return nest};nest.sortValues=function(order){sortValues=order;return nest};nest.rollup=function(f){rollup=f;return nest};return nest};d3.set=function(array){var set=new d3_Set;if(array)for(var i=0,n=array.length;i<n;++i)set.add(array[i]);return set};function d3_Set(){}d3_class(d3_Set,{has:d3_map_has,add:function(value){this[d3_map_prefix+value]=true;return value},remove:function(value){value=d3_map_prefix+value;return value in this&&delete this[value]},values:d3_map_keys,size:d3_map_size,empty:d3_map_empty,forEach:function(f){for(var value in this)if(value.charCodeAt(0)===d3_map_prefixCode)f.call(this,value.substring(1))}});function d3_functor(v){return typeof v==="function"?v:function(){return v}}d3.functor=d3_functor;var d3_nsPrefix={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};d3.ns={prefix:d3_nsPrefix,qualify:function(name){var i=name.indexOf(":"),prefix=name;if(i>=0){prefix=name.substring(0,i);name=name.substring(i+1)}return d3_nsPrefix.hasOwnProperty(prefix)?{space:d3_nsPrefix[prefix],local:name}:name}};d3.rebind=function(target,source){var i=1,n=arguments.length,method;while(++i<n)target[method=arguments[i]]=d3_rebind(target,source,source[method]);return target};function d3_rebind(target,source,method){return function(){var value=method.apply(source,arguments);return value===source?target:value}}d3.svg={};var π=Math.PI,τ=2*π,halfπ=π/2,ε=1e-6,ε2=ε*ε,d3_radians=π/180,d3_degrees=180/π;function d3_sgn(x){return x>0?1:x<0?-1:0}function d3_cross2d(a,b,c){return(b[0]-a[0])*(c[1]-a[1])-(b[1]-a[1])*(c[0]-a[0])}function d3_acos(x){return x>1?0:x<-1?π:Math.acos(x)}function d3_asin(x){return x>1?halfπ:x<-1?-halfπ:Math.asin(x)}function d3_sinh(x){return((x=Math.exp(x))-1/x)/2}function d3_cosh(x){return((x=Math.exp(x))+1/x)/2}function d3_tanh(x){return((x=Math.exp(2*x))-1)/(x+1)}function d3_haversin(x){return(x=Math.sin(x/2))*x}d3.svg.arc=function(){var innerRadius=d3_svg_arcInnerRadius,outerRadius=d3_svg_arcOuterRadius,startAngle=d3_svg_arcStartAngle,endAngle=d3_svg_arcEndAngle;function arc(){var r0=innerRadius.apply(this,arguments),r1=outerRadius.apply(this,arguments),a0=startAngle.apply(this,arguments)+d3_svg_arcOffset,a1=endAngle.apply(this,arguments)+d3_svg_arcOffset,da=(a1<a0&&(da=a0,a0=a1,a1=da),a1-a0),df=da<π?"0":"1",c0=Math.cos(a0),s0=Math.sin(a0),c1=Math.cos(a1),s1=Math.sin(a1);return da>=d3_svg_arcMax?r0?"M0,"+r1+"A"+r1+","+r1+" 0 1,1 0,"+-r1+"A"+r1+","+r1+" 0 1,1 0,"+r1+"M0,"+r0+"A"+r0+","+r0+" 0 1,0 0,"+-r0+"A"+r0+","+r0+" 0 1,0 0,"+r0+"Z":"M0,"+r1+"A"+r1+","+r1+" 0 1,1 0,"+-r1+"A"+r1+","+r1+" 0 1,1 0,"+r1+"Z":r0?"M"+r1*c0+","+r1*s0+"A"+r1+","+r1+" 0 "+df+",1 "+r1*c1+","+r1*s1+"L"+r0*c1+","+r0*s1+"A"+r0+","+r0+" 0 "+df+",0 "+r0*c0+","+r0*s0+"Z":"M"+r1*c0+","+r1*s0+"A"+r1+","+r1+" 0 "+df+",1 "+r1*c1+","+r1*s1+"L0,0"+"Z"}arc.innerRadius=function(v){if(!arguments.length)return innerRadius;innerRadius=d3_functor(v);return arc};arc.outerRadius=function(v){if(!arguments.length)return outerRadius;outerRadius=d3_functor(v);return arc};arc.startAngle=function(v){if(!arguments.length)return startAngle;startAngle=d3_functor(v);return arc};arc.endAngle=function(v){if(!arguments.length)return endAngle;endAngle=d3_functor(v);return arc};arc.centroid=function(){var r=(innerRadius.apply(this,arguments)+outerRadius.apply(this,arguments))/2,a=(startAngle.apply(this,arguments)+endAngle.apply(this,arguments))/2+d3_svg_arcOffset;return[Math.cos(a)*r,Math.sin(a)*r]};return arc};var d3_svg_arcOffset=-halfπ,d3_svg_arcMax=τ-ε;function d3_svg_arcInnerRadius(d){return d.innerRadius}function d3_svg_arcOuterRadius(d){return d.outerRadius}function d3_svg_arcStartAngle(d){return d.startAngle}function d3_svg_arcEndAngle(d){return d.endAngle}function d3_identity(d){return d}function d3_true(){return true}function d3_geom_pointX(d){return d[0]}function d3_geom_pointY(d){return d[1]}function d3_svg_line(projection){var x=d3_geom_pointX,y=d3_geom_pointY,defined=d3_true,interpolate=d3_svg_lineLinear,interpolateKey=interpolate.key,tension=.7;function line(data){var segments=[],points=[],i=-1,n=data.length,d,fx=d3_functor(x),fy=d3_functor(y);function segment(){segments.push("M",interpolate(projection(points),tension))}while(++i<n){if(defined.call(this,d=data[i],i)){points.push([+fx.call(this,d,i),+fy.call(this,d,i)])}else if(points.length){segment();points=[]}}if(points.length)segment();return segments.length?segments.join(""):null}line.x=function(_){if(!arguments.length)return x;x=_;return line};line.y=function(_){if(!arguments.length)return y;y=_;return line};line.defined=function(_){if(!arguments.length)return defined;defined=_;return line};line.interpolate=function(_){if(!arguments.length)return interpolateKey;if(typeof _==="function")interpolateKey=interpolate=_;else interpolateKey=(interpolate=d3_svg_lineInterpolators.get(_)||d3_svg_lineLinear).key;return line};line.tension=function(_){if(!arguments.length)return tension;tension=_;return line};return line}d3.svg.line=function(){return d3_svg_line(d3_identity)};var d3_svg_lineInterpolators=d3.map({linear:d3_svg_lineLinear,"linear-closed":d3_svg_lineLinearClosed,step:d3_svg_lineStep,"step-before":d3_svg_lineStepBefore,"step-after":d3_svg_lineStepAfter,basis:d3_svg_lineBasis,"basis-open":d3_svg_lineBasisOpen,"basis-closed":d3_svg_lineBasisClosed,bundle:d3_svg_lineBundle,cardinal:d3_svg_lineCardinal,"cardinal-open":d3_svg_lineCardinalOpen,"cardinal-closed":d3_svg_lineCardinalClosed,monotone:d3_svg_lineMonotone});d3_svg_lineInterpolators.forEach(function(key,value){value.key=key;value.closed=/-closed$/.test(key)});function d3_svg_lineLinear(points){return points.join("L")}function d3_svg_lineLinearClosed(points){return d3_svg_lineLinear(points)+"Z"}function d3_svg_lineStep(points){var i=0,n=points.length,p=points[0],path=[p[0],",",p[1]];while(++i<n)path.push("H",(p[0]+(p=points[i])[0])/2,"V",p[1]);if(n>1)path.push("H",p[0]);return path.join("")}function d3_svg_lineStepBefore(points){var i=0,n=points.length,p=points[0],path=[p[0],",",p[1]];while(++i<n)path.push("V",(p=points[i])[1],"H",p[0]);return path.join("")}function d3_svg_lineStepAfter(points){var i=0,n=points.length,p=points[0],path=[p[0],",",p[1]];while(++i<n)path.push("H",(p=points[i])[0],"V",p[1]);return path.join("")}function d3_svg_lineCardinalOpen(points,tension){return points.length<4?d3_svg_lineLinear(points):points[1]+d3_svg_lineHermite(points.slice(1,points.length-1),d3_svg_lineCardinalTangents(points,tension))}function d3_svg_lineCardinalClosed(points,tension){return points.length<3?d3_svg_lineLinear(points):points[0]+d3_svg_lineHermite((points.push(points[0]),points),d3_svg_lineCardinalTangents([points[points.length-2]].concat(points,[points[1]]),tension))}function d3_svg_lineCardinal(points,tension){return points.length<3?d3_svg_lineLinear(points):points[0]+d3_svg_lineHermite(points,d3_svg_lineCardinalTangents(points,tension))}function d3_svg_lineHermite(points,tangents){if(tangents.length<1||points.length!=tangents.length&&points.length!=tangents.length+2){return d3_svg_lineLinear(points)}var quad=points.length!=tangents.length,path="",p0=points[0],p=points[1],t0=tangents[0],t=t0,pi=1;if(quad){path+="Q"+(p[0]-t0[0]*2/3)+","+(p[1]-t0[1]*2/3)+","+p[0]+","+p[1];p0=points[1];pi=2}if(tangents.length>1){t=tangents[1];p=points[pi];pi++;path+="C"+(p0[0]+t0[0])+","+(p0[1]+t0[1])+","+(p[0]-t[0])+","+(p[1]-t[1])+","+p[0]+","+p[1];for(var i=2;i<tangents.length;i++,pi++){p=points[pi];t=tangents[i];path+="S"+(p[0]-t[0])+","+(p[1]-t[1])+","+p[0]+","+p[1]}}if(quad){var lp=points[pi];path+="Q"+(p[0]+t[0]*2/3)+","+(p[1]+t[1]*2/3)+","+lp[0]+","+lp[1]}return path}function d3_svg_lineCardinalTangents(points,tension){var tangents=[],a=(1-tension)/2,p0,p1=points[0],p2=points[1],i=1,n=points.length;while(++i<n){p0=p1;p1=p2;p2=points[i];tangents.push([a*(p2[0]-p0[0]),a*(p2[1]-p0[1])])}return tangents}function d3_svg_lineBasis(points){if(points.length<3)return d3_svg_lineLinear(points);var i=1,n=points.length,pi=points[0],x0=pi[0],y0=pi[1],px=[x0,x0,x0,(pi=points[1])[0]],py=[y0,y0,y0,pi[1]],path=[x0,",",y0,"L",d3_svg_lineDot4(d3_svg_lineBasisBezier3,px),",",d3_svg_lineDot4(d3_svg_lineBasisBezier3,py)];points.push(points[n-1]);while(++i<=n){pi=points[i];px.shift();px.push(pi[0]);py.shift();py.push(pi[1]);d3_svg_lineBasisBezier(path,px,py)}points.pop();path.push("L",pi);return path.join("")}function d3_svg_lineBasisOpen(points){if(points.length<4)return d3_svg_lineLinear(points);var path=[],i=-1,n=points.length,pi,px=[0],py=[0];while(++i<3){pi=points[i];px.push(pi[0]);py.push(pi[1])}path.push(d3_svg_lineDot4(d3_svg_lineBasisBezier3,px)+","+d3_svg_lineDot4(d3_svg_lineBasisBezier3,py));--i;while(++i<n){pi=points[i];px.shift();px.push(pi[0]);py.shift();py.push(pi[1]);d3_svg_lineBasisBezier(path,px,py)}return path.join("")}function d3_svg_lineBasisClosed(points){var path,i=-1,n=points.length,m=n+4,pi,px=[],py=[];while(++i<4){pi=points[i%n];px.push(pi[0]);py.push(pi[1])}path=[d3_svg_lineDot4(d3_svg_lineBasisBezier3,px),",",d3_svg_lineDot4(d3_svg_lineBasisBezier3,py)];--i;while(++i<m){pi=points[i%n];px.shift();px.push(pi[0]);py.shift();py.push(pi[1]);d3_svg_lineBasisBezier(path,px,py)}return path.join("")}function d3_svg_lineBundle(points,tension){var n=points.length-1;if(n){var x0=points[0][0],y0=points[0][1],dx=points[n][0]-x0,dy=points[n][1]-y0,i=-1,p,t;while(++i<=n){p=points[i];t=i/n;p[0]=tension*p[0]+(1-tension)*(x0+t*dx);p[1]=tension*p[1]+(1-tension)*(y0+t*dy)}}return d3_svg_lineBasis(points)}function d3_svg_lineDot4(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]}var d3_svg_lineBasisBezier1=[0,2/3,1/3,0],d3_svg_lineBasisBezier2=[0,1/3,2/3,0],d3_svg_lineBasisBezier3=[0,1/6,2/3,1/6];function d3_svg_lineBasisBezier(path,x,y){path.push("C",d3_svg_lineDot4(d3_svg_lineBasisBezier1,x),",",d3_svg_lineDot4(d3_svg_lineBasisBezier1,y),",",d3_svg_lineDot4(d3_svg_lineBasisBezier2,x),",",d3_svg_lineDot4(d3_svg_lineBasisBezier2,y),",",d3_svg_lineDot4(d3_svg_lineBasisBezier3,x),",",d3_svg_lineDot4(d3_svg_lineBasisBezier3,y))}function d3_svg_lineSlope(p0,p1){return(p1[1]-p0[1])/(p1[0]-p0[0])}function d3_svg_lineFiniteDifferences(points){var i=0,j=points.length-1,m=[],p0=points[0],p1=points[1],d=m[0]=d3_svg_lineSlope(p0,p1);while(++i<j){m[i]=(d+(d=d3_svg_lineSlope(p0=p1,p1=points[i+1])))/2}m[i]=d;return m}function d3_svg_lineMonotoneTangents(points){var tangents=[],d,a,b,s,m=d3_svg_lineFiniteDifferences(points),i=-1,j=points.length-1;while(++i<j){d=d3_svg_lineSlope(points[i],points[i+1]);if(abs(d)<ε){m[i]=m[i+1]=0}else{a=m[i]/d;b=m[i+1]/d;s=a*a+b*b;if(s>9){s=d*3/Math.sqrt(s);m[i]=s*a;m[i+1]=s*b}}}i=-1;while(++i<=j){s=(points[Math.min(j,i+1)][0]-points[Math.max(0,i-1)][0])/(6*(1+m[i]*m[i]));tangents.push([s||0,m[i]*s||0])}return tangents}function d3_svg_lineMonotone(points){return points.length<3?d3_svg_lineLinear(points):points[0]+d3_svg_lineHermite(points,d3_svg_lineMonotoneTangents(points))}d3.svg.line.radial=function(){var line=d3_svg_line(d3_svg_lineRadial);line.radius=line.x,delete line.x;line.angle=line.y,delete line.y;return line};function d3_svg_lineRadial(points){var point,i=-1,n=points.length,r,a;while(++i<n){point=points[i];r=point[0];a=point[1]+d3_svg_arcOffset;point[0]=r*Math.cos(a);point[1]=r*Math.sin(a)}return points}function d3_svg_area(projection){var x0=d3_geom_pointX,x1=d3_geom_pointX,y0=0,y1=d3_geom_pointY,defined=d3_true,interpolate=d3_svg_lineLinear,interpolateKey=interpolate.key,interpolateReverse=interpolate,L="L",tension=.7;function area(data){var segments=[],points0=[],points1=[],i=-1,n=data.length,d,fx0=d3_functor(x0),fy0=d3_functor(y0),fx1=x0===x1?function(){return x}:d3_functor(x1),fy1=y0===y1?function(){return y}:d3_functor(y1),x,y;function segment(){segments.push("M",interpolate(projection(points1),tension),L,interpolateReverse(projection(points0.reverse()),tension),"Z")}while(++i<n){if(defined.call(this,d=data[i],i)){points0.push([x=+fx0.call(this,d,i),y=+fy0.call(this,d,i)]);points1.push([+fx1.call(this,d,i),+fy1.call(this,d,i)])}else if(points0.length){segment();points0=[];points1=[]}}if(points0.length)segment();return segments.length?segments.join(""):null}area.x=function(_){if(!arguments.length)return x1;x0=x1=_;return area};area.x0=function(_){if(!arguments.length)return x0;x0=_;return area};area.x1=function(_){if(!arguments.length)return x1;x1=_;return area};area.y=function(_){if(!arguments.length)return y1;y0=y1=_;return area};area.y0=function(_){if(!arguments.length)return y0;y0=_;return area};area.y1=function(_){if(!arguments.length)return y1;y1=_;return area};area.defined=function(_){if(!arguments.length)return defined;defined=_;return area};area.interpolate=function(_){if(!arguments.length)return interpolateKey;if(typeof _==="function")interpolateKey=interpolate=_;else interpolateKey=(interpolate=d3_svg_lineInterpolators.get(_)||d3_svg_lineLinear).key;interpolateReverse=interpolate.reverse||interpolate;L=interpolate.closed?"M":"L";return area};area.tension=function(_){if(!arguments.length)return tension;tension=_;return area};return area}d3_svg_lineStepBefore.reverse=d3_svg_lineStepAfter;d3_svg_lineStepAfter.reverse=d3_svg_lineStepBefore;d3.svg.area=function(){return d3_svg_area(d3_identity)};d3.svg.area.radial=function(){var area=d3_svg_area(d3_svg_lineRadial);area.radius=area.x,delete area.x;area.innerRadius=area.x0,delete area.x0;area.outerRadius=area.x1,delete area.x1;area.angle=area.y,delete area.y;area.startAngle=area.y0,delete area.y0;area.endAngle=area.y1,delete area.y1;return area};function d3_source(d){return d.source}function d3_target(d){return d.target}d3.svg.chord=function(){var source=d3_source,target=d3_target,radius=d3_svg_chordRadius,startAngle=d3_svg_arcStartAngle,endAngle=d3_svg_arcEndAngle;function chord(d,i){var s=subgroup(this,source,d,i),t=subgroup(this,target,d,i);return"M"+s.p0+arc(s.r,s.p1,s.a1-s.a0)+(equals(s,t)?curve(s.r,s.p1,s.r,s.p0):curve(s.r,s.p1,t.r,t.p0)+arc(t.r,t.p1,t.a1-t.a0)+curve(t.r,t.p1,s.r,s.p0))+"Z"}function subgroup(self,f,d,i){var subgroup=f.call(self,d,i),r=radius.call(self,subgroup,i),a0=startAngle.call(self,subgroup,i)+d3_svg_arcOffset,a1=endAngle.call(self,subgroup,i)+d3_svg_arcOffset;return{r:r,a0:a0,a1:a1,p0:[r*Math.cos(a0),r*Math.sin(a0)],p1:[r*Math.cos(a1),r*Math.sin(a1)]}}function equals(a,b){return a.a0==b.a0&&a.a1==b.a1}function arc(r,p,a){return"A"+r+","+r+" 0 "+ +(a>π)+",1 "+p}function curve(r0,p0,r1,p1){return"Q 0,0 "+p1}chord.radius=function(v){if(!arguments.length)return radius;radius=d3_functor(v);return chord};chord.source=function(v){if(!arguments.length)return source;source=d3_functor(v);return chord};chord.target=function(v){if(!arguments.length)return target;target=d3_functor(v);return chord};chord.startAngle=function(v){if(!arguments.length)return startAngle;startAngle=d3_functor(v);return chord};chord.endAngle=function(v){if(!arguments.length)return endAngle;endAngle=d3_functor(v);return chord};return chord};function d3_svg_chordRadius(d){return d.radius}d3.svg.diagonal=function(){var source=d3_source,target=d3_target,projection=d3_svg_diagonalProjection;function diagonal(d,i){var p0=source.call(this,d,i),p3=target.call(this,d,i),m=(p0.y+p3.y)/2,p=[p0,{x:p0.x,y:m},{x:p3.x,y:m},p3];p=p.map(projection);return"M"+p[0]+"C"+p[1]+" "+p[2]+" "+p[3]}diagonal.source=function(x){if(!arguments.length)return source;source=d3_functor(x);return diagonal};diagonal.target=function(x){if(!arguments.length)return target;target=d3_functor(x);return diagonal};diagonal.projection=function(x){if(!arguments.length)return projection;projection=x;return diagonal};return diagonal};function d3_svg_diagonalProjection(d){return[d.x,d.y]}d3.svg.diagonal.radial=function(){var diagonal=d3.svg.diagonal(),projection=d3_svg_diagonalProjection,projection_=diagonal.projection;diagonal.projection=function(x){return arguments.length?projection_(d3_svg_diagonalRadialProjection(projection=x)):projection};return diagonal};function d3_svg_diagonalRadialProjection(projection){return function(){var d=projection.apply(this,arguments),r=d[0],a=d[1]+d3_svg_arcOffset;return[r*Math.cos(a),r*Math.sin(a)]}}d3.svg.symbol=function(){var type=d3_svg_symbolType,size=d3_svg_symbolSize;function symbol(d,i){return(d3_svg_symbols.get(type.call(this,d,i))||d3_svg_symbolCircle)(size.call(this,d,i))}symbol.type=function(x){if(!arguments.length)return type;type=d3_functor(x);return symbol};symbol.size=function(x){if(!arguments.length)return size;size=d3_functor(x);return symbol};return symbol};function d3_svg_symbolSize(){return 64}function d3_svg_symbolType(){return"circle"}function d3_svg_symbolCircle(size){var r=Math.sqrt(size/π);return"M0,"+r+"A"+r+","+r+" 0 1,1 0,"+-r+"A"+r+","+r+" 0 1,1 0,"+r+"Z"}var d3_svg_symbols=d3.map({circle:d3_svg_symbolCircle,cross:function(size){var r=Math.sqrt(size/5)/2;return"M"+-3*r+","+-r+"H"+-r+"V"+-3*r+"H"+r+"V"+-r+"H"+3*r+"V"+r+"H"+r+"V"+3*r+"H"+-r+"V"+r+"H"+-3*r+"Z"},diamond:function(size){var ry=Math.sqrt(size/(2*d3_svg_symbolTan30)),rx=ry*d3_svg_symbolTan30;return"M0,"+-ry+"L"+rx+",0"+" 0,"+ry+" "+-rx+",0"+"Z"},square:function(size){var r=Math.sqrt(size)/2;return"M"+-r+","+-r+"L"+r+","+-r+" "+r+","+r+" "+-r+","+r+"Z"},"triangle-down":function(size){var rx=Math.sqrt(size/d3_svg_symbolSqrt3),ry=rx*d3_svg_symbolSqrt3/2;return"M0,"+ry+"L"+rx+","+-ry+" "+-rx+","+-ry+"Z"},"triangle-up":function(size){var rx=Math.sqrt(size/d3_svg_symbolSqrt3),ry=rx*d3_svg_symbolSqrt3/2;return"M0,"+-ry+"L"+rx+","+ry+" "+-rx+","+ry+"Z"}});d3.svg.symbolTypes=d3_svg_symbols.keys();var d3_svg_symbolSqrt3=Math.sqrt(3),d3_svg_symbolTan30=Math.tan(30*d3_radians);function d3_Color(){}d3_Color.prototype.toString=function(){return this.rgb()+""};d3.hsl=function(h,s,l){return arguments.length===1?h instanceof d3_Hsl?d3_hsl(h.h,h.s,h.l):d3_rgb_parse(""+h,d3_rgb_hsl,d3_hsl):d3_hsl(+h,+s,+l)};function d3_hsl(h,s,l){return new d3_Hsl(h,s,l)}function d3_Hsl(h,s,l){this.h=h;this.s=s;this.l=l}var d3_hslPrototype=d3_Hsl.prototype=new d3_Color;d3_hslPrototype.brighter=function(k){k=Math.pow(.7,arguments.length?k:1);return d3_hsl(this.h,this.s,this.l/k)};d3_hslPrototype.darker=function(k){k=Math.pow(.7,arguments.length?k:1);return d3_hsl(this.h,this.s,k*this.l)};d3_hslPrototype.rgb=function(){return d3_hsl_rgb(this.h,this.s,this.l)};function d3_hsl_rgb(h,s,l){var m1,m2;h=isNaN(h)?0:(h%=360)<0?h+360:h;s=isNaN(s)?0:s<0?0:s>1?1:s;l=l<0?0:l>1?1:l;m2=l<=.5?l*(1+s):l+s-l*s;m1=2*l-m2;function v(h){if(h>360)h-=360;else if(h<0)h+=360;if(h<60)return m1+(m2-m1)*h/60;if(h<180)return m2;if(h<240)return m1+(m2-m1)*(240-h)/60;return m1}function vv(h){return Math.round(v(h)*255)}return d3_rgb(vv(h+120),vv(h),vv(h-120))}d3.hcl=function(h,c,l){return arguments.length===1?h instanceof d3_Hcl?d3_hcl(h.h,h.c,h.l):h instanceof d3_Lab?d3_lab_hcl(h.l,h.a,h.b):d3_lab_hcl((h=d3_rgb_lab((h=d3.rgb(h)).r,h.g,h.b)).l,h.a,h.b):d3_hcl(+h,+c,+l)};function d3_hcl(h,c,l){return new d3_Hcl(h,c,l)}function d3_Hcl(h,c,l){this.h=h;this.c=c;this.l=l}var d3_hclPrototype=d3_Hcl.prototype=new d3_Color;d3_hclPrototype.brighter=function(k){return d3_hcl(this.h,this.c,Math.min(100,this.l+d3_lab_K*(arguments.length?k:1)))};d3_hclPrototype.darker=function(k){return d3_hcl(this.h,this.c,Math.max(0,this.l-d3_lab_K*(arguments.length?k:1)))};d3_hclPrototype.rgb=function(){return d3_hcl_lab(this.h,this.c,this.l).rgb()};function d3_hcl_lab(h,c,l){if(isNaN(h))h=0;if(isNaN(c))c=0;return d3_lab(l,Math.cos(h*=d3_radians)*c,Math.sin(h)*c)}d3.lab=function(l,a,b){return arguments.length===1?l instanceof d3_Lab?d3_lab(l.l,l.a,l.b):l instanceof d3_Hcl?d3_hcl_lab(l.l,l.c,l.h):d3_rgb_lab((l=d3.rgb(l)).r,l.g,l.b):d3_lab(+l,+a,+b)};function d3_lab(l,a,b){return new d3_Lab(l,a,b)}function d3_Lab(l,a,b){this.l=l;this.a=a;this.b=b}var d3_lab_K=18;var d3_lab_X=.95047,d3_lab_Y=1,d3_lab_Z=1.08883;var d3_labPrototype=d3_Lab.prototype=new d3_Color;d3_labPrototype.brighter=function(k){return d3_lab(Math.min(100,this.l+d3_lab_K*(arguments.length?k:1)),this.a,this.b)};d3_labPrototype.darker=function(k){return d3_lab(Math.max(0,this.l-d3_lab_K*(arguments.length?k:1)),this.a,this.b)};d3_labPrototype.rgb=function(){return d3_lab_rgb(this.l,this.a,this.b)};function d3_lab_rgb(l,a,b){var y=(l+16)/116,x=y+a/500,z=y-b/200;x=d3_lab_xyz(x)*d3_lab_X;y=d3_lab_xyz(y)*d3_lab_Y;z=d3_lab_xyz(z)*d3_lab_Z;return d3_rgb(d3_xyz_rgb(3.2404542*x-1.5371385*y-.4985314*z),d3_xyz_rgb(-.969266*x+1.8760108*y+.041556*z),d3_xyz_rgb(.0556434*x-.2040259*y+1.0572252*z))}function d3_lab_hcl(l,a,b){return l>0?d3_hcl(Math.atan2(b,a)*d3_degrees,Math.sqrt(a*a+b*b),l):d3_hcl(NaN,NaN,l)}function d3_lab_xyz(x){return x>.206893034?x*x*x:(x-4/29)/7.787037}function d3_xyz_lab(x){return x>.008856?Math.pow(x,1/3):7.787037*x+4/29}function d3_xyz_rgb(r){return Math.round(255*(r<=.00304?12.92*r:1.055*Math.pow(r,1/2.4)-.055))}d3.rgb=function(r,g,b){return arguments.length===1?r instanceof d3_Rgb?d3_rgb(r.r,r.g,r.b):d3_rgb_parse(""+r,d3_rgb,d3_hsl_rgb):d3_rgb(~~r,~~g,~~b)};function d3_rgbNumber(value){return d3_rgb(value>>16,value>>8&255,value&255)}function d3_rgbString(value){return d3_rgbNumber(value)+""}function d3_rgb(r,g,b){return new d3_Rgb(r,g,b)}function d3_Rgb(r,g,b){this.r=r;this.g=g;this.b=b}var d3_rgbPrototype=d3_Rgb.prototype=new d3_Color;d3_rgbPrototype.brighter=function(k){k=Math.pow(.7,arguments.length?k:1);var r=this.r,g=this.g,b=this.b,i=30;if(!r&&!g&&!b)return d3_rgb(i,i,i);if(r&&r<i)r=i;if(g&&g<i)g=i;if(b&&b<i)b=i;return d3_rgb(Math.min(255,~~(r/k)),Math.min(255,~~(g/k)),Math.min(255,~~(b/k)))};d3_rgbPrototype.darker=function(k){k=Math.pow(.7,arguments.length?k:1);return d3_rgb(~~(k*this.r),~~(k*this.g),~~(k*this.b))};d3_rgbPrototype.hsl=function(){return d3_rgb_hsl(this.r,this.g,this.b)};d3_rgbPrototype.toString=function(){return"#"+d3_rgb_hex(this.r)+d3_rgb_hex(this.g)+d3_rgb_hex(this.b)};function d3_rgb_hex(v){return v<16?"0"+Math.max(0,v).toString(16):Math.min(255,v).toString(16)}function d3_rgb_parse(format,rgb,hsl){var r=0,g=0,b=0,m1,m2,name;m1=/([a-z]+)\((.*)\)/i.exec(format);if(m1){m2=m1[2].split(",");switch(m1[1]){case"hsl":{return hsl(parseFloat(m2[0]),parseFloat(m2[1])/100,parseFloat(m2[2])/100)}case"rgb":{return rgb(d3_rgb_parseNumber(m2[0]),d3_rgb_parseNumber(m2[1]),d3_rgb_parseNumber(m2[2]))}}}if(name=d3_rgb_names.get(format))return rgb(name.r,name.g,name.b);if(format!=null&&format.charAt(0)==="#"){if(format.length===4){r=format.charAt(1);r+=r;g=format.charAt(2);g+=g;b=format.charAt(3);b+=b}else if(format.length===7){r=format.substring(1,3);g=format.substring(3,5);b=format.substring(5,7)}r=parseInt(r,16);g=parseInt(g,16);b=parseInt(b,16)}return rgb(r,g,b)}function d3_rgb_hsl(r,g,b){var min=Math.min(r/=255,g/=255,b/=255),max=Math.max(r,g,b),d=max-min,h,s,l=(max+min)/2;if(d){s=l<.5?d/(max+min):d/(2-max-min);if(r==max)h=(g-b)/d+(g<b?6:0);else if(g==max)h=(b-r)/d+2;else h=(r-g)/d+4;h*=60}else{h=NaN;s=l>0&&l<1?0:h}return d3_hsl(h,s,l)}function d3_rgb_lab(r,g,b){r=d3_rgb_xyz(r);g=d3_rgb_xyz(g);b=d3_rgb_xyz(b);var x=d3_xyz_lab((.4124564*r+.3575761*g+.1804375*b)/d3_lab_X),y=d3_xyz_lab((.2126729*r+.7151522*g+.072175*b)/d3_lab_Y),z=d3_xyz_lab((.0193339*r+.119192*g+.9503041*b)/d3_lab_Z);return d3_lab(116*y-16,500*(x-y),200*(y-z))}function d3_rgb_xyz(r){return(r/=255)<=.04045?r/12.92:Math.pow((r+.055)/1.055,2.4)}function d3_rgb_parseNumber(c){var f=parseFloat(c);return c.charAt(c.length-1)==="%"?Math.round(f*2.55):f}var d3_rgb_names=d3.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});
d3_rgb_names.forEach(function(key,value){d3_rgb_names.set(key,d3_rgbNumber(value))});d3.interpolateRgb=d3_interpolateRgb;function d3_interpolateRgb(a,b){a=d3.rgb(a);b=d3.rgb(b);var ar=a.r,ag=a.g,ab=a.b,br=b.r-ar,bg=b.g-ag,bb=b.b-ab;return function(t){return"#"+d3_rgb_hex(Math.round(ar+br*t))+d3_rgb_hex(Math.round(ag+bg*t))+d3_rgb_hex(Math.round(ab+bb*t))}}d3.interpolateObject=d3_interpolateObject;function d3_interpolateObject(a,b){var i={},c={},k;for(k in a){if(k in b){i[k]=d3_interpolate(a[k],b[k])}else{c[k]=a[k]}}for(k in b){if(!(k in a)){c[k]=b[k]}}return function(t){for(k in i)c[k]=i[k](t);return c}}d3.interpolateArray=d3_interpolateArray;function d3_interpolateArray(a,b){var x=[],c=[],na=a.length,nb=b.length,n0=Math.min(a.length,b.length),i;for(i=0;i<n0;++i)x.push(d3_interpolate(a[i],b[i]));for(;i<na;++i)c[i]=a[i];for(;i<nb;++i)c[i]=b[i];return function(t){for(i=0;i<n0;++i)c[i]=x[i](t);return c}}d3.interpolateNumber=d3_interpolateNumber;function d3_interpolateNumber(a,b){b-=a=+a;return function(t){return a+b*t}}d3.interpolateString=d3_interpolateString;function d3_interpolateString(a,b){var m,i,j,s0=0,s1=0,s=[],q=[],n,o;a=a+"",b=b+"";d3_interpolate_number.lastIndex=0;for(i=0;m=d3_interpolate_number.exec(b);++i){if(m.index)s.push(b.substring(s0,s1=m.index));q.push({i:s.length,x:m[0]});s.push(null);s0=d3_interpolate_number.lastIndex}if(s0<b.length)s.push(b.substring(s0));for(i=0,n=q.length;(m=d3_interpolate_number.exec(a))&&i<n;++i){o=q[i];if(o.x==m[0]){if(o.i){if(s[o.i+1]==null){s[o.i-1]+=o.x;s.splice(o.i,1);for(j=i+1;j<n;++j)q[j].i--}else{s[o.i-1]+=o.x+s[o.i+1];s.splice(o.i,2);for(j=i+1;j<n;++j)q[j].i-=2}}else{if(s[o.i+1]==null){s[o.i]=o.x}else{s[o.i]=o.x+s[o.i+1];s.splice(o.i+1,1);for(j=i+1;j<n;++j)q[j].i--}}q.splice(i,1);n--;i--}else{o.x=d3_interpolateNumber(parseFloat(m[0]),parseFloat(o.x))}}while(i<n){o=q.pop();if(s[o.i+1]==null){s[o.i]=o.x}else{s[o.i]=o.x+s[o.i+1];s.splice(o.i+1,1)}n--}if(s.length===1){return s[0]==null?(o=q[0].x,function(t){return o(t)+""}):function(){return b}}return function(t){for(i=0;i<n;++i)s[(o=q[i]).i]=o.x(t);return s.join("")}}var d3_interpolate_number=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;d3.interpolate=d3_interpolate;function d3_interpolate(a,b){var i=d3.interpolators.length,f;while(--i>=0&&!(f=d3.interpolators[i](a,b)));return f}d3.interpolators=[function(a,b){var t=typeof b;return(t==="string"?d3_rgb_names.has(b)||/^(#|rgb\(|hsl\()/.test(b)?d3_interpolateRgb:d3_interpolateString:b instanceof d3_Color?d3_interpolateRgb:t==="object"?Array.isArray(b)?d3_interpolateArray:d3_interpolateObject:d3_interpolateNumber)(a,b)}];d3.interpolateRound=d3_interpolateRound;function d3_interpolateRound(a,b){b-=a;return function(t){return Math.round(a+b*t)}}function d3_uninterpolateNumber(a,b){b=b-(a=+a)?1/(b-a):0;return function(x){return(x-a)*b}}function d3_uninterpolateClamp(a,b){b=b-(a=+a)?1/(b-a):0;return function(x){return Math.max(0,Math.min(1,(x-a)*b))}}function d3_format_precision(x,p){return p-(x?Math.ceil(Math.log(x)/Math.LN10):1)}d3.round=function(x,n){return n?Math.round(x*(n=Math.pow(10,n)))/n:Math.round(x)};var d3_formatPrefixes=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(d3_formatPrefix);d3.formatPrefix=function(value,precision){var i=0;if(value){if(value<0)value*=-1;if(precision)value=d3.round(value,d3_format_precision(value,precision));i=1+Math.floor(1e-12+Math.log(value)/Math.LN10);i=Math.max(-24,Math.min(24,Math.floor((i<=0?i+1:i-1)/3)*3))}return d3_formatPrefixes[8+i/3]};function d3_formatPrefix(d,i){var k=Math.pow(10,abs(8-i)*3);return{scale:i>8?function(d){return d/k}:function(d){return d*k},symbol:d}}function d3_locale_numberFormat(locale){var locale_decimal=locale.decimal,locale_thousands=locale.thousands,locale_grouping=locale.grouping,locale_currency=locale.currency,formatGroup=locale_grouping?function(value){var i=value.length,t=[],j=0,g=locale_grouping[0];while(i>0&&g>0){t.push(value.substring(i-=g,i+g));g=locale_grouping[j=(j+1)%locale_grouping.length]}return t.reverse().join(locale_thousands)}:d3_identity;return function(specifier){var match=d3_format_re.exec(specifier),fill=match[1]||" ",align=match[2]||">",sign=match[3]||"",symbol=match[4]||"",zfill=match[5],width=+match[6],comma=match[7],precision=match[8],type=match[9],scale=1,prefix="",suffix="",integer=false;if(precision)precision=+precision.substring(1);if(zfill||fill==="0"&&align==="="){zfill=fill="0";align="=";if(comma)width-=Math.floor((width-1)/4)}switch(type){case"n":comma=true;type="g";break;case"%":scale=100;suffix="%";type="f";break;case"p":scale=100;suffix="%";type="r";break;case"b":case"o":case"x":case"X":if(symbol==="#")prefix="0"+type.toLowerCase();case"c":case"d":integer=true;precision=0;break;case"s":scale=-1;type="r";break}if(symbol==="$")prefix=locale_currency[0],suffix=locale_currency[1];if(type=="r"&&!precision)type="g";if(precision!=null){if(type=="g")precision=Math.max(1,Math.min(21,precision));else if(type=="e"||type=="f")precision=Math.max(0,Math.min(20,precision))}type=d3_format_types.get(type)||d3_format_typeDefault;var zcomma=zfill&&comma;return function(value){if(integer&&value%1)return"";var negative=value<0||value===0&&1/value<0?(value=-value,"-"):sign;if(scale<0){var unit=d3.formatPrefix(value,precision);value=unit.scale(value);suffix=unit.symbol}else{value*=scale}value=type(value,precision);var i=value.lastIndexOf("."),before=i<0?value:value.substring(0,i),after=i<0?"":locale_decimal+value.substring(i+1);if(!zfill&&comma)before=formatGroup(before);var length=prefix.length+before.length+after.length+(zcomma?0:negative.length),padding=length<width?new Array(length=width-length+1).join(fill):"";if(zcomma)before=formatGroup(padding+before);negative+=prefix;value=before+after;return(align==="<"?negative+value+padding:align===">"?padding+negative+value:align==="^"?padding.substring(0,length>>=1)+negative+value+padding.substring(length):negative+(zcomma?value:padding+value))+suffix}}}var d3_format_re=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i;var d3_format_types=d3.map({b:function(x){return x.toString(2)},c:function(x){return String.fromCharCode(x)},o:function(x){return x.toString(8)},x:function(x){return x.toString(16)},X:function(x){return x.toString(16).toUpperCase()},g:function(x,p){return x.toPrecision(p)},e:function(x,p){return x.toExponential(p)},f:function(x,p){return x.toFixed(p)},r:function(x,p){return(x=d3.round(x,d3_format_precision(x,p))).toFixed(Math.max(0,Math.min(20,d3_format_precision(x*(1+1e-15),p))))}});function d3_format_typeDefault(x){return x+""}d3.requote=function(s){return s.replace(d3_requote_re,"\\$&")};var d3_requote_re=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;var d3_time=d3.time={},d3_date=Date;function d3_date_utc(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}d3_date_utc.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){d3_time_prototype.setUTCDate.apply(this._,arguments)},setDay:function(){d3_time_prototype.setUTCDay.apply(this._,arguments)},setFullYear:function(){d3_time_prototype.setUTCFullYear.apply(this._,arguments)},setHours:function(){d3_time_prototype.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){d3_time_prototype.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){d3_time_prototype.setUTCMinutes.apply(this._,arguments)},setMonth:function(){d3_time_prototype.setUTCMonth.apply(this._,arguments)},setSeconds:function(){d3_time_prototype.setUTCSeconds.apply(this._,arguments)},setTime:function(){d3_time_prototype.setTime.apply(this._,arguments)}};var d3_time_prototype=Date.prototype;function d3_time_interval(local,step,number){function round(date){var d0=local(date),d1=offset(d0,1);return date-d0<d1-date?d0:d1}function ceil(date){step(date=local(new d3_date(date-1)),1);return date}function offset(date,k){step(date=new d3_date(+date),k);return date}function range(t0,t1,dt){var time=ceil(t0),times=[];if(dt>1){while(time<t1){if(!(number(time)%dt))times.push(new Date(+time));step(time,1)}}else{while(time<t1)times.push(new Date(+time)),step(time,1)}return times}function range_utc(t0,t1,dt){try{d3_date=d3_date_utc;var utc=new d3_date_utc;utc._=t0;return range(utc,t1,dt)}finally{d3_date=Date}}local.floor=local;local.round=round;local.ceil=ceil;local.offset=offset;local.range=range;var utc=local.utc=d3_time_interval_utc(local);utc.floor=utc;utc.round=d3_time_interval_utc(round);utc.ceil=d3_time_interval_utc(ceil);utc.offset=d3_time_interval_utc(offset);utc.range=range_utc;return local}function d3_time_interval_utc(method){return function(date,k){try{d3_date=d3_date_utc;var utc=new d3_date_utc;utc._=date;return method(utc,k)._}finally{d3_date=Date}}}d3_time.year=d3_time_interval(function(date){date=d3_time.day(date);date.setMonth(0,1);return date},function(date,offset){date.setFullYear(date.getFullYear()+offset)},function(date){return date.getFullYear()});d3_time.years=d3_time.year.range;d3_time.years.utc=d3_time.year.utc.range;d3_time.day=d3_time_interval(function(date){var day=new d3_date(2e3,0);day.setFullYear(date.getFullYear(),date.getMonth(),date.getDate());return day},function(date,offset){date.setDate(date.getDate()+offset)},function(date){return date.getDate()-1});d3_time.days=d3_time.day.range;d3_time.days.utc=d3_time.day.utc.range;d3_time.dayOfYear=function(date){var year=d3_time.year(date);return Math.floor((date-year-(date.getTimezoneOffset()-year.getTimezoneOffset())*6e4)/864e5)};["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(day,i){i=7-i;var interval=d3_time[day]=d3_time_interval(function(date){(date=d3_time.day(date)).setDate(date.getDate()-(date.getDay()+i)%7);return date},function(date,offset){date.setDate(date.getDate()+Math.floor(offset)*7)},function(date){var day=d3_time.year(date).getDay();return Math.floor((d3_time.dayOfYear(date)+(day+i)%7)/7)-(day!==i)});d3_time[day+"s"]=interval.range;d3_time[day+"s"].utc=interval.utc.range;d3_time[day+"OfYear"]=function(date){var day=d3_time.year(date).getDay();return Math.floor((d3_time.dayOfYear(date)+(day+i)%7)/7)}});d3_time.week=d3_time.sunday;d3_time.weeks=d3_time.sunday.range;d3_time.weeks.utc=d3_time.sunday.utc.range;d3_time.weekOfYear=d3_time.sundayOfYear;function d3_locale_timeFormat(locale){var locale_dateTime=locale.dateTime,locale_date=locale.date,locale_time=locale.time,locale_periods=locale.periods,locale_days=locale.days,locale_shortDays=locale.shortDays,locale_months=locale.months,locale_shortMonths=locale.shortMonths;function d3_time_format(template){var n=template.length;function format(date){var string=[],i=-1,j=0,c,p,f;while(++i<n){if(template.charCodeAt(i)===37){string.push(template.substring(j,i));if((p=d3_time_formatPads[c=template.charAt(++i)])!=null)c=template.charAt(++i);if(f=d3_time_formats[c])c=f(date,p==null?c==="e"?" ":"0":p);string.push(c);j=i+1}}string.push(template.substring(j,i));return string.join("")}format.parse=function(string){var d={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null},i=d3_time_parse(d,template,string,0);if(i!=string.length)return null;if("p"in d)d.H=d.H%12+d.p*12;var localZ=d.Z!=null&&d3_date!==d3_date_utc,date=new(localZ?d3_date_utc:d3_date);if("j"in d)date.setFullYear(d.y,0,d.j);else if("w"in d&&("W"in d||"U"in d)){date.setFullYear(d.y,0,1);date.setFullYear(d.y,0,"W"in d?(d.w+6)%7+d.W*7-(date.getDay()+5)%7:d.w+d.U*7-(date.getDay()+6)%7)}else date.setFullYear(d.y,d.m,d.d);date.setHours(d.H+Math.floor(d.Z/100),d.M+d.Z%100,d.S,d.L);return localZ?date._:date};format.toString=function(){return template};return format}function d3_time_parse(date,template,string,j){var c,p,t,i=0,n=template.length,m=string.length;while(i<n){if(j>=m)return-1;c=template.charCodeAt(i++);if(c===37){t=template.charAt(i++);p=d3_time_parsers[t in d3_time_formatPads?template.charAt(i++):t];if(!p||(j=p(date,string,j))<0)return-1}else if(c!=string.charCodeAt(j++)){return-1}}return j}d3_time_format.utc=function(template){var local=d3_time_format(template);function format(date){try{d3_date=d3_date_utc;var utc=new d3_date;utc._=date;return local(utc)}finally{d3_date=Date}}format.parse=function(string){try{d3_date=d3_date_utc;var date=local.parse(string);return date&&date._}finally{d3_date=Date}};format.toString=local.toString;return format};d3_time_format.multi=d3_time_format.utc.multi=d3_time_formatMulti;var d3_time_periodLookup=d3.map(),d3_time_dayRe=d3_time_formatRe(locale_days),d3_time_dayLookup=d3_time_formatLookup(locale_days),d3_time_dayAbbrevRe=d3_time_formatRe(locale_shortDays),d3_time_dayAbbrevLookup=d3_time_formatLookup(locale_shortDays),d3_time_monthRe=d3_time_formatRe(locale_months),d3_time_monthLookup=d3_time_formatLookup(locale_months),d3_time_monthAbbrevRe=d3_time_formatRe(locale_shortMonths),d3_time_monthAbbrevLookup=d3_time_formatLookup(locale_shortMonths);locale_periods.forEach(function(p,i){d3_time_periodLookup.set(p.toLowerCase(),i)});var d3_time_formats={a:function(d){return locale_shortDays[d.getDay()]},A:function(d){return locale_days[d.getDay()]},b:function(d){return locale_shortMonths[d.getMonth()]},B:function(d){return locale_months[d.getMonth()]},c:d3_time_format(locale_dateTime),d:function(d,p){return d3_time_formatPad(d.getDate(),p,2)},e:function(d,p){return d3_time_formatPad(d.getDate(),p,2)},H:function(d,p){return d3_time_formatPad(d.getHours(),p,2)},I:function(d,p){return d3_time_formatPad(d.getHours()%12||12,p,2)},j:function(d,p){return d3_time_formatPad(1+d3_time.dayOfYear(d),p,3)},L:function(d,p){return d3_time_formatPad(d.getMilliseconds(),p,3)},m:function(d,p){return d3_time_formatPad(d.getMonth()+1,p,2)},M:function(d,p){return d3_time_formatPad(d.getMinutes(),p,2)},p:function(d){return locale_periods[+(d.getHours()>=12)]},S:function(d,p){return d3_time_formatPad(d.getSeconds(),p,2)},U:function(d,p){return d3_time_formatPad(d3_time.sundayOfYear(d),p,2)},w:function(d){return d.getDay()},W:function(d,p){return d3_time_formatPad(d3_time.mondayOfYear(d),p,2)},x:d3_time_format(locale_date),X:d3_time_format(locale_time),y:function(d,p){return d3_time_formatPad(d.getFullYear()%100,p,2)},Y:function(d,p){return d3_time_formatPad(d.getFullYear()%1e4,p,4)},Z:d3_time_zone,"%":function(){return"%"}};var d3_time_parsers={a:d3_time_parseWeekdayAbbrev,A:d3_time_parseWeekday,b:d3_time_parseMonthAbbrev,B:d3_time_parseMonth,c:d3_time_parseLocaleFull,d:d3_time_parseDay,e:d3_time_parseDay,H:d3_time_parseHour24,I:d3_time_parseHour24,j:d3_time_parseDayOfYear,L:d3_time_parseMilliseconds,m:d3_time_parseMonthNumber,M:d3_time_parseMinutes,p:d3_time_parseAmPm,S:d3_time_parseSeconds,U:d3_time_parseWeekNumberSunday,w:d3_time_parseWeekdayNumber,W:d3_time_parseWeekNumberMonday,x:d3_time_parseLocaleDate,X:d3_time_parseLocaleTime,y:d3_time_parseYear,Y:d3_time_parseFullYear,Z:d3_time_parseZone,"%":d3_time_parseLiteralPercent};function d3_time_parseWeekdayAbbrev(date,string,i){d3_time_dayAbbrevRe.lastIndex=0;var n=d3_time_dayAbbrevRe.exec(string.substring(i));return n?(date.w=d3_time_dayAbbrevLookup.get(n[0].toLowerCase()),i+n[0].length):-1}function d3_time_parseWeekday(date,string,i){d3_time_dayRe.lastIndex=0;var n=d3_time_dayRe.exec(string.substring(i));return n?(date.w=d3_time_dayLookup.get(n[0].toLowerCase()),i+n[0].length):-1}function d3_time_parseMonthAbbrev(date,string,i){d3_time_monthAbbrevRe.lastIndex=0;var n=d3_time_monthAbbrevRe.exec(string.substring(i));return n?(date.m=d3_time_monthAbbrevLookup.get(n[0].toLowerCase()),i+n[0].length):-1}function d3_time_parseMonth(date,string,i){d3_time_monthRe.lastIndex=0;var n=d3_time_monthRe.exec(string.substring(i));return n?(date.m=d3_time_monthLookup.get(n[0].toLowerCase()),i+n[0].length):-1}function d3_time_parseLocaleFull(date,string,i){return d3_time_parse(date,d3_time_formats.c.toString(),string,i)}function d3_time_parseLocaleDate(date,string,i){return d3_time_parse(date,d3_time_formats.x.toString(),string,i)}function d3_time_parseLocaleTime(date,string,i){return d3_time_parse(date,d3_time_formats.X.toString(),string,i)}function d3_time_parseAmPm(date,string,i){var n=d3_time_periodLookup.get(string.substring(i,i+=2).toLowerCase());return n==null?-1:(date.p=n,i)}return d3_time_format}var d3_time_formatPads={"-":"",_:" ",0:"0"},d3_time_numberRe=/^\s*\d+/,d3_time_percentRe=/^%/;function d3_time_formatPad(value,fill,width){var sign=value<0?"-":"",string=(sign?-value:value)+"",length=string.length;return sign+(length<width?new Array(width-length+1).join(fill)+string:string)}function d3_time_formatRe(names){return new RegExp("^(?:"+names.map(d3.requote).join("|")+")","i")}function d3_time_formatLookup(names){var map=new d3_Map,i=-1,n=names.length;while(++i<n)map.set(names[i].toLowerCase(),i);return map}function d3_time_parseWeekdayNumber(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.substring(i,i+1));return n?(date.w=+n[0],i+n[0].length):-1}function d3_time_parseWeekNumberSunday(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.substring(i));return n?(date.U=+n[0],i+n[0].length):-1}function d3_time_parseWeekNumberMonday(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.substring(i));return n?(date.W=+n[0],i+n[0].length):-1}function d3_time_parseFullYear(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.substring(i,i+4));return n?(date.y=+n[0],i+n[0].length):-1}function d3_time_parseYear(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.substring(i,i+2));return n?(date.y=d3_time_expandYear(+n[0]),i+n[0].length):-1}function d3_time_parseZone(date,string,i){return/^[+-]\d{4}$/.test(string=string.substring(i,i+5))?(date.Z=+string,i+5):-1}function d3_time_expandYear(d){return d+(d>68?1900:2e3)}function d3_time_parseMonthNumber(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.substring(i,i+2));return n?(date.m=n[0]-1,i+n[0].length):-1}function d3_time_parseDay(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.substring(i,i+2));return n?(date.d=+n[0],i+n[0].length):-1}function d3_time_parseDayOfYear(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.substring(i,i+3));return n?(date.j=+n[0],i+n[0].length):-1}function d3_time_parseHour24(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.substring(i,i+2));return n?(date.H=+n[0],i+n[0].length):-1}function d3_time_parseMinutes(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.substring(i,i+2));return n?(date.M=+n[0],i+n[0].length):-1}function d3_time_parseSeconds(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.substring(i,i+2));return n?(date.S=+n[0],i+n[0].length):-1}function d3_time_parseMilliseconds(date,string,i){d3_time_numberRe.lastIndex=0;var n=d3_time_numberRe.exec(string.substring(i,i+3));return n?(date.L=+n[0],i+n[0].length):-1}function d3_time_zone(d){var z=d.getTimezoneOffset(),zs=z>0?"-":"+",zh=~~(abs(z)/60),zm=abs(z)%60;return zs+d3_time_formatPad(zh,"0",2)+d3_time_formatPad(zm,"0",2)}function d3_time_parseLiteralPercent(date,string,i){d3_time_percentRe.lastIndex=0;var n=d3_time_percentRe.exec(string.substring(i,i+1));return n?i+n[0].length:-1}function d3_time_formatMulti(formats){var n=formats.length,i=-1;while(++i<n)formats[i][0]=this(formats[i][0]);return function(date){var i=0,f=formats[i];while(!f[1](date))f=formats[++i];return f[0](date)}}d3.locale=function(locale){return{numberFormat:d3_locale_numberFormat(locale),timeFormat:d3_locale_timeFormat(locale)}};var d3_locale_enUS=d3.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});d3.format=d3_locale_enUS.numberFormat;function d3_scale_bilinear(domain,range,uninterpolate,interpolate){var u=uninterpolate(domain[0],domain[1]),i=interpolate(range[0],range[1]);return function(x){return i(u(x))}}function d3_scale_nice(domain,nice){var i0=0,i1=domain.length-1,x0=domain[i0],x1=domain[i1],dx;if(x1<x0){dx=i0,i0=i1,i1=dx;dx=x0,x0=x1,x1=dx}domain[i0]=nice.floor(x0);domain[i1]=nice.ceil(x1);return domain}function d3_scale_niceStep(step){return step?{floor:function(x){return Math.floor(x/step)*step},ceil:function(x){return Math.ceil(x/step)*step}}:d3_scale_niceIdentity}var d3_scale_niceIdentity={floor:d3_identity,ceil:d3_identity};function d3_scale_polylinear(domain,range,uninterpolate,interpolate){var u=[],i=[],j=0,k=Math.min(domain.length,range.length)-1;if(domain[k]<domain[0]){domain=domain.slice().reverse();range=range.slice().reverse()}while(++j<=k){u.push(uninterpolate(domain[j-1],domain[j]));i.push(interpolate(range[j-1],range[j]))}return function(x){var j=d3.bisect(domain,x,1,k)-1;return i[j](u[j](x))}}d3.scale={};function d3_scaleExtent(domain){var start=domain[0],stop=domain[domain.length-1];return start<stop?[start,stop]:[stop,start]}function d3_scaleRange(scale){return scale.rangeExtent?scale.rangeExtent():d3_scaleExtent(scale.range())}d3.scale.linear=function(){return d3_scale_linear([0,1],[0,1],d3_interpolate,false)};function d3_scale_linear(domain,range,interpolate,clamp){var output,input;function rescale(){var linear=Math.min(domain.length,range.length)>2?d3_scale_polylinear:d3_scale_bilinear,uninterpolate=clamp?d3_uninterpolateClamp:d3_uninterpolateNumber;output=linear(domain,range,uninterpolate,interpolate);input=linear(range,domain,uninterpolate,d3_interpolate);return scale}function scale(x){return output(x)}scale.invert=function(y){return input(y)};scale.domain=function(x){if(!arguments.length)return domain;domain=x.map(Number);return rescale()};scale.range=function(x){if(!arguments.length)return range;range=x;return rescale()};scale.rangeRound=function(x){return scale.range(x).interpolate(d3_interpolateRound)};scale.clamp=function(x){if(!arguments.length)return clamp;clamp=x;return rescale()};scale.interpolate=function(x){if(!arguments.length)return interpolate;interpolate=x;return rescale()};scale.ticks=function(m){return d3_scale_linearTicks(domain,m)};scale.tickFormat=function(m,format){return d3_scale_linearTickFormat(domain,m,format)};scale.nice=function(m){d3_scale_linearNice(domain,m);return rescale()};scale.copy=function(){return d3_scale_linear(domain,range,interpolate,clamp)};return rescale()}function d3_scale_linearRebind(scale,linear){return d3.rebind(scale,linear,"range","rangeRound","interpolate","clamp")}function d3_scale_linearNice(domain,m){return d3_scale_nice(domain,d3_scale_niceStep(d3_scale_linearTickRange(domain,m)[2]))}function d3_scale_linearTickRange(domain,m){if(m==null)m=10;var extent=d3_scaleExtent(domain),span=extent[1]-extent[0],step=Math.pow(10,Math.floor(Math.log(span/m)/Math.LN10)),err=m/span*step;if(err<=.15)step*=10;else if(err<=.35)step*=5;else if(err<=.75)step*=2;extent[0]=Math.ceil(extent[0]/step)*step;extent[1]=Math.floor(extent[1]/step)*step+step*.5;extent[2]=step;return extent}function d3_scale_linearTicks(domain,m){return d3.range.apply(d3,d3_scale_linearTickRange(domain,m))}function d3_scale_linearTickFormat(domain,m,format){var range=d3_scale_linearTickRange(domain,m);return d3.format(format?format.replace(d3_format_re,function(a,b,c,d,e,f,g,h,i,j){return[b,c,d,e,f,g,h,i||"."+d3_scale_linearFormatPrecision(j,range),j].join("")}):",."+d3_scale_linearPrecision(range[2])+"f")}var d3_scale_linearFormatSignificant={s:1,g:1,p:1,r:1,e:1};function d3_scale_linearPrecision(value){return-Math.floor(Math.log(value)/Math.LN10+.01)}function d3_scale_linearFormatPrecision(type,range){var p=d3_scale_linearPrecision(range[2]);return type in d3_scale_linearFormatSignificant?Math.abs(p-d3_scale_linearPrecision(Math.max(Math.abs(range[0]),Math.abs(range[1]))))+ +(type!=="e"):p-(type==="%")*2}var d3_arraySlice=[].slice,d3_array=function(list){return d3_arraySlice.call(list)};var d3_document=document,d3_documentElement=d3_document.documentElement,d3_window=window;try{d3_array(d3_documentElement.childNodes)[0].nodeType}catch(e){d3_array=function(list){var i=list.length,array=new Array(i);while(i--)array[i]=list[i];return array}}var d3_subclass={}.__proto__?function(object,prototype){object.__proto__=prototype}:function(object,prototype){for(var property in prototype)object[property]=prototype[property]};function d3_vendorSymbol(object,name){if(name in object)return name;name=name.charAt(0).toUpperCase()+name.substring(1);for(var i=0,n=d3_vendorPrefixes.length;i<n;++i){var prefixName=d3_vendorPrefixes[i]+name;if(prefixName in object)return prefixName}}var d3_vendorPrefixes=["webkit","ms","moz","Moz","o","O"];function d3_selection(groups){d3_subclass(groups,d3_selectionPrototype);return groups}var d3_select=function(s,n){return n.querySelector(s)},d3_selectAll=function(s,n){return n.querySelectorAll(s)},d3_selectMatcher=d3_documentElement[d3_vendorSymbol(d3_documentElement,"matchesSelector")],d3_selectMatches=function(n,s){return d3_selectMatcher.call(n,s)};if(typeof Sizzle==="function"){d3_select=function(s,n){return Sizzle(s,n)[0]||null};d3_selectAll=function(s,n){return Sizzle.uniqueSort(Sizzle(s,n))};d3_selectMatches=Sizzle.matchesSelector}d3.selection=function(){return d3_selectionRoot};var d3_selectionPrototype=d3.selection.prototype=[];d3_selectionPrototype.select=function(selector){var subgroups=[],subgroup,subnode,group,node;selector=d3_selection_selector(selector);for(var j=-1,m=this.length;++j<m;){subgroups.push(subgroup=[]);subgroup.parentNode=(group=this[j]).parentNode;for(var i=-1,n=group.length;++i<n;){if(node=group[i]){subgroup.push(subnode=selector.call(node,node.__data__,i,j));if(subnode&&"__data__"in node)subnode.__data__=node.__data__}else{subgroup.push(null)}}}return d3_selection(subgroups)};function d3_selection_selector(selector){return typeof selector==="function"?selector:function(){return d3_select(selector,this)}}d3_selectionPrototype.selectAll=function(selector){var subgroups=[],subgroup,node;selector=d3_selection_selectorAll(selector);for(var j=-1,m=this.length;++j<m;){for(var group=this[j],i=-1,n=group.length;++i<n;){if(node=group[i]){subgroups.push(subgroup=d3_array(selector.call(node,node.__data__,i,j)));subgroup.parentNode=node}}}return d3_selection(subgroups)};function d3_selection_selectorAll(selector){return typeof selector==="function"?selector:function(){return d3_selectAll(selector,this)}}d3_selectionPrototype.attr=function(name,value){if(arguments.length<2){if(typeof name==="string"){var node=this.node();name=d3.ns.qualify(name);return name.local?node.getAttributeNS(name.space,name.local):node.getAttribute(name)}for(value in name)this.each(d3_selection_attr(value,name[value]));return this}return this.each(d3_selection_attr(name,value))};function d3_selection_attr(name,value){name=d3.ns.qualify(name);function attrNull(){this.removeAttribute(name)}function attrNullNS(){this.removeAttributeNS(name.space,name.local)}function attrConstant(){this.setAttribute(name,value)}function attrConstantNS(){this.setAttributeNS(name.space,name.local,value)}function attrFunction(){var x=value.apply(this,arguments);if(x==null)this.removeAttribute(name);else this.setAttribute(name,x)}function attrFunctionNS(){var x=value.apply(this,arguments);if(x==null)this.removeAttributeNS(name.space,name.local);else this.setAttributeNS(name.space,name.local,x)}return value==null?name.local?attrNullNS:attrNull:typeof value==="function"?name.local?attrFunctionNS:attrFunction:name.local?attrConstantNS:attrConstant}function d3_collapse(s){return s.trim().replace(/\s+/g," ")}d3_selectionPrototype.classed=function(name,value){if(arguments.length<2){if(typeof name==="string"){var node=this.node(),n=(name=d3_selection_classes(name)).length,i=-1;if(value=node.classList){while(++i<n)if(!value.contains(name[i]))return false}else{value=node.getAttribute("class");while(++i<n)if(!d3_selection_classedRe(name[i]).test(value))return false}return true}for(value in name)this.each(d3_selection_classed(value,name[value]));return this}return this.each(d3_selection_classed(name,value))};function d3_selection_classedRe(name){return new RegExp("(?:^|\\s+)"+d3.requote(name)+"(?:\\s+|$)","g")}function d3_selection_classes(name){return name.trim().split(/^|\s+/)}function d3_selection_classed(name,value){name=d3_selection_classes(name).map(d3_selection_classedName);var n=name.length;function classedConstant(){var i=-1;while(++i<n)name[i](this,value)}function classedFunction(){var i=-1,x=value.apply(this,arguments);while(++i<n)name[i](this,x)}return typeof value==="function"?classedFunction:classedConstant}function d3_selection_classedName(name){var re=d3_selection_classedRe(name);return function(node,value){if(c=node.classList)return value?c.add(name):c.remove(name);var c=node.getAttribute("class")||"";if(value){re.lastIndex=0;if(!re.test(c))node.setAttribute("class",d3_collapse(c+" "+name))}else{node.setAttribute("class",d3_collapse(c.replace(re," ")))}}}d3_selectionPrototype.style=function(name,value,priority){var n=arguments.length;if(n<3){if(typeof name!=="string"){if(n<2)value="";for(priority in name)this.each(d3_selection_style(priority,name[priority],value));return this}if(n<2)return d3_window.getComputedStyle(this.node(),null).getPropertyValue(name);priority=""}return this.each(d3_selection_style(name,value,priority))};function d3_selection_style(name,value,priority){function styleNull(){this.style.removeProperty(name)}function styleConstant(){this.style.setProperty(name,value,priority)}function styleFunction(){var x=value.apply(this,arguments);if(x==null)this.style.removeProperty(name);else this.style.setProperty(name,x,priority)}return value==null?styleNull:typeof value==="function"?styleFunction:styleConstant}d3_selectionPrototype.property=function(name,value){if(arguments.length<2){if(typeof name==="string")return this.node()[name];for(value in name)this.each(d3_selection_property(value,name[value]));return this}return this.each(d3_selection_property(name,value))};function d3_selection_property(name,value){function propertyNull(){delete this[name]}function propertyConstant(){this[name]=value}function propertyFunction(){var x=value.apply(this,arguments);if(x==null)delete this[name];else this[name]=x}return value==null?propertyNull:typeof value==="function"?propertyFunction:propertyConstant}d3_selectionPrototype.text=function(value){return arguments.length?this.each(typeof value==="function"?function(){var v=value.apply(this,arguments);this.textContent=v==null?"":v}:value==null?function(){this.textContent=""}:function(){this.textContent=value}):this.node().textContent};d3_selectionPrototype.html=function(value){return arguments.length?this.each(typeof value==="function"?function(){var v=value.apply(this,arguments);this.innerHTML=v==null?"":v}:value==null?function(){this.innerHTML=""}:function(){this.innerHTML=value}):this.node().innerHTML};d3_selectionPrototype.append=function(name){name=d3_selection_creator(name);return this.select(function(){return this.appendChild(name.apply(this,arguments))})};function d3_selection_creator(name){return typeof name==="function"?name:(name=d3.ns.qualify(name)).local?function(){return this.ownerDocument.createElementNS(name.space,name.local)
}:function(){return this.ownerDocument.createElementNS(this.namespaceURI,name)}}d3_selectionPrototype.insert=function(name,before){name=d3_selection_creator(name);before=d3_selection_selector(before);return this.select(function(){return this.insertBefore(name.apply(this,arguments),before.apply(this,arguments)||null)})};d3_selectionPrototype.remove=function(){return this.each(function(){var parent=this.parentNode;if(parent)parent.removeChild(this)})};d3_selectionPrototype.data=function(value,key){var i=-1,n=this.length,group,node;if(!arguments.length){value=new Array(n=(group=this[0]).length);while(++i<n){if(node=group[i]){value[i]=node.__data__}}return value}function bind(group,groupData){var i,n=group.length,m=groupData.length,n0=Math.min(n,m),updateNodes=new Array(m),enterNodes=new Array(m),exitNodes=new Array(n),node,nodeData;if(key){var nodeByKeyValue=new d3_Map,dataByKeyValue=new d3_Map,keyValues=[],keyValue;for(i=-1;++i<n;){keyValue=key.call(node=group[i],node.__data__,i);if(nodeByKeyValue.has(keyValue)){exitNodes[i]=node}else{nodeByKeyValue.set(keyValue,node)}keyValues.push(keyValue)}for(i=-1;++i<m;){keyValue=key.call(groupData,nodeData=groupData[i],i);if(node=nodeByKeyValue.get(keyValue)){updateNodes[i]=node;node.__data__=nodeData}else if(!dataByKeyValue.has(keyValue)){enterNodes[i]=d3_selection_dataNode(nodeData)}dataByKeyValue.set(keyValue,nodeData);nodeByKeyValue.remove(keyValue)}for(i=-1;++i<n;){if(nodeByKeyValue.has(keyValues[i])){exitNodes[i]=group[i]}}}else{for(i=-1;++i<n0;){node=group[i];nodeData=groupData[i];if(node){node.__data__=nodeData;updateNodes[i]=node}else{enterNodes[i]=d3_selection_dataNode(nodeData)}}for(;i<m;++i){enterNodes[i]=d3_selection_dataNode(groupData[i])}for(;i<n;++i){exitNodes[i]=group[i]}}enterNodes.update=updateNodes;enterNodes.parentNode=updateNodes.parentNode=exitNodes.parentNode=group.parentNode;enter.push(enterNodes);update.push(updateNodes);exit.push(exitNodes)}var enter=d3_selection_enter([]),update=d3_selection([]),exit=d3_selection([]);if(typeof value==="function"){while(++i<n){bind(group=this[i],value.call(group,group.parentNode.__data__,i))}}else{while(++i<n){bind(group=this[i],value)}}update.enter=function(){return enter};update.exit=function(){return exit};return update};function d3_selection_dataNode(data){return{__data__:data}}d3_selectionPrototype.datum=function(value){return arguments.length?this.property("__data__",value):this.property("__data__")};d3_selectionPrototype.filter=function(filter){var subgroups=[],subgroup,group,node;if(typeof filter!=="function")filter=d3_selection_filter(filter);for(var j=0,m=this.length;j<m;j++){subgroups.push(subgroup=[]);subgroup.parentNode=(group=this[j]).parentNode;for(var i=0,n=group.length;i<n;i++){if((node=group[i])&&filter.call(node,node.__data__,i,j)){subgroup.push(node)}}}return d3_selection(subgroups)};function d3_selection_filter(selector){return function(){return d3_selectMatches(this,selector)}}d3_selectionPrototype.order=function(){for(var j=-1,m=this.length;++j<m;){for(var group=this[j],i=group.length-1,next=group[i],node;--i>=0;){if(node=group[i]){if(next&&next!==node.nextSibling)next.parentNode.insertBefore(node,next);next=node}}}return this};d3_selectionPrototype.sort=function(comparator){comparator=d3_selection_sortComparator.apply(this,arguments);for(var j=-1,m=this.length;++j<m;)this[j].sort(comparator);return this.order()};function d3_selection_sortComparator(comparator){if(!arguments.length)comparator=d3.ascending;return function(a,b){return a&&b?comparator(a.__data__,b.__data__):!a-!b}}function d3_noop(){}d3.dispatch=function(){var dispatch=new d3_dispatch,i=-1,n=arguments.length;while(++i<n)dispatch[arguments[i]]=d3_dispatch_event(dispatch);return dispatch};function d3_dispatch(){}d3_dispatch.prototype.on=function(type,listener){var i=type.indexOf("."),name="";if(i>=0){name=type.substring(i+1);type=type.substring(0,i)}if(type)return arguments.length<2?this[type].on(name):this[type].on(name,listener);if(arguments.length===2){if(listener==null)for(type in this){if(this.hasOwnProperty(type))this[type].on(name,null)}return this}};function d3_dispatch_event(dispatch){var listeners=[],listenerByName=new d3_Map;function event(){var z=listeners,i=-1,n=z.length,l;while(++i<n)if(l=z[i].on)l.apply(this,arguments);return dispatch}event.on=function(name,listener){var l=listenerByName.get(name),i;if(arguments.length<2)return l&&l.on;if(l){l.on=null;listeners=listeners.slice(0,i=listeners.indexOf(l)).concat(listeners.slice(i+1));listenerByName.remove(name)}if(listener)listeners.push(listenerByName.set(name,{on:listener}));return dispatch};return event}d3.event=null;function d3_eventPreventDefault(){d3.event.preventDefault()}function d3_eventSource(){var e=d3.event,s;while(s=e.sourceEvent)e=s;return e}function d3_eventDispatch(target){var dispatch=new d3_dispatch,i=0,n=arguments.length;while(++i<n)dispatch[arguments[i]]=d3_dispatch_event(dispatch);dispatch.of=function(thiz,argumentz){return function(e1){try{var e0=e1.sourceEvent=d3.event;e1.target=target;d3.event=e1;dispatch[e1.type].apply(thiz,argumentz)}finally{d3.event=e0}}};return dispatch}d3_selectionPrototype.on=function(type,listener,capture){var n=arguments.length;if(n<3){if(typeof type!=="string"){if(n<2)listener=false;for(capture in type)this.each(d3_selection_on(capture,type[capture],listener));return this}if(n<2)return(n=this.node()["__on"+type])&&n._;capture=false}return this.each(d3_selection_on(type,listener,capture))};function d3_selection_on(type,listener,capture){var name="__on"+type,i=type.indexOf("."),wrap=d3_selection_onListener;if(i>0)type=type.substring(0,i);var filter=d3_selection_onFilters.get(type);if(filter)type=filter,wrap=d3_selection_onFilter;function onRemove(){var l=this[name];if(l){this.removeEventListener(type,l,l.$);delete this[name]}}function onAdd(){var l=wrap(listener,d3_array(arguments));onRemove.call(this);this.addEventListener(type,this[name]=l,l.$=capture);l._=listener}function removeAll(){var re=new RegExp("^__on([^.]+)"+d3.requote(type)+"$"),match;for(var name in this){if(match=name.match(re)){var l=this[name];this.removeEventListener(match[1],l,l.$);delete this[name]}}}return i?listener?onAdd:onRemove:listener?d3_noop:removeAll}var d3_selection_onFilters=d3.map({mouseenter:"mouseover",mouseleave:"mouseout"});d3_selection_onFilters.forEach(function(k){if("on"+k in d3_document)d3_selection_onFilters.remove(k)});function d3_selection_onListener(listener,argumentz){return function(e){var o=d3.event;d3.event=e;argumentz[0]=this.__data__;try{listener.apply(this,argumentz)}finally{d3.event=o}}}function d3_selection_onFilter(listener,argumentz){var l=d3_selection_onListener(listener,argumentz);return function(e){var target=this,related=e.relatedTarget;if(!related||related!==target&&!(related.compareDocumentPosition(target)&8)){l.call(target,e)}}}d3_selectionPrototype.each=function(callback){return d3_selection_each(this,function(node,i,j){callback.call(node,node.__data__,i,j)})};function d3_selection_each(groups,callback){for(var j=0,m=groups.length;j<m;j++){for(var group=groups[j],i=0,n=group.length,node;i<n;i++){if(node=group[i])callback(node,i,j)}}return groups}d3_selectionPrototype.call=function(callback){var args=d3_array(arguments);callback.apply(args[0]=this,args);return this};d3_selectionPrototype.empty=function(){return!this.node()};d3_selectionPrototype.node=function(){for(var j=0,m=this.length;j<m;j++){for(var group=this[j],i=0,n=group.length;i<n;i++){var node=group[i];if(node)return node}}return null};d3_selectionPrototype.size=function(){var n=0;this.each(function(){++n});return n};function d3_selection_enter(selection){d3_subclass(selection,d3_selection_enterPrototype);return selection}var d3_selection_enterPrototype=[];d3.selection.enter=d3_selection_enter;d3.selection.enter.prototype=d3_selection_enterPrototype;d3_selection_enterPrototype.append=d3_selectionPrototype.append;d3_selection_enterPrototype.empty=d3_selectionPrototype.empty;d3_selection_enterPrototype.node=d3_selectionPrototype.node;d3_selection_enterPrototype.call=d3_selectionPrototype.call;d3_selection_enterPrototype.size=d3_selectionPrototype.size;d3_selection_enterPrototype.select=function(selector){var subgroups=[],subgroup,subnode,upgroup,group,node;for(var j=-1,m=this.length;++j<m;){upgroup=(group=this[j]).update;subgroups.push(subgroup=[]);subgroup.parentNode=group.parentNode;for(var i=-1,n=group.length;++i<n;){if(node=group[i]){subgroup.push(upgroup[i]=subnode=selector.call(group.parentNode,node.__data__,i,j));subnode.__data__=node.__data__}else{subgroup.push(null)}}}return d3_selection(subgroups)};d3_selection_enterPrototype.insert=function(name,before){if(arguments.length<2)before=d3_selection_enterInsertBefore(this);return d3_selectionPrototype.insert.call(this,name,before)};function d3_selection_enterInsertBefore(enter){var i0,j0;return function(d,i,j){var group=enter[j].update,n=group.length,node;if(j!=j0)j0=j,i0=0;if(i>=i0)i0=i+1;while(!(node=group[i0])&&++i0<n);return node}}d3_selectionPrototype.transition=function(){var id=d3_transitionInheritId||++d3_transitionId,subgroups=[],subgroup,node,transition=d3_transitionInherit||{time:Date.now(),ease:d3_ease_cubicInOut,delay:0,duration:250};for(var j=-1,m=this.length;++j<m;){subgroups.push(subgroup=[]);for(var group=this[j],i=-1,n=group.length;++i<n;){if(node=group[i])d3_transitionNode(node,i,id,transition);subgroup.push(node)}}return d3_transition(subgroups,id)};d3_selectionPrototype.interrupt=function(){return this.each(d3_selection_interrupt)};function d3_selection_interrupt(){var lock=this.__transition__;if(lock)++lock.active}d3.select=function(node){var group=[typeof node==="string"?d3_select(node,d3_document):node];group.parentNode=d3_documentElement;return d3_selection([group])};d3.selectAll=function(nodes){var group=d3_array(typeof nodes==="string"?d3_selectAll(nodes,d3_document):nodes);group.parentNode=d3_documentElement;return d3_selection([group])};var d3_selectionRoot=d3.select(d3_documentElement);var d3_timer_queueHead,d3_timer_queueTail,d3_timer_interval,d3_timer_timeout,d3_timer_active,d3_timer_frame=d3_window[d3_vendorSymbol(d3_window,"requestAnimationFrame")]||function(callback){setTimeout(callback,17)};d3.timer=function(callback,delay,then){var n=arguments.length;if(n<2)delay=0;if(n<3)then=Date.now();var time=then+delay,timer={c:callback,t:time,f:false,n:null};if(d3_timer_queueTail)d3_timer_queueTail.n=timer;else d3_timer_queueHead=timer;d3_timer_queueTail=timer;if(!d3_timer_interval){d3_timer_timeout=clearTimeout(d3_timer_timeout);d3_timer_interval=1;d3_timer_frame(d3_timer_step)}};function d3_timer_step(){var now=d3_timer_mark(),delay=d3_timer_sweep()-now;if(delay>24){if(isFinite(delay)){clearTimeout(d3_timer_timeout);d3_timer_timeout=setTimeout(d3_timer_step,delay)}d3_timer_interval=0}else{d3_timer_interval=1;d3_timer_frame(d3_timer_step)}}d3.timer.flush=function(){d3_timer_mark();d3_timer_sweep()};function d3_timer_mark(){var now=Date.now();d3_timer_active=d3_timer_queueHead;while(d3_timer_active){if(now>=d3_timer_active.t)d3_timer_active.f=d3_timer_active.c(now-d3_timer_active.t);d3_timer_active=d3_timer_active.n}return now}function d3_timer_sweep(){var t0,t1=d3_timer_queueHead,time=Infinity;while(t1){if(t1.f){t1=t0?t0.n=t1.n:d3_timer_queueHead=t1.n}else{if(t1.t<time)time=t1.t;t1=(t0=t1).n}}d3_timer_queueTail=t0;return time}var d3_ease_default=function(){return d3_identity};var d3_ease=d3.map({linear:d3_ease_default,poly:d3_ease_poly,quad:function(){return d3_ease_quad},cubic:function(){return d3_ease_cubic},sin:function(){return d3_ease_sin},exp:function(){return d3_ease_exp},circle:function(){return d3_ease_circle},elastic:d3_ease_elastic,back:d3_ease_back,bounce:function(){return d3_ease_bounce}});var d3_ease_mode=d3.map({"in":d3_identity,out:d3_ease_reverse,"in-out":d3_ease_reflect,"out-in":function(f){return d3_ease_reflect(d3_ease_reverse(f))}});d3.ease=function(name){var i=name.indexOf("-"),t=i>=0?name.substring(0,i):name,m=i>=0?name.substring(i+1):"in";t=d3_ease.get(t)||d3_ease_default;m=d3_ease_mode.get(m)||d3_identity;return d3_ease_clamp(m(t.apply(null,d3_arraySlice.call(arguments,1))))};function d3_ease_clamp(f){return function(t){return t<=0?0:t>=1?1:f(t)}}function d3_ease_reverse(f){return function(t){return 1-f(1-t)}}function d3_ease_reflect(f){return function(t){return.5*(t<.5?f(2*t):2-f(2-2*t))}}function d3_ease_quad(t){return t*t}function d3_ease_cubic(t){return t*t*t}function d3_ease_cubicInOut(t){if(t<=0)return 0;if(t>=1)return 1;var t2=t*t,t3=t2*t;return 4*(t<.5?t3:3*(t-t2)+t3-.75)}function d3_ease_poly(e){return function(t){return Math.pow(t,e)}}function d3_ease_sin(t){return 1-Math.cos(t*halfπ)}function d3_ease_exp(t){return Math.pow(2,10*(t-1))}function d3_ease_circle(t){return 1-Math.sqrt(1-t*t)}function d3_ease_elastic(a,p){var s;if(arguments.length<2)p=.45;if(arguments.length)s=p/τ*Math.asin(1/a);else a=1,s=p/4;return function(t){return 1+a*Math.pow(2,-10*t)*Math.sin((t-s)*τ/p)}}function d3_ease_back(s){if(!s)s=1.70158;return function(t){return t*t*((s+1)*t-s)}}function d3_ease_bounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}function d3_transition(groups,id){d3_subclass(groups,d3_transitionPrototype);groups.id=id;return groups}var d3_transitionPrototype=[],d3_transitionId=0,d3_transitionInheritId,d3_transitionInherit;d3_transitionPrototype.call=d3_selectionPrototype.call;d3_transitionPrototype.empty=d3_selectionPrototype.empty;d3_transitionPrototype.node=d3_selectionPrototype.node;d3_transitionPrototype.size=d3_selectionPrototype.size;d3.transition=function(selection){return arguments.length?d3_transitionInheritId?selection.transition():selection:d3_selectionRoot.transition()};d3.transition.prototype=d3_transitionPrototype;d3_transitionPrototype.select=function(selector){var id=this.id,subgroups=[],subgroup,subnode,node;selector=d3_selection_selector(selector);for(var j=-1,m=this.length;++j<m;){subgroups.push(subgroup=[]);for(var group=this[j],i=-1,n=group.length;++i<n;){if((node=group[i])&&(subnode=selector.call(node,node.__data__,i,j))){if("__data__"in node)subnode.__data__=node.__data__;d3_transitionNode(subnode,i,id,node.__transition__[id]);subgroup.push(subnode)}else{subgroup.push(null)}}}return d3_transition(subgroups,id)};d3_transitionPrototype.selectAll=function(selector){var id=this.id,subgroups=[],subgroup,subnodes,node,subnode,transition;selector=d3_selection_selectorAll(selector);for(var j=-1,m=this.length;++j<m;){for(var group=this[j],i=-1,n=group.length;++i<n;){if(node=group[i]){transition=node.__transition__[id];subnodes=selector.call(node,node.__data__,i,j);subgroups.push(subgroup=[]);for(var k=-1,o=subnodes.length;++k<o;){if(subnode=subnodes[k])d3_transitionNode(subnode,k,id,transition);subgroup.push(subnode)}}}}return d3_transition(subgroups,id)};d3_transitionPrototype.filter=function(filter){var subgroups=[],subgroup,group,node;if(typeof filter!=="function")filter=d3_selection_filter(filter);for(var j=0,m=this.length;j<m;j++){subgroups.push(subgroup=[]);for(var group=this[j],i=0,n=group.length;i<n;i++){if((node=group[i])&&filter.call(node,node.__data__,i,j)){subgroup.push(node)}}}return d3_transition(subgroups,this.id)};d3.transform=function(string){var g=d3_document.createElementNS(d3.ns.prefix.svg,"g");return(d3.transform=function(string){if(string!=null){g.setAttribute("transform",string);var t=g.transform.baseVal.consolidate()}return new d3_transform(t?t.matrix:d3_transformIdentity)})(string)};function d3_transform(m){var r0=[m.a,m.b],r1=[m.c,m.d],kx=d3_transformNormalize(r0),kz=d3_transformDot(r0,r1),ky=d3_transformNormalize(d3_transformCombine(r1,r0,-kz))||0;if(r0[0]*r1[1]<r1[0]*r0[1]){r0[0]*=-1;r0[1]*=-1;kx*=-1;kz*=-1}this.rotate=(kx?Math.atan2(r0[1],r0[0]):Math.atan2(-r1[0],r1[1]))*d3_degrees;this.translate=[m.e,m.f];this.scale=[kx,ky];this.skew=ky?Math.atan2(kz,ky)*d3_degrees:0}d3_transform.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};function d3_transformDot(a,b){return a[0]*b[0]+a[1]*b[1]}function d3_transformNormalize(a){var k=Math.sqrt(d3_transformDot(a,a));if(k){a[0]/=k;a[1]/=k}return k}function d3_transformCombine(a,b,k){a[0]+=k*b[0];a[1]+=k*b[1];return a}var d3_transformIdentity={a:1,b:0,c:0,d:1,e:0,f:0};d3.interpolateTransform=d3_interpolateTransform;function d3_interpolateTransform(a,b){var s=[],q=[],n,A=d3.transform(a),B=d3.transform(b),ta=A.translate,tb=B.translate,ra=A.rotate,rb=B.rotate,wa=A.skew,wb=B.skew,ka=A.scale,kb=B.scale;if(ta[0]!=tb[0]||ta[1]!=tb[1]){s.push("translate(",null,",",null,")");q.push({i:1,x:d3_interpolateNumber(ta[0],tb[0])},{i:3,x:d3_interpolateNumber(ta[1],tb[1])})}else if(tb[0]||tb[1]){s.push("translate("+tb+")")}else{s.push("")}if(ra!=rb){if(ra-rb>180)rb+=360;else if(rb-ra>180)ra+=360;q.push({i:s.push(s.pop()+"rotate(",null,")")-2,x:d3_interpolateNumber(ra,rb)})}else if(rb){s.push(s.pop()+"rotate("+rb+")")}if(wa!=wb){q.push({i:s.push(s.pop()+"skewX(",null,")")-2,x:d3_interpolateNumber(wa,wb)})}else if(wb){s.push(s.pop()+"skewX("+wb+")")}if(ka[0]!=kb[0]||ka[1]!=kb[1]){n=s.push(s.pop()+"scale(",null,",",null,")");q.push({i:n-4,x:d3_interpolateNumber(ka[0],kb[0])},{i:n-2,x:d3_interpolateNumber(ka[1],kb[1])})}else if(kb[0]!=1||kb[1]!=1){s.push(s.pop()+"scale("+kb+")")}n=q.length;return function(t){var i=-1,o;while(++i<n)s[(o=q[i]).i]=o.x(t);return s.join("")}}d3_transitionPrototype.tween=function(name,tween){var id=this.id;if(arguments.length<2)return this.node().__transition__[id].tween.get(name);return d3_selection_each(this,tween==null?function(node){node.__transition__[id].tween.remove(name)}:function(node){node.__transition__[id].tween.set(name,tween)})};function d3_transition_tween(groups,name,value,tween){var id=groups.id;return d3_selection_each(groups,typeof value==="function"?function(node,i,j){node.__transition__[id].tween.set(name,tween(value.call(node,node.__data__,i,j)))}:(value=tween(value),function(node){node.__transition__[id].tween.set(name,value)}))}d3_transitionPrototype.attr=function(nameNS,value){if(arguments.length<2){for(value in nameNS)this.attr(value,nameNS[value]);return this}var interpolate=nameNS=="transform"?d3_interpolateTransform:d3_interpolate,name=d3.ns.qualify(nameNS);function attrNull(){this.removeAttribute(name)}function attrNullNS(){this.removeAttributeNS(name.space,name.local)}function attrTween(b){return b==null?attrNull:(b+="",function(){var a=this.getAttribute(name),i;return a!==b&&(i=interpolate(a,b),function(t){this.setAttribute(name,i(t))})})}function attrTweenNS(b){return b==null?attrNullNS:(b+="",function(){var a=this.getAttributeNS(name.space,name.local),i;return a!==b&&(i=interpolate(a,b),function(t){this.setAttributeNS(name.space,name.local,i(t))})})}return d3_transition_tween(this,"attr."+nameNS,value,name.local?attrTweenNS:attrTween)};d3_transitionPrototype.attrTween=function(nameNS,tween){var name=d3.ns.qualify(nameNS);function attrTween(d,i){var f=tween.call(this,d,i,this.getAttribute(name));return f&&function(t){this.setAttribute(name,f(t))}}function attrTweenNS(d,i){var f=tween.call(this,d,i,this.getAttributeNS(name.space,name.local));return f&&function(t){this.setAttributeNS(name.space,name.local,f(t))}}return this.tween("attr."+nameNS,name.local?attrTweenNS:attrTween)};d3_transitionPrototype.style=function(name,value,priority){var n=arguments.length;if(n<3){if(typeof name!=="string"){if(n<2)value="";for(priority in name)this.style(priority,name[priority],value);return this}priority=""}function styleNull(){this.style.removeProperty(name)}function styleString(b){return b==null?styleNull:(b+="",function(){var a=d3_window.getComputedStyle(this,null).getPropertyValue(name),i;return a!==b&&(i=d3_interpolate(a,b),function(t){this.style.setProperty(name,i(t),priority)})})}return d3_transition_tween(this,"style."+name,value,styleString)};d3_transitionPrototype.styleTween=function(name,tween,priority){if(arguments.length<3)priority="";function styleTween(d,i){var f=tween.call(this,d,i,d3_window.getComputedStyle(this,null).getPropertyValue(name));return f&&function(t){this.style.setProperty(name,f(t),priority)}}return this.tween("style."+name,styleTween)};d3_transitionPrototype.text=function(value){return d3_transition_tween(this,"text",value,d3_transition_text)};function d3_transition_text(b){if(b==null)b="";return function(){this.textContent=b}}d3_transitionPrototype.remove=function(){return this.each("end.transition",function(){var p;if(this.__transition__.count<2&&(p=this.parentNode))p.removeChild(this)})};d3_transitionPrototype.ease=function(value){var id=this.id;if(arguments.length<1)return this.node().__transition__[id].ease;if(typeof value!=="function")value=d3.ease.apply(d3,arguments);return d3_selection_each(this,function(node){node.__transition__[id].ease=value})};d3_transitionPrototype.delay=function(value){var id=this.id;return d3_selection_each(this,typeof value==="function"?function(node,i,j){node.__transition__[id].delay=+value.call(node,node.__data__,i,j)}:(value=+value,function(node){node.__transition__[id].delay=value}))};d3_transitionPrototype.duration=function(value){var id=this.id;return d3_selection_each(this,typeof value==="function"?function(node,i,j){node.__transition__[id].duration=Math.max(1,value.call(node,node.__data__,i,j))}:(value=Math.max(1,value),function(node){node.__transition__[id].duration=value}))};d3_transitionPrototype.each=function(type,listener){var id=this.id;if(arguments.length<2){var inherit=d3_transitionInherit,inheritId=d3_transitionInheritId;d3_transitionInheritId=id;d3_selection_each(this,function(node,i,j){d3_transitionInherit=node.__transition__[id];type.call(node,node.__data__,i,j)});d3_transitionInherit=inherit;d3_transitionInheritId=inheritId}else{d3_selection_each(this,function(node){var transition=node.__transition__[id];(transition.event||(transition.event=d3.dispatch("start","end"))).on(type,listener)})}return this};d3_transitionPrototype.transition=function(){var id0=this.id,id1=++d3_transitionId,subgroups=[],subgroup,group,node,transition;for(var j=0,m=this.length;j<m;j++){subgroups.push(subgroup=[]);for(var group=this[j],i=0,n=group.length;i<n;i++){if(node=group[i]){transition=Object.create(node.__transition__[id0]);transition.delay+=transition.duration;d3_transitionNode(node,i,id1,transition)}subgroup.push(node)}}return d3_transition(subgroups,id1)};function d3_transitionNode(node,i,id,inherit){var lock=node.__transition__||(node.__transition__={active:0,count:0}),transition=lock[id];if(!transition){var time=inherit.time;transition=lock[id]={tween:new d3_Map,time:time,ease:inherit.ease,delay:inherit.delay,duration:inherit.duration};++lock.count;d3.timer(function(elapsed){var d=node.__data__,ease=transition.ease,delay=transition.delay,duration=transition.duration,timer=d3_timer_active,tweened=[];timer.t=delay+time;if(delay<=elapsed)return start(elapsed-delay);timer.c=start;function start(elapsed){if(lock.active>id)return stop();lock.active=id;transition.event&&transition.event.start.call(node,d,i);transition.tween.forEach(function(key,value){if(value=value.call(node,d,i)){tweened.push(value)}});d3.timer(function(){timer.c=tick(elapsed||1)?d3_true:tick;return 1},0,time)}function tick(elapsed){if(lock.active!==id)return stop();var t=elapsed/duration,e=ease(t),n=tweened.length;while(n>0){tweened[--n].call(node,e)}if(t>=1){transition.event&&transition.event.end.call(node,d,i);return stop()}}function stop(){if(--lock.count)delete lock[id];else delete node.__transition__;return 1}},0,time)}}d3.svg.axis=function(){var scale=d3.scale.linear(),orient=d3_svg_axisDefaultOrient,innerTickSize=6,outerTickSize=6,tickPadding=3,tickArguments_=[10],tickValues=null,tickFormat_;function axis(g){g.each(function(){var g=d3.select(this);var scale0=this.__chart__||scale,scale1=this.__chart__=scale.copy();var ticks=tickValues==null?scale1.ticks?scale1.ticks.apply(scale1,tickArguments_):scale1.domain():tickValues,tickFormat=tickFormat_==null?scale1.tickFormat?scale1.tickFormat.apply(scale1,tickArguments_):d3_identity:tickFormat_,tick=g.selectAll(".tick").data(ticks,scale1),tickEnter=tick.enter().insert("g",".domain").attr("class","tick").style("opacity",ε),tickExit=d3.transition(tick.exit()).style("opacity",ε).remove(),tickUpdate=d3.transition(tick).style("opacity",1),tickTransform;var range=d3_scaleRange(scale1),path=g.selectAll(".domain").data([0]),pathUpdate=(path.enter().append("path").attr("class","domain"),d3.transition(path));tickEnter.append("line");tickEnter.append("text");var lineEnter=tickEnter.select("line"),lineUpdate=tickUpdate.select("line"),text=tick.select("text").text(tickFormat),textEnter=tickEnter.select("text"),textUpdate=tickUpdate.select("text");switch(orient){case"bottom":{tickTransform=d3_svg_axisX;lineEnter.attr("y2",innerTickSize);textEnter.attr("y",Math.max(innerTickSize,0)+tickPadding);lineUpdate.attr("x2",0).attr("y2",innerTickSize);textUpdate.attr("x",0).attr("y",Math.max(innerTickSize,0)+tickPadding);text.attr("dy",".71em").style("text-anchor","middle");pathUpdate.attr("d","M"+range[0]+","+outerTickSize+"V0H"+range[1]+"V"+outerTickSize);break}case"top":{tickTransform=d3_svg_axisX;lineEnter.attr("y2",-innerTickSize);textEnter.attr("y",-(Math.max(innerTickSize,0)+tickPadding));lineUpdate.attr("x2",0).attr("y2",-innerTickSize);textUpdate.attr("x",0).attr("y",-(Math.max(innerTickSize,0)+tickPadding));text.attr("dy","0em").style("text-anchor","middle");pathUpdate.attr("d","M"+range[0]+","+-outerTickSize+"V0H"+range[1]+"V"+-outerTickSize);break}case"left":{tickTransform=d3_svg_axisY;lineEnter.attr("x2",-innerTickSize);textEnter.attr("x",-(Math.max(innerTickSize,0)+tickPadding));lineUpdate.attr("x2",-innerTickSize).attr("y2",0);textUpdate.attr("x",-(Math.max(innerTickSize,0)+tickPadding)).attr("y",0);text.attr("dy",".32em").style("text-anchor","end");pathUpdate.attr("d","M"+-outerTickSize+","+range[0]+"H0V"+range[1]+"H"+-outerTickSize);break}case"right":{tickTransform=d3_svg_axisY;lineEnter.attr("x2",innerTickSize);textEnter.attr("x",Math.max(innerTickSize,0)+tickPadding);lineUpdate.attr("x2",innerTickSize).attr("y2",0);textUpdate.attr("x",Math.max(innerTickSize,0)+tickPadding).attr("y",0);text.attr("dy",".32em").style("text-anchor","start");pathUpdate.attr("d","M"+outerTickSize+","+range[0]+"H0V"+range[1]+"H"+outerTickSize);break}}if(scale1.rangeBand){var x=scale1,dx=x.rangeBand()/2;scale0=scale1=function(d){return x(d)+dx}}else if(scale0.rangeBand){scale0=scale1}else{tickExit.call(tickTransform,scale1)}tickEnter.call(tickTransform,scale0);tickUpdate.call(tickTransform,scale1)})}axis.scale=function(x){if(!arguments.length)return scale;scale=x;return axis};axis.orient=function(x){if(!arguments.length)return orient;orient=x in d3_svg_axisOrients?x+"":d3_svg_axisDefaultOrient;return axis};axis.ticks=function(){if(!arguments.length)return tickArguments_;tickArguments_=arguments;return axis};axis.tickValues=function(x){if(!arguments.length)return tickValues;tickValues=x;return axis};axis.tickFormat=function(x){if(!arguments.length)return tickFormat_;tickFormat_=x;return axis};axis.tickSize=function(x){var n=arguments.length;if(!n)return innerTickSize;innerTickSize=+x;outerTickSize=+arguments[n-1];return axis};axis.innerTickSize=function(x){if(!arguments.length)return innerTickSize;innerTickSize=+x;return axis};axis.outerTickSize=function(x){if(!arguments.length)return outerTickSize;outerTickSize=+x;return axis};axis.tickPadding=function(x){if(!arguments.length)return tickPadding;tickPadding=+x;return axis};axis.tickSubdivide=function(){return arguments.length&&axis};return axis};var d3_svg_axisDefaultOrient="bottom",d3_svg_axisOrients={top:1,right:1,bottom:1,left:1};function d3_svg_axisX(selection,x){selection.attr("transform",function(d){return"translate("+x(d)+",0)"})}function d3_svg_axisY(selection,y){selection.attr("transform",function(d){return"translate(0,"+y(d)+")"})}var d3_event_dragSelect="onselectstart"in d3_document?null:d3_vendorSymbol(d3_documentElement.style,"userSelect"),d3_event_dragId=0;function d3_event_dragSuppress(){var name=".dragsuppress-"+ ++d3_event_dragId,click="click"+name,w=d3.select(d3_window).on("touchmove"+name,d3_eventPreventDefault).on("dragstart"+name,d3_eventPreventDefault).on("selectstart"+name,d3_eventPreventDefault);if(d3_event_dragSelect){var style=d3_documentElement.style,select=style[d3_event_dragSelect];style[d3_event_dragSelect]="none"}return function(suppressClick){w.on(name,null);if(d3_event_dragSelect)style[d3_event_dragSelect]=select;if(suppressClick){function off(){w.on(click,null)}w.on(click,function(){d3_eventPreventDefault();off()},true);setTimeout(off,0)}}}d3.mouse=function(container){return d3_mousePoint(container,d3_eventSource())};var d3_mouse_bug44083=/WebKit/.test(d3_window.navigator.userAgent)?-1:0;function d3_mousePoint(container,e){if(e.changedTouches)e=e.changedTouches[0];var svg=container.ownerSVGElement||container;if(svg.createSVGPoint){var point=svg.createSVGPoint();if(d3_mouse_bug44083<0&&(d3_window.scrollX||d3_window.scrollY)){svg=d3.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important");var ctm=svg[0][0].getScreenCTM();d3_mouse_bug44083=!(ctm.f||ctm.e);svg.remove()}if(d3_mouse_bug44083)point.x=e.pageX,point.y=e.pageY;else point.x=e.clientX,point.y=e.clientY;point=point.matrixTransform(container.getScreenCTM().inverse());return[point.x,point.y]}var rect=container.getBoundingClientRect();return[e.clientX-rect.left-container.clientLeft,e.clientY-rect.top-container.clientTop]}d3.touches=function(container,touches){if(arguments.length<2)touches=d3_eventSource().touches;return touches?d3_array(touches).map(function(touch){var point=d3_mousePoint(container,touch);point.identifier=touch.identifier;return point}):[]};d3.svg.brush=function(){var event=d3_eventDispatch(brush,"brushstart","brush","brushend"),x=null,y=null,xExtent=[0,0],yExtent=[0,0],xExtentDomain,yExtentDomain,xClamp=true,yClamp=true,resizes=d3_svg_brushResizes[0];function brush(g){g.each(function(){var g=d3.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",brushstart).on("touchstart.brush",brushstart);var background=g.selectAll(".background").data([0]);background.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair");g.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var resize=g.selectAll(".resize").data(resizes,d3_identity);resize.exit().remove();resize.enter().append("g").attr("class",function(d){return"resize "+d}).style("cursor",function(d){return d3_svg_brushCursor[d]}).append("rect").attr("x",function(d){return/[ew]$/.test(d)?-3:null}).attr("y",function(d){return/^[ns]/.test(d)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden");resize.style("display",brush.empty()?"none":null);var gUpdate=d3.transition(g),backgroundUpdate=d3.transition(background),range;if(x){range=d3_scaleRange(x);backgroundUpdate.attr("x",range[0]).attr("width",range[1]-range[0]);redrawX(gUpdate)}if(y){range=d3_scaleRange(y);backgroundUpdate.attr("y",range[0]).attr("height",range[1]-range[0]);redrawY(gUpdate)}redraw(gUpdate)})}brush.event=function(g){g.each(function(){var event_=event.of(this,arguments),extent1={x:xExtent,y:yExtent,i:xExtentDomain,j:yExtentDomain},extent0=this.__chart__||extent1;this.__chart__=extent1;if(d3_transitionInheritId){d3.select(this).transition().each("start.brush",function(){xExtentDomain=extent0.i;yExtentDomain=extent0.j;xExtent=extent0.x;yExtent=extent0.y;event_({type:"brushstart"})}).tween("brush:brush",function(){var xi=d3_interpolateArray(xExtent,extent1.x),yi=d3_interpolateArray(yExtent,extent1.y);xExtentDomain=yExtentDomain=null;return function(t){xExtent=extent1.x=xi(t);yExtent=extent1.y=yi(t);
event_({type:"brush",mode:"resize"})}}).each("end.brush",function(){xExtentDomain=extent1.i;yExtentDomain=extent1.j;event_({type:"brush",mode:"resize"});event_({type:"brushend"})})}else{event_({type:"brushstart"});event_({type:"brush",mode:"resize"});event_({type:"brushend"})}})};function redraw(g){g.selectAll(".resize").attr("transform",function(d){return"translate("+xExtent[+/e$/.test(d)]+","+yExtent[+/^s/.test(d)]+")"})}function redrawX(g){g.select(".extent").attr("x",xExtent[0]);g.selectAll(".extent,.n>rect,.s>rect").attr("width",xExtent[1]-xExtent[0])}function redrawY(g){g.select(".extent").attr("y",yExtent[0]);g.selectAll(".extent,.e>rect,.w>rect").attr("height",yExtent[1]-yExtent[0])}function brushstart(){var target=this,eventTarget=d3.select(d3.event.target),event_=event.of(target,arguments),g=d3.select(target),resizing=eventTarget.datum(),resizingX=!/^(n|s)$/.test(resizing)&&x,resizingY=!/^(e|w)$/.test(resizing)&&y,dragging=eventTarget.classed("extent"),dragRestore=d3_event_dragSuppress(),center,origin=d3.mouse(target),offset;var w=d3.select(d3_window).on("keydown.brush",keydown).on("keyup.brush",keyup);if(d3.event.changedTouches){w.on("touchmove.brush",brushmove).on("touchend.brush",brushend)}else{w.on("mousemove.brush",brushmove).on("mouseup.brush",brushend)}g.interrupt().selectAll("*").interrupt();if(dragging){origin[0]=xExtent[0]-origin[0];origin[1]=yExtent[0]-origin[1]}else if(resizing){var ex=+/w$/.test(resizing),ey=+/^n/.test(resizing);offset=[xExtent[1-ex]-origin[0],yExtent[1-ey]-origin[1]];origin[0]=xExtent[ex];origin[1]=yExtent[ey]}else if(d3.event.altKey)center=origin.slice();g.style("pointer-events","none").selectAll(".resize").style("display",null);d3.select("body").style("cursor",eventTarget.style("cursor"));event_({type:"brushstart"});brushmove();function keydown(){if(d3.event.keyCode==32){if(!dragging){center=null;origin[0]-=xExtent[1];origin[1]-=yExtent[1];dragging=2}d3_eventPreventDefault()}}function keyup(){if(d3.event.keyCode==32&&dragging==2){origin[0]+=xExtent[1];origin[1]+=yExtent[1];dragging=0;d3_eventPreventDefault()}}function brushmove(){var point=d3.mouse(target),moved=false;if(offset){point[0]+=offset[0];point[1]+=offset[1]}if(!dragging){if(d3.event.altKey){if(!center)center=[(xExtent[0]+xExtent[1])/2,(yExtent[0]+yExtent[1])/2];origin[0]=xExtent[+(point[0]<center[0])];origin[1]=yExtent[+(point[1]<center[1])]}else center=null}if(resizingX&&move1(point,x,0)){redrawX(g);moved=true}if(resizingY&&move1(point,y,1)){redrawY(g);moved=true}if(moved){redraw(g);event_({type:"brush",mode:dragging?"move":"resize"})}}function move1(point,scale,i){var range=d3_scaleRange(scale),r0=range[0],r1=range[1],position=origin[i],extent=i?yExtent:xExtent,size=extent[1]-extent[0],min,max;if(dragging){r0-=position;r1-=size+position}min=(i?yClamp:xClamp)?Math.max(r0,Math.min(r1,point[i])):point[i];if(dragging){max=(min+=position)+size}else{if(center)position=Math.max(r0,Math.min(r1,2*center[i]-min));if(position<min){max=min;min=position}else{max=position}}if(extent[0]!=min||extent[1]!=max){if(i)yExtentDomain=null;else xExtentDomain=null;extent[0]=min;extent[1]=max;return true}}function brushend(){brushmove();g.style("pointer-events","all").selectAll(".resize").style("display",brush.empty()?"none":null);d3.select("body").style("cursor",null);w.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null);dragRestore();event_({type:"brushend"})}}brush.x=function(z){if(!arguments.length)return x;x=z;resizes=d3_svg_brushResizes[!x<<1|!y];return brush};brush.y=function(z){if(!arguments.length)return y;y=z;resizes=d3_svg_brushResizes[!x<<1|!y];return brush};brush.clamp=function(z){if(!arguments.length)return x&&y?[xClamp,yClamp]:x?xClamp:y?yClamp:null;if(x&&y)xClamp=!!z[0],yClamp=!!z[1];else if(x)xClamp=!!z;else if(y)yClamp=!!z;return brush};brush.extent=function(z){var x0,x1,y0,y1,t;if(!arguments.length){if(x){if(xExtentDomain){x0=xExtentDomain[0],x1=xExtentDomain[1]}else{x0=xExtent[0],x1=xExtent[1];if(x.invert)x0=x.invert(x0),x1=x.invert(x1);if(x1<x0)t=x0,x0=x1,x1=t}}if(y){if(yExtentDomain){y0=yExtentDomain[0],y1=yExtentDomain[1]}else{y0=yExtent[0],y1=yExtent[1];if(y.invert)y0=y.invert(y0),y1=y.invert(y1);if(y1<y0)t=y0,y0=y1,y1=t}}return x&&y?[[x0,y0],[x1,y1]]:x?[x0,x1]:y&&[y0,y1]}if(x){x0=z[0],x1=z[1];if(y)x0=x0[0],x1=x1[0];xExtentDomain=[x0,x1];if(x.invert)x0=x(x0),x1=x(x1);if(x1<x0)t=x0,x0=x1,x1=t;if(x0!=xExtent[0]||x1!=xExtent[1])xExtent=[x0,x1]}if(y){y0=z[0],y1=z[1];if(x)y0=y0[1],y1=y1[1];yExtentDomain=[y0,y1];if(y.invert)y0=y(y0),y1=y(y1);if(y1<y0)t=y0,y0=y1,y1=t;if(y0!=yExtent[0]||y1!=yExtent[1])yExtent=[y0,y1]}return brush};brush.clear=function(){if(!brush.empty()){xExtent=[0,0],yExtent=[0,0];xExtentDomain=yExtentDomain=null}return brush};brush.empty=function(){return!!x&&xExtent[0]==xExtent[1]||!!y&&yExtent[0]==yExtent[1]};return d3.rebind(brush,event,"on")};var d3_svg_brushCursor={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"};var d3_svg_brushResizes=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]];d3.xhr=d3_xhrType(d3_identity);function d3_xhrType(response){return function(url,mimeType,callback){if(arguments.length===2&&typeof mimeType==="function")callback=mimeType,mimeType=null;return d3_xhr(url,mimeType,response,callback)}}function d3_xhr(url,mimeType,response,callback){var xhr={},dispatch=d3.dispatch("beforesend","progress","load","error"),headers={},request=new XMLHttpRequest,responseType=null;if(d3_window.XDomainRequest&&!("withCredentials"in request)&&/^(http(s)?:)?\/\//.test(url))request=new XDomainRequest;"onload"in request?request.onload=request.onerror=respond:request.onreadystatechange=function(){request.readyState>3&&respond()};function respond(){var status=request.status,result;if(!status&&request.responseText||status>=200&&status<300||status===304){try{result=response.call(xhr,request)}catch(e){dispatch.error.call(xhr,e);return}dispatch.load.call(xhr,result)}else{dispatch.error.call(xhr,request)}}request.onprogress=function(event){var o=d3.event;d3.event=event;try{dispatch.progress.call(xhr,request)}finally{d3.event=o}};xhr.header=function(name,value){name=(name+"").toLowerCase();if(arguments.length<2)return headers[name];if(value==null)delete headers[name];else headers[name]=value+"";return xhr};xhr.mimeType=function(value){if(!arguments.length)return mimeType;mimeType=value==null?null:value+"";return xhr};xhr.responseType=function(value){if(!arguments.length)return responseType;responseType=value;return xhr};xhr.response=function(value){response=value;return xhr};["get","post"].forEach(function(method){xhr[method]=function(){return xhr.send.apply(xhr,[method].concat(d3_array(arguments)))}});xhr.send=function(method,data,callback){if(arguments.length===2&&typeof data==="function")callback=data,data=null;request.open(method,url,true);if(mimeType!=null&&!("accept"in headers))headers["accept"]=mimeType+",*/*";if(request.setRequestHeader)for(var name in headers)request.setRequestHeader(name,headers[name]);if(mimeType!=null&&request.overrideMimeType)request.overrideMimeType(mimeType);if(responseType!=null)request.responseType=responseType;if(callback!=null)xhr.on("error",callback).on("load",function(request){callback(null,request)});dispatch.beforesend.call(xhr,request);request.send(data==null?null:data);return xhr};xhr.abort=function(){request.abort();return xhr};d3.rebind(xhr,dispatch,"on");return callback==null?xhr:xhr.get(d3_xhr_fixCallback(callback))}function d3_xhr_fixCallback(callback){return callback.length===1?function(error,request){callback(error==null?request:null)}:callback}d3.text=d3_xhrType(function(request){return request.responseText});d3.json=function(url,callback){return d3_xhr(url,"application/json",d3_json,callback)};function d3_json(request){return JSON.parse(request.responseText)}d3.html=function(url,callback){return d3_xhr(url,"text/html",d3_html,callback)};function d3_html(request){var range=d3_document.createRange();range.selectNode(d3_document.body);return range.createContextualFragment(request.responseText)}d3.xml=d3_xhrType(function(request){return request.responseXML});if(typeof define==="function"&&define.amd){define(d3)}else if(typeof module==="object"&&module.exports){module.exports=d3}else{this.d3=d3}}();
},{}],3:[function(require,module,exports){
var d3 = require('../lib/d3_custom');
var utility = require('./utility');

var SurfaceControl = L.Control.extend({
    includes: L.Mixin.Events,

    options: {
        collapsed: true,
        position: 'topright',
        autoZIndex: true
    },

    initialize: function(options, data) {
        options.data = data;
        L.setOptions(this, options);
    },

    onAdd: function(map) {
        this._map = map;
        var classNames = 'leaflet-surface-chart leaflet-bar';
        var container = this._container = L.DomUtil.create('div', classNames);
        d3.select(container).attr('id', 'chart-container');
        this._removeChart();
        this._makeChart();
        return container;
    },

    _makeChart: function() {
        var surface = this;
        var options = this.options;
        var data = utility.formatValuesForChart(options.data.results, options);

        if (data.length <= 1) throw new Error('Too few points to create a chart');
        if (data.type === 'FeatureCollection') throw new Error('Turn option `geojson` to false to use chart');

        if(!options.yAxis.data) throw new Error('A yAxis data field is required');
        for (var i = 0; i < data.length; i++) {
            if (typeof data[i][options.yAxis.data] === 'string') {
                throw new Error('L.mapbox.surface.chart only works with integers. "' + options.yAxis.data + '" is a string.');
            }
        }

        options.margin = options.margin || [25, 20, 25, 60];
        options.height = options.height || 100;
        options.width = options.width || 350;
        options.xAxis = options.xAxis || {};
        options.yAxis = options.yAxis || {};
        options.xAxis.numberOfTicks = options.xAxis.numberOfTicks || 5;
        options.yAxis.numberOfTicks = options.yAxis.numberOfTicks || 4;
        options.xAxis.units = options.xAxis.units || 'km';
        options.yAxis.units = options.yAxis.units || '';
        options.xAxis.label = options.xAxis.label || null;
        options.yAxis.label = options.yAxis.label || null;
        options.xAxis.data = options.xAxis.data || 'distance';
        options.yAxis.data = options.yAxis.data;

        var domainX = d3.extent(data, function(datum) {
            return datum[options.xAxis.data];
        });
        var domainY = d3.extent(data, function(datum) {
            return datum[options.yAxis.data];
        });

        var rangeX = [0, options.width],
            rangeY = [options.height, 0];

        var scaleX = d3.scale.linear()
            .domain(domainX)
            .range(rangeX);
        var scaleY = d3.scale.linear()
            .domain(domainY)
            .range(rangeY);

        var xAxis = d3.svg.axis()
            .scale(scaleX)
            .orient('bottom')
            .outerTickSize(0)
            .ticks(options.xAxis.numberOfTicks)
            .tickFormat(function(d) { return d + ' ' + options.xAxis.units; });

        var yAxis = d3.svg.axis()
            .scale(scaleY)
            .outerTickSize(0)
            .orient('left')
            .ticks(options.yAxis.numberOfTicks)
            .tickFormat(function(d) { return d + ' ' + options.yAxis.units; });

        var line = d3.svg.line()
            .interpolate('monotone')
            .x(function(datum) {
                return scaleX(datum[options.xAxis.data]);
            })
            .y(function(datum) {
                return scaleY(datum[options.yAxis.data]);
            });

        var area = d3.svg.area()
            .interpolate('monotone')
            .x(function(d) {
                return scaleX(d[options.xAxis.data]);
            })
            .y0(options.height)
            .y1(function(d) {
                return scaleY(d[options.yAxis.data]);
            });

        var svg = d3.select(surface._container)
            .append('div')
            .attr('id', 'chart')
            .append('svg')
            .attr('width', options.width + options.margin[3] + options.margin[1])
            .attr('height', options.height + options.margin[0] + options.margin[2])
            .append('g')
            .attr('transform', 'translate(' + options.margin[3] + ',' + options.margin[0] + ')');

        var extent = d3.extent(data, function(d) { return d[options.yAxis.data]; });
        extent[0] = extent[0] - (extent[0] * 0.05);

        scaleX.domain([data[0][options.xAxis.data], data[data.length - 1][options.xAxis.data]]);
        scaleY.domain(extent);

        if (options.chartType === 'area') {
            svg.append('path')
                .datum(data)
                .attr('class', 'area')
                .attr('d', area);
            svg.append('path')
                .datum(data)
                .attr('class', 'line')
                .attr('d', line);
        } else {
            svg.append('path')
                .datum(data)
                .attr('class', 'line')
                .attr('d', line);
        }

        svg.append('g')
            .attr('class', 'x axis')
            .attr('transform', 'translate(0,' + options.height + ')')
            .call(xAxis)
            .append('text')
            .style('text-anchor', 'end')
            .attr('x', options.width)
            .attr('y', -7)
            .text(options.xAxis.label);

        svg.append('g')
            .attr('class', 'y axis')
            .call(yAxis)
            .append('text')
            .attr('y', -15)
            .attr('x', -5)
            .text(options.yAxis.label);


        var hover = svg
            .append('g');

        hover.append('text')
            .attr('x', -15)
            .attr('class', 'hover-text')
            .attr('dy', -5);

        hover.append('line')
            .attr({
                'x1': 0,
                'y1': 0,
                'x2': 0,
                'y2': options.height
            }).attr('class', 'hover-line');

        var bisect = d3.bisector(function(datum) {
            return datum[options.xAxis.data];
        }).right;

        svg.append('rect')
            .attr('class', 'overlay')
            .attr('width', options.width)
            .attr('height', options.height)
            .on('mouseover', function() {
                hover.style('display', 'inherit');
            })
            .on('mouseout', function() {
                hover.style('display', 'none');
                surface._resetHoverMarker();
            })
            .on('mousemove', mousemove);

        function mousemove() {
            var mouse = d3.mouse(this),
                mouseX = scaleX.invert(mouse[0]),
                index = bisect(data, mouseX),
                startDatum = data[index - 1],
                endDatum = data[index],
                interpolateValue = d3.scale.linear()
                    .range([0, 1])
                    .domain([startDatum[options.xAxis.data], endDatum[options.xAxis.data]]);

            var bias = interpolateValue(mouseX);
            var intData = utility.lerp(startDatum, endDatum, bias, options.yAxis.data);

            hover.attr('transform', 'translate(' + mouse[0] + ',0)');
            hover.select('text')
                .text(intData.value.toFixed(0) + ' ' + options.yAxis.units);

            if(surface._markerLayer){
                surface._markerLayer.setLatLng([intData.lat, intData.lng]);
            } else {
                surface._addHoverMarker(intData.lat, intData.lng);
            }
        }

        this._svg = svg;
    },

    _addHoverMarker: function(lat, lng) {
        var markerLayer = L.circleMarker([lat, lng], {
            color: '#fff',
            width: '2px',
            opacity: 1,
            fillColor: '#3887be',
            fillOpacity: 1
        })
            .setRadius(8);

        this._map.addLayer(markerLayer);
        this._markerLayer = markerLayer;
    },

    _resetHoverMarker: function() {
        this._map.removeLayer(this._markerLayer);
        delete this._markerLayer;
    },

    _removeChart: function(container) {
        d3.select('.leaflet-surface-chart #chart').remove();
    }

});

module.exports = function(_, options) {
    return new SurfaceControl(_, options);
};

},{"../lib/d3_custom":2,"./utility":6}],4:[function(require,module,exports){
'use strict';

var d3 = require('../lib/d3_custom');
var utility = require('./utility');

var surfaceLine = L.Polyline.extend({

    options: {},

    initialize: function(options, path) {
        L.Polyline.prototype.initialize.call(this, options);
        L.Util.setOptions(this, options);
        this._map = map;
        this._initLine(options, path);
    },

    _initLine: function(options, path) {
        if (path.length <= 1) throw new Error('Too few points to create a line');

        var line = [];
        if (path.type === 'FeatureCollection') {
            path.features.forEach(function(point) {
                line.push([point.geometry.coordinates[1], point.geometry.coordinates[0]]);
            });
            L.geoJson(L.polyline(line).toGeoJSON(), options).addTo(this._map);
        } else {
            path.forEach(function(point) {
                line.push([point.latlng.lat, point.latlng.lng]);
            });
            L.geoJson(L.polyline(line).toGeoJSON(), options).addTo(this._map);
        }
    }
});

module.exports = function(_, options) {
    return new surfaceLine(_, options);
};

},{"../lib/d3_custom":2,"./utility":6}],5:[function(require,module,exports){
var d3 = require('../lib/d3_custom');

module.exports = function(options) {

    var surface = {};
    if (options) surface.options = options;

    surface.getData = function(options, latlngs, callback) {
        if (surface.options && options instanceof Array) {
            callback = latlngs;
            latlngs = options;
            options = surface.options;
        }

        if (!options.mapid) return callback('Missing mapid');
        if (!options.layer) return callback('Missing layer');
        if (!options.fields) return callback('Missing fields');

        options.access_token = L.mapbox.accessToken;
        var url = 'https://api.tiles.mapbox.com/v4/surface/' + options.mapid + '.json?';
        if (latlngs.lat) {
            options.points = latlngs.lng + ',' + latlngs.lat;
        } else if (latlngs.length === 2) {
            options.points = latlngs[1] + ',' + latlngs[0];
        } else if (latlngs.length === 1) {
            options.points = latlngs[0][1] + ',' + latlngs[0][0];
        } else {
            options.points = latlngs.map(function(l) {
                return l.reverse().join(',');
            }).join(';');
        }

        this.getHTTP(url, options, function(error, response) {
            if (error) return callback(error, null);

            var totalDistance = 0;
            if (!options.geojson) {
                for (var i = 0; i < response.results.length; i++) {
                    if (i === 0) {
                        totalDistance += surface._calculateDistance(response.results[0].latlng.lat, response.results[0].latlng.lng, response.results[0].latlng.lat, response.results[0].latlng.lng);
                        response.results[i].distance = parseFloat(totalDistance.toFixed(3));
                    } else if (i < response.results.length - 1) {
                        totalDistance += surface._calculateDistance(response.results[i].latlng.lat, response.results[i].latlng.lng, response.results[i + 1].latlng.lat, response.results[i + 1].latlng.lng);
                        response.results[i].distance = parseFloat(totalDistance.toFixed(3));
                    } else {
                        totalDistance += surface._calculateDistance(response.results[response.results.length - 1].latlng.lat, response.results[response.results.length - 1].latlng.lng, response.results[response.results.length - 2].latlng.lat, response.results[response.results.length - 2].latlng.lng);
                        response.results[i].distance = parseFloat(totalDistance.toFixed(3));
                    }
                }
            }

            return callback(error, response);
        });
    };

    surface.getInfo = function(mapid, callback) {
        var url = 'https://a.tiles.mapbox.com/v4/' + mapid + '.json?access_token=' + L.mapbox.accessToken;

        this.getHTTP(url, null, function(err, response) {
            if (err) return callback(err, null);

            // Rename to stay consistent with the API
            for (var i = 0; i < response.vector_layers.length; i++) {
                response.vector_layers[i].layer = response.vector_layers[i].id;
                delete response.vector_layers[i].id;
            }
            return callback(null, response.vector_layers);
        });
    };

    surface.calculateBetween = function(options, toPoint, fromPoint, intervalCount, callback) {
        var queryPoints = [],
            latDifference = toPoint[0] - fromPoint[0],
            lngDifference = toPoint[1] - fromPoint[1],
            latDelta = latDifference / intervalCount,
            lngDelta = lngDifference / intervalCount;
        for (var s = intervalCount - 1; s >= 0; s--) {
            var intervalLat = (s * latDelta) + fromPoint[0];
            var intervalLng = (s * lngDelta) + fromPoint[1];
            queryPoints.push([intervalLat, intervalLng]);
        }

        if (queryPoints.length > 300) return callback('Query is too long, max number of points is 300.');

        this.getData(options, queryPoints, function(err, response) {
            return callback(null, response);
        });

    };

    surface.getHTTP = function(url, params, callback) {
        d3.json(url + this._queryString(params), function(err, resp) {
            if (err) return callback(err.responseText, null);
            return callback(null, resp);
        }, true);
    };

    surface._calculateDistance = function(lat1, lng1, lat2, lng2) {
        var surface = this;
        var RKm = 6378.1; // Radius of the earth in km
        var Rmiles = 3963.1676; // Radius of the earth in miles
        var dLat = surface._calculateDeg2Rad(lat2 - lat1); // deg2rad below
        var dLon = surface._calculateDeg2Rad(lng2 - lng1);
        var a =
            Math.sin(dLat / 2) * Math.sin(dLat / 2) +
            Math.cos(surface._calculateDeg2Rad(lat1)) * Math.cos(surface._calculateDeg2Rad(lat2)) *
            Math.sin(dLon / 2) * Math.sin(dLon / 2);
        var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
        var d = RKm * c; // Distance in km
        return d;
    };

    surface._calculateDeg2Rad = function(deg) {
        return deg * (Math.PI / 180);
    };

    surface._queryString = function(object) {
        var str = [];
        for (var p in object)
            if (object.hasOwnProperty(p)) {
                str.push(encodeURIComponent(p) + '=' + encodeURIComponent(object[p]));
            }
        return str.join('&');
    };

    return surface;

};

},{"../lib/d3_custom":2}],6:[function(require,module,exports){
var utility = module.exports = {};

utility.lerp = function(a, b, t, value) {
    return {
        lat: (a.latlng.lat * (1 - t)) + (b.latlng.lat * (t)),
        lng: (a.latlng.lng * (1 - t)) + (b.latlng.lng * (t)),
        distance: (a.distance * (1 - t)) + (b.distance * (t)),
        value: (a[value] * (1 - t)) + (b[value] * (t))
    };
};

utility.formatValuesForChart = function(values, options) {
    for (var i = 0; i < values.length; i++) {
        if (values[i][options.yAxis.data] === null) {
            values[i][options.yAxis.data] = 0;
        }
    }
    return values;
};

},{}]},{},[1])
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCIvVXNlcnMvYm9iYnkvRG9jdW1lbnRzL21hcGJveC9tYXBib3gtc3VyZmFjZS9pbmRleC5qcyIsIi9Vc2Vycy9ib2JieS9Eb2N1bWVudHMvbWFwYm94L21hcGJveC1zdXJmYWNlL2xpYi9kM19jdXN0b20uanMiLCIvVXNlcnMvYm9iYnkvRG9jdW1lbnRzL21hcGJveC9tYXBib3gtc3VyZmFjZS9zcmMvY2hhcnQuanMiLCIvVXNlcnMvYm9iYnkvRG9jdW1lbnRzL21hcGJveC9tYXBib3gtc3VyZmFjZS9zcmMvbGluZS5qcyIsIi9Vc2Vycy9ib2JieS9Eb2N1bWVudHMvbWFwYm94L21hcGJveC1zdXJmYWNlL3NyYy9zdXJmYWNlLmpzIiwiL1VzZXJzL2JvYmJ5L0RvY3VtZW50cy9tYXBib3gvbWFwYm94LXN1cmZhY2Uvc3JjL3V0aWxpdHkuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNOQTtBQUNBO0FBQ0E7QUFDQTs7QUNIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BQQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3JDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDaElBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbiBlKHQsbixyKXtmdW5jdGlvbiBzKG8sdSl7aWYoIW5bb10pe2lmKCF0W29dKXt2YXIgYT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2lmKCF1JiZhKXJldHVybiBhKG8sITApO2lmKGkpcmV0dXJuIGkobywhMCk7dmFyIGY9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitvK1wiJ1wiKTt0aHJvdyBmLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsZn12YXIgbD1uW29dPXtleHBvcnRzOnt9fTt0W29dWzBdLmNhbGwobC5leHBvcnRzLGZ1bmN0aW9uKGUpe3ZhciBuPXRbb11bMV1bZV07cmV0dXJuIHMobj9uOmUpfSxsLGwuZXhwb3J0cyxlLHQsbixyKX1yZXR1cm4gbltvXS5leHBvcnRzfXZhciBpPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspcyhyW29dKTtyZXR1cm4gc30pIiwiJ3VzZSBzdHJpY3QnO1xuXG5pZiAoIUwubWFwYm94KSB0aHJvdyBuZXcgRXJyb3IoJ2luY2x1ZGUgbWFwYm94LmpzIGJlZm9yZSBtYXBib3guZGlyZWN0aW9ucy5qcycpO1xuXG5MLm1hcGJveC5zdXJmYWNlID0gcmVxdWlyZSgnLi9zcmMvc3VyZmFjZS5qcycpO1xuTC5tYXBib3guc3VyZmFjZS5jaGFydCA9IHJlcXVpcmUoJy4vc3JjL2NoYXJ0LmpzJyk7XG5MLm1hcGJveC5zdXJmYWNlLmxpbmUgPSByZXF1aXJlKCcuL3NyYy9saW5lLmpzJyk7IiwiIWZ1bmN0aW9uKCl7dmFyIGQzPXt2ZXJzaW9uOlwiMy40LjFcIn07ZDMuYXNjZW5kaW5nPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGE8Yj8tMTphPmI/MTphPj1iPzA6TmFOfTtkMy5kZXNjZW5kaW5nPWZ1bmN0aW9uKGEsYil7cmV0dXJuIGI8YT8tMTpiPmE/MTpiPj1hPzA6TmFOfTtkMy5taW49ZnVuY3Rpb24oYXJyYXksZil7dmFyIGk9LTEsbj1hcnJheS5sZW5ndGgsYSxiO2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0xKXt3aGlsZSgrK2k8biYmISgoYT1hcnJheVtpXSkhPW51bGwmJmE8PWEpKWE9dW5kZWZpbmVkO3doaWxlKCsraTxuKWlmKChiPWFycmF5W2ldKSE9bnVsbCYmYT5iKWE9Yn1lbHNle3doaWxlKCsraTxuJiYhKChhPWYuY2FsbChhcnJheSxhcnJheVtpXSxpKSkhPW51bGwmJmE8PWEpKWE9dW5kZWZpbmVkO3doaWxlKCsraTxuKWlmKChiPWYuY2FsbChhcnJheSxhcnJheVtpXSxpKSkhPW51bGwmJmE+YilhPWJ9cmV0dXJuIGF9O2QzLm1heD1mdW5jdGlvbihhcnJheSxmKXt2YXIgaT0tMSxuPWFycmF5Lmxlbmd0aCxhLGI7aWYoYXJndW1lbnRzLmxlbmd0aD09PTEpe3doaWxlKCsraTxuJiYhKChhPWFycmF5W2ldKSE9bnVsbCYmYTw9YSkpYT11bmRlZmluZWQ7d2hpbGUoKytpPG4paWYoKGI9YXJyYXlbaV0pIT1udWxsJiZiPmEpYT1ifWVsc2V7d2hpbGUoKytpPG4mJiEoKGE9Zi5jYWxsKGFycmF5LGFycmF5W2ldLGkpKSE9bnVsbCYmYTw9YSkpYT11bmRlZmluZWQ7d2hpbGUoKytpPG4paWYoKGI9Zi5jYWxsKGFycmF5LGFycmF5W2ldLGkpKSE9bnVsbCYmYj5hKWE9Yn1yZXR1cm4gYX07ZDMuZXh0ZW50PWZ1bmN0aW9uKGFycmF5LGYpe3ZhciBpPS0xLG49YXJyYXkubGVuZ3RoLGEsYixjO2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0xKXt3aGlsZSgrK2k8biYmISgoYT1jPWFycmF5W2ldKSE9bnVsbCYmYTw9YSkpYT1jPXVuZGVmaW5lZDt3aGlsZSgrK2k8bilpZigoYj1hcnJheVtpXSkhPW51bGwpe2lmKGE+YilhPWI7aWYoYzxiKWM9Yn19ZWxzZXt3aGlsZSgrK2k8biYmISgoYT1jPWYuY2FsbChhcnJheSxhcnJheVtpXSxpKSkhPW51bGwmJmE8PWEpKWE9dW5kZWZpbmVkO3doaWxlKCsraTxuKWlmKChiPWYuY2FsbChhcnJheSxhcnJheVtpXSxpKSkhPW51bGwpe2lmKGE+YilhPWI7aWYoYzxiKWM9Yn19cmV0dXJuW2EsY119O2QzLnN1bT1mdW5jdGlvbihhcnJheSxmKXt2YXIgcz0wLG49YXJyYXkubGVuZ3RoLGEsaT0tMTtpZihhcmd1bWVudHMubGVuZ3RoPT09MSl7d2hpbGUoKytpPG4paWYoIWlzTmFOKGE9K2FycmF5W2ldKSlzKz1hfWVsc2V7d2hpbGUoKytpPG4paWYoIWlzTmFOKGE9K2YuY2FsbChhcnJheSxhcnJheVtpXSxpKSkpcys9YX1yZXR1cm4gc307ZnVuY3Rpb24gZDNfbnVtYmVyKHgpe3JldHVybiB4IT1udWxsJiYhaXNOYU4oeCl9ZDMubWVhbj1mdW5jdGlvbihhcnJheSxmKXt2YXIgbj1hcnJheS5sZW5ndGgsYSxtPTAsaT0tMSxqPTA7aWYoYXJndW1lbnRzLmxlbmd0aD09PTEpe3doaWxlKCsraTxuKWlmKGQzX251bWJlcihhPWFycmF5W2ldKSltKz0oYS1tKS8rK2p9ZWxzZXt3aGlsZSgrK2k8bilpZihkM19udW1iZXIoYT1mLmNhbGwoYXJyYXksYXJyYXlbaV0saSkpKW0rPShhLW0pLysran1yZXR1cm4gaj9tOnVuZGVmaW5lZH07ZDMucXVhbnRpbGU9ZnVuY3Rpb24odmFsdWVzLHApe3ZhciBIPSh2YWx1ZXMubGVuZ3RoLTEpKnArMSxoPU1hdGguZmxvb3IoSCksdj0rdmFsdWVzW2gtMV0sZT1ILWg7cmV0dXJuIGU/ditlKih2YWx1ZXNbaF0tdik6dn07ZDMubWVkaWFuPWZ1bmN0aW9uKGFycmF5LGYpe2lmKGFyZ3VtZW50cy5sZW5ndGg+MSlhcnJheT1hcnJheS5tYXAoZik7YXJyYXk9YXJyYXkuZmlsdGVyKGQzX251bWJlcik7cmV0dXJuIGFycmF5Lmxlbmd0aD9kMy5xdWFudGlsZShhcnJheS5zb3J0KGQzLmFzY2VuZGluZyksLjUpOnVuZGVmaW5lZH07ZDMuYmlzZWN0b3I9ZnVuY3Rpb24oZil7cmV0dXJue2xlZnQ6ZnVuY3Rpb24oYSx4LGxvLGhpKXtpZihhcmd1bWVudHMubGVuZ3RoPDMpbG89MDtpZihhcmd1bWVudHMubGVuZ3RoPDQpaGk9YS5sZW5ndGg7d2hpbGUobG88aGkpe3ZhciBtaWQ9bG8raGk+Pj4xO2lmKGYuY2FsbChhLGFbbWlkXSxtaWQpPHgpbG89bWlkKzE7ZWxzZSBoaT1taWR9cmV0dXJuIGxvfSxyaWdodDpmdW5jdGlvbihhLHgsbG8saGkpe2lmKGFyZ3VtZW50cy5sZW5ndGg8Mylsbz0wO2lmKGFyZ3VtZW50cy5sZW5ndGg8NCloaT1hLmxlbmd0aDt3aGlsZShsbzxoaSl7dmFyIG1pZD1sbytoaT4+PjE7aWYoeDxmLmNhbGwoYSxhW21pZF0sbWlkKSloaT1taWQ7ZWxzZSBsbz1taWQrMX1yZXR1cm4gbG99fX07dmFyIGQzX2Jpc2VjdG9yPWQzLmJpc2VjdG9yKGZ1bmN0aW9uKGQpe3JldHVybiBkfSk7ZDMuYmlzZWN0TGVmdD1kM19iaXNlY3Rvci5sZWZ0O2QzLmJpc2VjdD1kMy5iaXNlY3RSaWdodD1kM19iaXNlY3Rvci5yaWdodDtkMy5zaHVmZmxlPWZ1bmN0aW9uKGFycmF5KXt2YXIgbT1hcnJheS5sZW5ndGgsdCxpO3doaWxlKG0pe2k9TWF0aC5yYW5kb20oKSptLS18MDt0PWFycmF5W21dLGFycmF5W21dPWFycmF5W2ldLGFycmF5W2ldPXR9cmV0dXJuIGFycmF5fTtkMy5wZXJtdXRlPWZ1bmN0aW9uKGFycmF5LGluZGV4ZXMpe3ZhciBpPWluZGV4ZXMubGVuZ3RoLHBlcm11dGVzPW5ldyBBcnJheShpKTt3aGlsZShpLS0pcGVybXV0ZXNbaV09YXJyYXlbaW5kZXhlc1tpXV07cmV0dXJuIHBlcm11dGVzfTtkMy5wYWlycz1mdW5jdGlvbihhcnJheSl7dmFyIGk9MCxuPWFycmF5Lmxlbmd0aC0xLHAwLHAxPWFycmF5WzBdLHBhaXJzPW5ldyBBcnJheShuPDA/MDpuKTt3aGlsZShpPG4pcGFpcnNbaV09W3AwPXAxLHAxPWFycmF5WysraV1dO3JldHVybiBwYWlyc307ZDMuemlwPWZ1bmN0aW9uKCl7aWYoIShuPWFyZ3VtZW50cy5sZW5ndGgpKXJldHVybltdO2Zvcih2YXIgaT0tMSxtPWQzLm1pbihhcmd1bWVudHMsZDNfemlwTGVuZ3RoKSx6aXBzPW5ldyBBcnJheShtKTsrK2k8bTspe2Zvcih2YXIgaj0tMSxuLHppcD16aXBzW2ldPW5ldyBBcnJheShuKTsrK2o8bjspe3ppcFtqXT1hcmd1bWVudHNbal1baV19fXJldHVybiB6aXBzfTtmdW5jdGlvbiBkM196aXBMZW5ndGgoZCl7cmV0dXJuIGQubGVuZ3RofWQzLnRyYW5zcG9zZT1mdW5jdGlvbihtYXRyaXgpe3JldHVybiBkMy56aXAuYXBwbHkoZDMsbWF0cml4KX07ZDMua2V5cz1mdW5jdGlvbihtYXApe3ZhciBrZXlzPVtdO2Zvcih2YXIga2V5IGluIG1hcClrZXlzLnB1c2goa2V5KTtyZXR1cm4ga2V5c307ZDMudmFsdWVzPWZ1bmN0aW9uKG1hcCl7dmFyIHZhbHVlcz1bXTtmb3IodmFyIGtleSBpbiBtYXApdmFsdWVzLnB1c2gobWFwW2tleV0pO3JldHVybiB2YWx1ZXN9O2QzLmVudHJpZXM9ZnVuY3Rpb24obWFwKXt2YXIgZW50cmllcz1bXTtmb3IodmFyIGtleSBpbiBtYXApZW50cmllcy5wdXNoKHtrZXk6a2V5LHZhbHVlOm1hcFtrZXldfSk7cmV0dXJuIGVudHJpZXN9O2QzLm1lcmdlPWZ1bmN0aW9uKGFycmF5cyl7dmFyIG49YXJyYXlzLmxlbmd0aCxtLGk9LTEsaj0wLG1lcmdlZCxhcnJheTt3aGlsZSgrK2k8bilqKz1hcnJheXNbaV0ubGVuZ3RoO21lcmdlZD1uZXcgQXJyYXkoaik7d2hpbGUoLS1uPj0wKXthcnJheT1hcnJheXNbbl07bT1hcnJheS5sZW5ndGg7d2hpbGUoLS1tPj0wKXttZXJnZWRbLS1qXT1hcnJheVttXX19cmV0dXJuIG1lcmdlZH07dmFyIGFicz1NYXRoLmFicztkMy5yYW5nZT1mdW5jdGlvbihzdGFydCxzdG9wLHN0ZXApe2lmKGFyZ3VtZW50cy5sZW5ndGg8Myl7c3RlcD0xO2lmKGFyZ3VtZW50cy5sZW5ndGg8Mil7c3RvcD1zdGFydDtzdGFydD0wfX1pZigoc3RvcC1zdGFydCkvc3RlcD09PUluZmluaXR5KXRocm93IG5ldyBFcnJvcihcImluZmluaXRlIHJhbmdlXCIpO3ZhciByYW5nZT1bXSxrPWQzX3JhbmdlX2ludGVnZXJTY2FsZShhYnMoc3RlcCkpLGk9LTEsajtzdGFydCo9ayxzdG9wKj1rLHN0ZXAqPWs7aWYoc3RlcDwwKXdoaWxlKChqPXN0YXJ0K3N0ZXAqKytpKT5zdG9wKXJhbmdlLnB1c2goai9rKTtlbHNlIHdoaWxlKChqPXN0YXJ0K3N0ZXAqKytpKTxzdG9wKXJhbmdlLnB1c2goai9rKTtyZXR1cm4gcmFuZ2V9O2Z1bmN0aW9uIGQzX3JhbmdlX2ludGVnZXJTY2FsZSh4KXt2YXIgaz0xO3doaWxlKHgqayUxKWsqPTEwO3JldHVybiBrfWZ1bmN0aW9uIGQzX2NsYXNzKGN0b3IscHJvcGVydGllcyl7dHJ5e2Zvcih2YXIga2V5IGluIHByb3BlcnRpZXMpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShjdG9yLnByb3RvdHlwZSxrZXkse3ZhbHVlOnByb3BlcnRpZXNba2V5XSxlbnVtZXJhYmxlOmZhbHNlfSl9fWNhdGNoKGUpe2N0b3IucHJvdG90eXBlPXByb3BlcnRpZXN9fWQzLm1hcD1mdW5jdGlvbihvYmplY3Qpe3ZhciBtYXA9bmV3IGQzX01hcDtpZihvYmplY3QgaW5zdGFuY2VvZiBkM19NYXApb2JqZWN0LmZvckVhY2goZnVuY3Rpb24oa2V5LHZhbHVlKXttYXAuc2V0KGtleSx2YWx1ZSl9KTtlbHNlIGZvcih2YXIga2V5IGluIG9iamVjdCltYXAuc2V0KGtleSxvYmplY3Rba2V5XSk7cmV0dXJuIG1hcH07ZnVuY3Rpb24gZDNfTWFwKCl7fWQzX2NsYXNzKGQzX01hcCx7aGFzOmQzX21hcF9oYXMsZ2V0OmZ1bmN0aW9uKGtleSl7cmV0dXJuIHRoaXNbZDNfbWFwX3ByZWZpeCtrZXldfSxzZXQ6ZnVuY3Rpb24oa2V5LHZhbHVlKXtyZXR1cm4gdGhpc1tkM19tYXBfcHJlZml4K2tleV09dmFsdWV9LHJlbW92ZTpkM19tYXBfcmVtb3ZlLGtleXM6ZDNfbWFwX2tleXMsdmFsdWVzOmZ1bmN0aW9uKCl7dmFyIHZhbHVlcz1bXTt0aGlzLmZvckVhY2goZnVuY3Rpb24oa2V5LHZhbHVlKXt2YWx1ZXMucHVzaCh2YWx1ZSl9KTtyZXR1cm4gdmFsdWVzfSxlbnRyaWVzOmZ1bmN0aW9uKCl7dmFyIGVudHJpZXM9W107dGhpcy5mb3JFYWNoKGZ1bmN0aW9uKGtleSx2YWx1ZSl7ZW50cmllcy5wdXNoKHtrZXk6a2V5LHZhbHVlOnZhbHVlfSl9KTtyZXR1cm4gZW50cmllc30sc2l6ZTpkM19tYXBfc2l6ZSxlbXB0eTpkM19tYXBfZW1wdHksZm9yRWFjaDpmdW5jdGlvbihmKXtmb3IodmFyIGtleSBpbiB0aGlzKWlmKGtleS5jaGFyQ29kZUF0KDApPT09ZDNfbWFwX3ByZWZpeENvZGUpZi5jYWxsKHRoaXMsa2V5LnN1YnN0cmluZygxKSx0aGlzW2tleV0pfX0pO3ZhciBkM19tYXBfcHJlZml4PVwiXFx4MDBcIixkM19tYXBfcHJlZml4Q29kZT1kM19tYXBfcHJlZml4LmNoYXJDb2RlQXQoMCk7ZnVuY3Rpb24gZDNfbWFwX2hhcyhrZXkpe3JldHVybiBkM19tYXBfcHJlZml4K2tleSBpbiB0aGlzfWZ1bmN0aW9uIGQzX21hcF9yZW1vdmUoa2V5KXtrZXk9ZDNfbWFwX3ByZWZpeCtrZXk7cmV0dXJuIGtleSBpbiB0aGlzJiZkZWxldGUgdGhpc1trZXldfWZ1bmN0aW9uIGQzX21hcF9rZXlzKCl7dmFyIGtleXM9W107dGhpcy5mb3JFYWNoKGZ1bmN0aW9uKGtleSl7a2V5cy5wdXNoKGtleSl9KTtyZXR1cm4ga2V5c31mdW5jdGlvbiBkM19tYXBfc2l6ZSgpe3ZhciBzaXplPTA7Zm9yKHZhciBrZXkgaW4gdGhpcylpZihrZXkuY2hhckNvZGVBdCgwKT09PWQzX21hcF9wcmVmaXhDb2RlKSsrc2l6ZTtyZXR1cm4gc2l6ZX1mdW5jdGlvbiBkM19tYXBfZW1wdHkoKXtmb3IodmFyIGtleSBpbiB0aGlzKWlmKGtleS5jaGFyQ29kZUF0KDApPT09ZDNfbWFwX3ByZWZpeENvZGUpcmV0dXJuIGZhbHNlO3JldHVybiB0cnVlfWQzLm5lc3Q9ZnVuY3Rpb24oKXt2YXIgbmVzdD17fSxrZXlzPVtdLHNvcnRLZXlzPVtdLHNvcnRWYWx1ZXMscm9sbHVwO2Z1bmN0aW9uIG1hcChtYXBUeXBlLGFycmF5LGRlcHRoKXtpZihkZXB0aD49a2V5cy5sZW5ndGgpcmV0dXJuIHJvbGx1cD9yb2xsdXAuY2FsbChuZXN0LGFycmF5KTpzb3J0VmFsdWVzP2FycmF5LnNvcnQoc29ydFZhbHVlcyk6YXJyYXk7dmFyIGk9LTEsbj1hcnJheS5sZW5ndGgsa2V5PWtleXNbZGVwdGgrK10sa2V5VmFsdWUsb2JqZWN0LHNldHRlcix2YWx1ZXNCeUtleT1uZXcgZDNfTWFwLHZhbHVlczt3aGlsZSgrK2k8bil7aWYodmFsdWVzPXZhbHVlc0J5S2V5LmdldChrZXlWYWx1ZT1rZXkob2JqZWN0PWFycmF5W2ldKSkpe3ZhbHVlcy5wdXNoKG9iamVjdCl9ZWxzZXt2YWx1ZXNCeUtleS5zZXQoa2V5VmFsdWUsW29iamVjdF0pfX1pZihtYXBUeXBlKXtvYmplY3Q9bWFwVHlwZSgpO3NldHRlcj1mdW5jdGlvbihrZXlWYWx1ZSx2YWx1ZXMpe29iamVjdC5zZXQoa2V5VmFsdWUsbWFwKG1hcFR5cGUsdmFsdWVzLGRlcHRoKSl9fWVsc2V7b2JqZWN0PXt9O3NldHRlcj1mdW5jdGlvbihrZXlWYWx1ZSx2YWx1ZXMpe29iamVjdFtrZXlWYWx1ZV09bWFwKG1hcFR5cGUsdmFsdWVzLGRlcHRoKX19dmFsdWVzQnlLZXkuZm9yRWFjaChzZXR0ZXIpO3JldHVybiBvYmplY3R9ZnVuY3Rpb24gZW50cmllcyhtYXAsZGVwdGgpe2lmKGRlcHRoPj1rZXlzLmxlbmd0aClyZXR1cm4gbWFwO3ZhciBhcnJheT1bXSxzb3J0S2V5PXNvcnRLZXlzW2RlcHRoKytdO21hcC5mb3JFYWNoKGZ1bmN0aW9uKGtleSxrZXlNYXApe2FycmF5LnB1c2goe2tleTprZXksdmFsdWVzOmVudHJpZXMoa2V5TWFwLGRlcHRoKX0pfSk7cmV0dXJuIHNvcnRLZXk/YXJyYXkuc29ydChmdW5jdGlvbihhLGIpe3JldHVybiBzb3J0S2V5KGEua2V5LGIua2V5KX0pOmFycmF5fW5lc3QubWFwPWZ1bmN0aW9uKGFycmF5LG1hcFR5cGUpe3JldHVybiBtYXAobWFwVHlwZSxhcnJheSwwKX07bmVzdC5lbnRyaWVzPWZ1bmN0aW9uKGFycmF5KXtyZXR1cm4gZW50cmllcyhtYXAoZDMubWFwLGFycmF5LDApLDApfTtuZXN0LmtleT1mdW5jdGlvbihkKXtrZXlzLnB1c2goZCk7cmV0dXJuIG5lc3R9O25lc3Quc29ydEtleXM9ZnVuY3Rpb24ob3JkZXIpe3NvcnRLZXlzW2tleXMubGVuZ3RoLTFdPW9yZGVyO3JldHVybiBuZXN0fTtuZXN0LnNvcnRWYWx1ZXM9ZnVuY3Rpb24ob3JkZXIpe3NvcnRWYWx1ZXM9b3JkZXI7cmV0dXJuIG5lc3R9O25lc3Qucm9sbHVwPWZ1bmN0aW9uKGYpe3JvbGx1cD1mO3JldHVybiBuZXN0fTtyZXR1cm4gbmVzdH07ZDMuc2V0PWZ1bmN0aW9uKGFycmF5KXt2YXIgc2V0PW5ldyBkM19TZXQ7aWYoYXJyYXkpZm9yKHZhciBpPTAsbj1hcnJheS5sZW5ndGg7aTxuOysraSlzZXQuYWRkKGFycmF5W2ldKTtyZXR1cm4gc2V0fTtmdW5jdGlvbiBkM19TZXQoKXt9ZDNfY2xhc3MoZDNfU2V0LHtoYXM6ZDNfbWFwX2hhcyxhZGQ6ZnVuY3Rpb24odmFsdWUpe3RoaXNbZDNfbWFwX3ByZWZpeCt2YWx1ZV09dHJ1ZTtyZXR1cm4gdmFsdWV9LHJlbW92ZTpmdW5jdGlvbih2YWx1ZSl7dmFsdWU9ZDNfbWFwX3ByZWZpeCt2YWx1ZTtyZXR1cm4gdmFsdWUgaW4gdGhpcyYmZGVsZXRlIHRoaXNbdmFsdWVdfSx2YWx1ZXM6ZDNfbWFwX2tleXMsc2l6ZTpkM19tYXBfc2l6ZSxlbXB0eTpkM19tYXBfZW1wdHksZm9yRWFjaDpmdW5jdGlvbihmKXtmb3IodmFyIHZhbHVlIGluIHRoaXMpaWYodmFsdWUuY2hhckNvZGVBdCgwKT09PWQzX21hcF9wcmVmaXhDb2RlKWYuY2FsbCh0aGlzLHZhbHVlLnN1YnN0cmluZygxKSl9fSk7ZnVuY3Rpb24gZDNfZnVuY3Rvcih2KXtyZXR1cm4gdHlwZW9mIHY9PT1cImZ1bmN0aW9uXCI/djpmdW5jdGlvbigpe3JldHVybiB2fX1kMy5mdW5jdG9yPWQzX2Z1bmN0b3I7dmFyIGQzX25zUHJlZml4PXtzdmc6XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLHhodG1sOlwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbFwiLHhsaW5rOlwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGlua1wiLHhtbDpcImh0dHA6Ly93d3cudzMub3JnL1hNTC8xOTk4L25hbWVzcGFjZVwiLHhtbG5zOlwiaHR0cDovL3d3dy53My5vcmcvMjAwMC94bWxucy9cIn07ZDMubnM9e3ByZWZpeDpkM19uc1ByZWZpeCxxdWFsaWZ5OmZ1bmN0aW9uKG5hbWUpe3ZhciBpPW5hbWUuaW5kZXhPZihcIjpcIikscHJlZml4PW5hbWU7aWYoaT49MCl7cHJlZml4PW5hbWUuc3Vic3RyaW5nKDAsaSk7bmFtZT1uYW1lLnN1YnN0cmluZyhpKzEpfXJldHVybiBkM19uc1ByZWZpeC5oYXNPd25Qcm9wZXJ0eShwcmVmaXgpP3tzcGFjZTpkM19uc1ByZWZpeFtwcmVmaXhdLGxvY2FsOm5hbWV9Om5hbWV9fTtkMy5yZWJpbmQ9ZnVuY3Rpb24odGFyZ2V0LHNvdXJjZSl7dmFyIGk9MSxuPWFyZ3VtZW50cy5sZW5ndGgsbWV0aG9kO3doaWxlKCsraTxuKXRhcmdldFttZXRob2Q9YXJndW1lbnRzW2ldXT1kM19yZWJpbmQodGFyZ2V0LHNvdXJjZSxzb3VyY2VbbWV0aG9kXSk7cmV0dXJuIHRhcmdldH07ZnVuY3Rpb24gZDNfcmViaW5kKHRhcmdldCxzb3VyY2UsbWV0aG9kKXtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgdmFsdWU9bWV0aG9kLmFwcGx5KHNvdXJjZSxhcmd1bWVudHMpO3JldHVybiB2YWx1ZT09PXNvdXJjZT90YXJnZXQ6dmFsdWV9fWQzLnN2Zz17fTt2YXIgz4A9TWF0aC5QSSzPhD0yKs+ALGhhbGbPgD3PgC8yLM61PTFlLTYszrUyPc61Ks61LGQzX3JhZGlhbnM9z4AvMTgwLGQzX2RlZ3JlZXM9MTgwL8+AO2Z1bmN0aW9uIGQzX3Nnbih4KXtyZXR1cm4geD4wPzE6eDwwPy0xOjB9ZnVuY3Rpb24gZDNfY3Jvc3MyZChhLGIsYyl7cmV0dXJuKGJbMF0tYVswXSkqKGNbMV0tYVsxXSktKGJbMV0tYVsxXSkqKGNbMF0tYVswXSl9ZnVuY3Rpb24gZDNfYWNvcyh4KXtyZXR1cm4geD4xPzA6eDwtMT/PgDpNYXRoLmFjb3MoeCl9ZnVuY3Rpb24gZDNfYXNpbih4KXtyZXR1cm4geD4xP2hhbGbPgDp4PC0xPy1oYWxmz4A6TWF0aC5hc2luKHgpfWZ1bmN0aW9uIGQzX3NpbmgoeCl7cmV0dXJuKCh4PU1hdGguZXhwKHgpKS0xL3gpLzJ9ZnVuY3Rpb24gZDNfY29zaCh4KXtyZXR1cm4oKHg9TWF0aC5leHAoeCkpKzEveCkvMn1mdW5jdGlvbiBkM190YW5oKHgpe3JldHVybigoeD1NYXRoLmV4cCgyKngpKS0xKS8oeCsxKX1mdW5jdGlvbiBkM19oYXZlcnNpbih4KXtyZXR1cm4oeD1NYXRoLnNpbih4LzIpKSp4fWQzLnN2Zy5hcmM9ZnVuY3Rpb24oKXt2YXIgaW5uZXJSYWRpdXM9ZDNfc3ZnX2FyY0lubmVyUmFkaXVzLG91dGVyUmFkaXVzPWQzX3N2Z19hcmNPdXRlclJhZGl1cyxzdGFydEFuZ2xlPWQzX3N2Z19hcmNTdGFydEFuZ2xlLGVuZEFuZ2xlPWQzX3N2Z19hcmNFbmRBbmdsZTtmdW5jdGlvbiBhcmMoKXt2YXIgcjA9aW5uZXJSYWRpdXMuYXBwbHkodGhpcyxhcmd1bWVudHMpLHIxPW91dGVyUmFkaXVzLmFwcGx5KHRoaXMsYXJndW1lbnRzKSxhMD1zdGFydEFuZ2xlLmFwcGx5KHRoaXMsYXJndW1lbnRzKStkM19zdmdfYXJjT2Zmc2V0LGExPWVuZEFuZ2xlLmFwcGx5KHRoaXMsYXJndW1lbnRzKStkM19zdmdfYXJjT2Zmc2V0LGRhPShhMTxhMCYmKGRhPWEwLGEwPWExLGExPWRhKSxhMS1hMCksZGY9ZGE8z4A/XCIwXCI6XCIxXCIsYzA9TWF0aC5jb3MoYTApLHMwPU1hdGguc2luKGEwKSxjMT1NYXRoLmNvcyhhMSksczE9TWF0aC5zaW4oYTEpO3JldHVybiBkYT49ZDNfc3ZnX2FyY01heD9yMD9cIk0wLFwiK3IxK1wiQVwiK3IxK1wiLFwiK3IxK1wiIDAgMSwxIDAsXCIrLXIxK1wiQVwiK3IxK1wiLFwiK3IxK1wiIDAgMSwxIDAsXCIrcjErXCJNMCxcIityMCtcIkFcIityMCtcIixcIityMCtcIiAwIDEsMCAwLFwiKy1yMCtcIkFcIityMCtcIixcIityMCtcIiAwIDEsMCAwLFwiK3IwK1wiWlwiOlwiTTAsXCIrcjErXCJBXCIrcjErXCIsXCIrcjErXCIgMCAxLDEgMCxcIistcjErXCJBXCIrcjErXCIsXCIrcjErXCIgMCAxLDEgMCxcIityMStcIlpcIjpyMD9cIk1cIityMSpjMCtcIixcIityMSpzMCtcIkFcIityMStcIixcIityMStcIiAwIFwiK2RmK1wiLDEgXCIrcjEqYzErXCIsXCIrcjEqczErXCJMXCIrcjAqYzErXCIsXCIrcjAqczErXCJBXCIrcjArXCIsXCIrcjArXCIgMCBcIitkZitcIiwwIFwiK3IwKmMwK1wiLFwiK3IwKnMwK1wiWlwiOlwiTVwiK3IxKmMwK1wiLFwiK3IxKnMwK1wiQVwiK3IxK1wiLFwiK3IxK1wiIDAgXCIrZGYrXCIsMSBcIityMSpjMStcIixcIityMSpzMStcIkwwLDBcIitcIlpcIn1hcmMuaW5uZXJSYWRpdXM9ZnVuY3Rpb24odil7aWYoIWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGlubmVyUmFkaXVzO2lubmVyUmFkaXVzPWQzX2Z1bmN0b3Iodik7cmV0dXJuIGFyY307YXJjLm91dGVyUmFkaXVzPWZ1bmN0aW9uKHYpe2lmKCFhcmd1bWVudHMubGVuZ3RoKXJldHVybiBvdXRlclJhZGl1cztvdXRlclJhZGl1cz1kM19mdW5jdG9yKHYpO3JldHVybiBhcmN9O2FyYy5zdGFydEFuZ2xlPWZ1bmN0aW9uKHYpe2lmKCFhcmd1bWVudHMubGVuZ3RoKXJldHVybiBzdGFydEFuZ2xlO3N0YXJ0QW5nbGU9ZDNfZnVuY3Rvcih2KTtyZXR1cm4gYXJjfTthcmMuZW5kQW5nbGU9ZnVuY3Rpb24odil7aWYoIWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGVuZEFuZ2xlO2VuZEFuZ2xlPWQzX2Z1bmN0b3Iodik7cmV0dXJuIGFyY307YXJjLmNlbnRyb2lkPWZ1bmN0aW9uKCl7dmFyIHI9KGlubmVyUmFkaXVzLmFwcGx5KHRoaXMsYXJndW1lbnRzKStvdXRlclJhZGl1cy5hcHBseSh0aGlzLGFyZ3VtZW50cykpLzIsYT0oc3RhcnRBbmdsZS5hcHBseSh0aGlzLGFyZ3VtZW50cykrZW5kQW5nbGUuYXBwbHkodGhpcyxhcmd1bWVudHMpKS8yK2QzX3N2Z19hcmNPZmZzZXQ7cmV0dXJuW01hdGguY29zKGEpKnIsTWF0aC5zaW4oYSkqcl19O3JldHVybiBhcmN9O3ZhciBkM19zdmdfYXJjT2Zmc2V0PS1oYWxmz4AsZDNfc3ZnX2FyY01heD3PhC3OtTtmdW5jdGlvbiBkM19zdmdfYXJjSW5uZXJSYWRpdXMoZCl7cmV0dXJuIGQuaW5uZXJSYWRpdXN9ZnVuY3Rpb24gZDNfc3ZnX2FyY091dGVyUmFkaXVzKGQpe3JldHVybiBkLm91dGVyUmFkaXVzfWZ1bmN0aW9uIGQzX3N2Z19hcmNTdGFydEFuZ2xlKGQpe3JldHVybiBkLnN0YXJ0QW5nbGV9ZnVuY3Rpb24gZDNfc3ZnX2FyY0VuZEFuZ2xlKGQpe3JldHVybiBkLmVuZEFuZ2xlfWZ1bmN0aW9uIGQzX2lkZW50aXR5KGQpe3JldHVybiBkfWZ1bmN0aW9uIGQzX3RydWUoKXtyZXR1cm4gdHJ1ZX1mdW5jdGlvbiBkM19nZW9tX3BvaW50WChkKXtyZXR1cm4gZFswXX1mdW5jdGlvbiBkM19nZW9tX3BvaW50WShkKXtyZXR1cm4gZFsxXX1mdW5jdGlvbiBkM19zdmdfbGluZShwcm9qZWN0aW9uKXt2YXIgeD1kM19nZW9tX3BvaW50WCx5PWQzX2dlb21fcG9pbnRZLGRlZmluZWQ9ZDNfdHJ1ZSxpbnRlcnBvbGF0ZT1kM19zdmdfbGluZUxpbmVhcixpbnRlcnBvbGF0ZUtleT1pbnRlcnBvbGF0ZS5rZXksdGVuc2lvbj0uNztmdW5jdGlvbiBsaW5lKGRhdGEpe3ZhciBzZWdtZW50cz1bXSxwb2ludHM9W10saT0tMSxuPWRhdGEubGVuZ3RoLGQsZng9ZDNfZnVuY3Rvcih4KSxmeT1kM19mdW5jdG9yKHkpO2Z1bmN0aW9uIHNlZ21lbnQoKXtzZWdtZW50cy5wdXNoKFwiTVwiLGludGVycG9sYXRlKHByb2plY3Rpb24ocG9pbnRzKSx0ZW5zaW9uKSl9d2hpbGUoKytpPG4pe2lmKGRlZmluZWQuY2FsbCh0aGlzLGQ9ZGF0YVtpXSxpKSl7cG9pbnRzLnB1c2goWytmeC5jYWxsKHRoaXMsZCxpKSwrZnkuY2FsbCh0aGlzLGQsaSldKX1lbHNlIGlmKHBvaW50cy5sZW5ndGgpe3NlZ21lbnQoKTtwb2ludHM9W119fWlmKHBvaW50cy5sZW5ndGgpc2VnbWVudCgpO3JldHVybiBzZWdtZW50cy5sZW5ndGg/c2VnbWVudHMuam9pbihcIlwiKTpudWxsfWxpbmUueD1mdW5jdGlvbihfKXtpZighYXJndW1lbnRzLmxlbmd0aClyZXR1cm4geDt4PV87cmV0dXJuIGxpbmV9O2xpbmUueT1mdW5jdGlvbihfKXtpZighYXJndW1lbnRzLmxlbmd0aClyZXR1cm4geTt5PV87cmV0dXJuIGxpbmV9O2xpbmUuZGVmaW5lZD1mdW5jdGlvbihfKXtpZighYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gZGVmaW5lZDtkZWZpbmVkPV87cmV0dXJuIGxpbmV9O2xpbmUuaW50ZXJwb2xhdGU9ZnVuY3Rpb24oXyl7aWYoIWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIGludGVycG9sYXRlS2V5O2lmKHR5cGVvZiBfPT09XCJmdW5jdGlvblwiKWludGVycG9sYXRlS2V5PWludGVycG9sYXRlPV87ZWxzZSBpbnRlcnBvbGF0ZUtleT0oaW50ZXJwb2xhdGU9ZDNfc3ZnX2xpbmVJbnRlcnBvbGF0b3JzLmdldChfKXx8ZDNfc3ZnX2xpbmVMaW5lYXIpLmtleTtyZXR1cm4gbGluZX07bGluZS50ZW5zaW9uPWZ1bmN0aW9uKF8pe2lmKCFhcmd1bWVudHMubGVuZ3RoKXJldHVybiB0ZW5zaW9uO3RlbnNpb249XztyZXR1cm4gbGluZX07cmV0dXJuIGxpbmV9ZDMuc3ZnLmxpbmU9ZnVuY3Rpb24oKXtyZXR1cm4gZDNfc3ZnX2xpbmUoZDNfaWRlbnRpdHkpfTt2YXIgZDNfc3ZnX2xpbmVJbnRlcnBvbGF0b3JzPWQzLm1hcCh7bGluZWFyOmQzX3N2Z19saW5lTGluZWFyLFwibGluZWFyLWNsb3NlZFwiOmQzX3N2Z19saW5lTGluZWFyQ2xvc2VkLHN0ZXA6ZDNfc3ZnX2xpbmVTdGVwLFwic3RlcC1iZWZvcmVcIjpkM19zdmdfbGluZVN0ZXBCZWZvcmUsXCJzdGVwLWFmdGVyXCI6ZDNfc3ZnX2xpbmVTdGVwQWZ0ZXIsYmFzaXM6ZDNfc3ZnX2xpbmVCYXNpcyxcImJhc2lzLW9wZW5cIjpkM19zdmdfbGluZUJhc2lzT3BlbixcImJhc2lzLWNsb3NlZFwiOmQzX3N2Z19saW5lQmFzaXNDbG9zZWQsYnVuZGxlOmQzX3N2Z19saW5lQnVuZGxlLGNhcmRpbmFsOmQzX3N2Z19saW5lQ2FyZGluYWwsXCJjYXJkaW5hbC1vcGVuXCI6ZDNfc3ZnX2xpbmVDYXJkaW5hbE9wZW4sXCJjYXJkaW5hbC1jbG9zZWRcIjpkM19zdmdfbGluZUNhcmRpbmFsQ2xvc2VkLG1vbm90b25lOmQzX3N2Z19saW5lTW9ub3RvbmV9KTtkM19zdmdfbGluZUludGVycG9sYXRvcnMuZm9yRWFjaChmdW5jdGlvbihrZXksdmFsdWUpe3ZhbHVlLmtleT1rZXk7dmFsdWUuY2xvc2VkPS8tY2xvc2VkJC8udGVzdChrZXkpfSk7ZnVuY3Rpb24gZDNfc3ZnX2xpbmVMaW5lYXIocG9pbnRzKXtyZXR1cm4gcG9pbnRzLmpvaW4oXCJMXCIpfWZ1bmN0aW9uIGQzX3N2Z19saW5lTGluZWFyQ2xvc2VkKHBvaW50cyl7cmV0dXJuIGQzX3N2Z19saW5lTGluZWFyKHBvaW50cykrXCJaXCJ9ZnVuY3Rpb24gZDNfc3ZnX2xpbmVTdGVwKHBvaW50cyl7dmFyIGk9MCxuPXBvaW50cy5sZW5ndGgscD1wb2ludHNbMF0scGF0aD1bcFswXSxcIixcIixwWzFdXTt3aGlsZSgrK2k8bilwYXRoLnB1c2goXCJIXCIsKHBbMF0rKHA9cG9pbnRzW2ldKVswXSkvMixcIlZcIixwWzFdKTtpZihuPjEpcGF0aC5wdXNoKFwiSFwiLHBbMF0pO3JldHVybiBwYXRoLmpvaW4oXCJcIil9ZnVuY3Rpb24gZDNfc3ZnX2xpbmVTdGVwQmVmb3JlKHBvaW50cyl7dmFyIGk9MCxuPXBvaW50cy5sZW5ndGgscD1wb2ludHNbMF0scGF0aD1bcFswXSxcIixcIixwWzFdXTt3aGlsZSgrK2k8bilwYXRoLnB1c2goXCJWXCIsKHA9cG9pbnRzW2ldKVsxXSxcIkhcIixwWzBdKTtyZXR1cm4gcGF0aC5qb2luKFwiXCIpfWZ1bmN0aW9uIGQzX3N2Z19saW5lU3RlcEFmdGVyKHBvaW50cyl7dmFyIGk9MCxuPXBvaW50cy5sZW5ndGgscD1wb2ludHNbMF0scGF0aD1bcFswXSxcIixcIixwWzFdXTt3aGlsZSgrK2k8bilwYXRoLnB1c2goXCJIXCIsKHA9cG9pbnRzW2ldKVswXSxcIlZcIixwWzFdKTtyZXR1cm4gcGF0aC5qb2luKFwiXCIpfWZ1bmN0aW9uIGQzX3N2Z19saW5lQ2FyZGluYWxPcGVuKHBvaW50cyx0ZW5zaW9uKXtyZXR1cm4gcG9pbnRzLmxlbmd0aDw0P2QzX3N2Z19saW5lTGluZWFyKHBvaW50cyk6cG9pbnRzWzFdK2QzX3N2Z19saW5lSGVybWl0ZShwb2ludHMuc2xpY2UoMSxwb2ludHMubGVuZ3RoLTEpLGQzX3N2Z19saW5lQ2FyZGluYWxUYW5nZW50cyhwb2ludHMsdGVuc2lvbikpfWZ1bmN0aW9uIGQzX3N2Z19saW5lQ2FyZGluYWxDbG9zZWQocG9pbnRzLHRlbnNpb24pe3JldHVybiBwb2ludHMubGVuZ3RoPDM/ZDNfc3ZnX2xpbmVMaW5lYXIocG9pbnRzKTpwb2ludHNbMF0rZDNfc3ZnX2xpbmVIZXJtaXRlKChwb2ludHMucHVzaChwb2ludHNbMF0pLHBvaW50cyksZDNfc3ZnX2xpbmVDYXJkaW5hbFRhbmdlbnRzKFtwb2ludHNbcG9pbnRzLmxlbmd0aC0yXV0uY29uY2F0KHBvaW50cyxbcG9pbnRzWzFdXSksdGVuc2lvbikpfWZ1bmN0aW9uIGQzX3N2Z19saW5lQ2FyZGluYWwocG9pbnRzLHRlbnNpb24pe3JldHVybiBwb2ludHMubGVuZ3RoPDM/ZDNfc3ZnX2xpbmVMaW5lYXIocG9pbnRzKTpwb2ludHNbMF0rZDNfc3ZnX2xpbmVIZXJtaXRlKHBvaW50cyxkM19zdmdfbGluZUNhcmRpbmFsVGFuZ2VudHMocG9pbnRzLHRlbnNpb24pKX1mdW5jdGlvbiBkM19zdmdfbGluZUhlcm1pdGUocG9pbnRzLHRhbmdlbnRzKXtpZih0YW5nZW50cy5sZW5ndGg8MXx8cG9pbnRzLmxlbmd0aCE9dGFuZ2VudHMubGVuZ3RoJiZwb2ludHMubGVuZ3RoIT10YW5nZW50cy5sZW5ndGgrMil7cmV0dXJuIGQzX3N2Z19saW5lTGluZWFyKHBvaW50cyl9dmFyIHF1YWQ9cG9pbnRzLmxlbmd0aCE9dGFuZ2VudHMubGVuZ3RoLHBhdGg9XCJcIixwMD1wb2ludHNbMF0scD1wb2ludHNbMV0sdDA9dGFuZ2VudHNbMF0sdD10MCxwaT0xO2lmKHF1YWQpe3BhdGgrPVwiUVwiKyhwWzBdLXQwWzBdKjIvMykrXCIsXCIrKHBbMV0tdDBbMV0qMi8zKStcIixcIitwWzBdK1wiLFwiK3BbMV07cDA9cG9pbnRzWzFdO3BpPTJ9aWYodGFuZ2VudHMubGVuZ3RoPjEpe3Q9dGFuZ2VudHNbMV07cD1wb2ludHNbcGldO3BpKys7cGF0aCs9XCJDXCIrKHAwWzBdK3QwWzBdKStcIixcIisocDBbMV0rdDBbMV0pK1wiLFwiKyhwWzBdLXRbMF0pK1wiLFwiKyhwWzFdLXRbMV0pK1wiLFwiK3BbMF0rXCIsXCIrcFsxXTtmb3IodmFyIGk9MjtpPHRhbmdlbnRzLmxlbmd0aDtpKysscGkrKyl7cD1wb2ludHNbcGldO3Q9dGFuZ2VudHNbaV07cGF0aCs9XCJTXCIrKHBbMF0tdFswXSkrXCIsXCIrKHBbMV0tdFsxXSkrXCIsXCIrcFswXStcIixcIitwWzFdfX1pZihxdWFkKXt2YXIgbHA9cG9pbnRzW3BpXTtwYXRoKz1cIlFcIisocFswXSt0WzBdKjIvMykrXCIsXCIrKHBbMV0rdFsxXSoyLzMpK1wiLFwiK2xwWzBdK1wiLFwiK2xwWzFdfXJldHVybiBwYXRofWZ1bmN0aW9uIGQzX3N2Z19saW5lQ2FyZGluYWxUYW5nZW50cyhwb2ludHMsdGVuc2lvbil7dmFyIHRhbmdlbnRzPVtdLGE9KDEtdGVuc2lvbikvMixwMCxwMT1wb2ludHNbMF0scDI9cG9pbnRzWzFdLGk9MSxuPXBvaW50cy5sZW5ndGg7d2hpbGUoKytpPG4pe3AwPXAxO3AxPXAyO3AyPXBvaW50c1tpXTt0YW5nZW50cy5wdXNoKFthKihwMlswXS1wMFswXSksYSoocDJbMV0tcDBbMV0pXSl9cmV0dXJuIHRhbmdlbnRzfWZ1bmN0aW9uIGQzX3N2Z19saW5lQmFzaXMocG9pbnRzKXtpZihwb2ludHMubGVuZ3RoPDMpcmV0dXJuIGQzX3N2Z19saW5lTGluZWFyKHBvaW50cyk7dmFyIGk9MSxuPXBvaW50cy5sZW5ndGgscGk9cG9pbnRzWzBdLHgwPXBpWzBdLHkwPXBpWzFdLHB4PVt4MCx4MCx4MCwocGk9cG9pbnRzWzFdKVswXV0scHk9W3kwLHkwLHkwLHBpWzFdXSxwYXRoPVt4MCxcIixcIix5MCxcIkxcIixkM19zdmdfbGluZURvdDQoZDNfc3ZnX2xpbmVCYXNpc0JlemllcjMscHgpLFwiLFwiLGQzX3N2Z19saW5lRG90NChkM19zdmdfbGluZUJhc2lzQmV6aWVyMyxweSldO3BvaW50cy5wdXNoKHBvaW50c1tuLTFdKTt3aGlsZSgrK2k8PW4pe3BpPXBvaW50c1tpXTtweC5zaGlmdCgpO3B4LnB1c2gocGlbMF0pO3B5LnNoaWZ0KCk7cHkucHVzaChwaVsxXSk7ZDNfc3ZnX2xpbmVCYXNpc0JlemllcihwYXRoLHB4LHB5KX1wb2ludHMucG9wKCk7cGF0aC5wdXNoKFwiTFwiLHBpKTtyZXR1cm4gcGF0aC5qb2luKFwiXCIpfWZ1bmN0aW9uIGQzX3N2Z19saW5lQmFzaXNPcGVuKHBvaW50cyl7aWYocG9pbnRzLmxlbmd0aDw0KXJldHVybiBkM19zdmdfbGluZUxpbmVhcihwb2ludHMpO3ZhciBwYXRoPVtdLGk9LTEsbj1wb2ludHMubGVuZ3RoLHBpLHB4PVswXSxweT1bMF07d2hpbGUoKytpPDMpe3BpPXBvaW50c1tpXTtweC5wdXNoKHBpWzBdKTtweS5wdXNoKHBpWzFdKX1wYXRoLnB1c2goZDNfc3ZnX2xpbmVEb3Q0KGQzX3N2Z19saW5lQmFzaXNCZXppZXIzLHB4KStcIixcIitkM19zdmdfbGluZURvdDQoZDNfc3ZnX2xpbmVCYXNpc0JlemllcjMscHkpKTstLWk7d2hpbGUoKytpPG4pe3BpPXBvaW50c1tpXTtweC5zaGlmdCgpO3B4LnB1c2gocGlbMF0pO3B5LnNoaWZ0KCk7cHkucHVzaChwaVsxXSk7ZDNfc3ZnX2xpbmVCYXNpc0JlemllcihwYXRoLHB4LHB5KX1yZXR1cm4gcGF0aC5qb2luKFwiXCIpfWZ1bmN0aW9uIGQzX3N2Z19saW5lQmFzaXNDbG9zZWQocG9pbnRzKXt2YXIgcGF0aCxpPS0xLG49cG9pbnRzLmxlbmd0aCxtPW4rNCxwaSxweD1bXSxweT1bXTt3aGlsZSgrK2k8NCl7cGk9cG9pbnRzW2klbl07cHgucHVzaChwaVswXSk7cHkucHVzaChwaVsxXSl9cGF0aD1bZDNfc3ZnX2xpbmVEb3Q0KGQzX3N2Z19saW5lQmFzaXNCZXppZXIzLHB4KSxcIixcIixkM19zdmdfbGluZURvdDQoZDNfc3ZnX2xpbmVCYXNpc0JlemllcjMscHkpXTstLWk7d2hpbGUoKytpPG0pe3BpPXBvaW50c1tpJW5dO3B4LnNoaWZ0KCk7cHgucHVzaChwaVswXSk7cHkuc2hpZnQoKTtweS5wdXNoKHBpWzFdKTtkM19zdmdfbGluZUJhc2lzQmV6aWVyKHBhdGgscHgscHkpfXJldHVybiBwYXRoLmpvaW4oXCJcIil9ZnVuY3Rpb24gZDNfc3ZnX2xpbmVCdW5kbGUocG9pbnRzLHRlbnNpb24pe3ZhciBuPXBvaW50cy5sZW5ndGgtMTtpZihuKXt2YXIgeDA9cG9pbnRzWzBdWzBdLHkwPXBvaW50c1swXVsxXSxkeD1wb2ludHNbbl1bMF0teDAsZHk9cG9pbnRzW25dWzFdLXkwLGk9LTEscCx0O3doaWxlKCsraTw9bil7cD1wb2ludHNbaV07dD1pL247cFswXT10ZW5zaW9uKnBbMF0rKDEtdGVuc2lvbikqKHgwK3QqZHgpO3BbMV09dGVuc2lvbipwWzFdKygxLXRlbnNpb24pKih5MCt0KmR5KX19cmV0dXJuIGQzX3N2Z19saW5lQmFzaXMocG9pbnRzKX1mdW5jdGlvbiBkM19zdmdfbGluZURvdDQoYSxiKXtyZXR1cm4gYVswXSpiWzBdK2FbMV0qYlsxXSthWzJdKmJbMl0rYVszXSpiWzNdfXZhciBkM19zdmdfbGluZUJhc2lzQmV6aWVyMT1bMCwyLzMsMS8zLDBdLGQzX3N2Z19saW5lQmFzaXNCZXppZXIyPVswLDEvMywyLzMsMF0sZDNfc3ZnX2xpbmVCYXNpc0JlemllcjM9WzAsMS82LDIvMywxLzZdO2Z1bmN0aW9uIGQzX3N2Z19saW5lQmFzaXNCZXppZXIocGF0aCx4LHkpe3BhdGgucHVzaChcIkNcIixkM19zdmdfbGluZURvdDQoZDNfc3ZnX2xpbmVCYXNpc0JlemllcjEseCksXCIsXCIsZDNfc3ZnX2xpbmVEb3Q0KGQzX3N2Z19saW5lQmFzaXNCZXppZXIxLHkpLFwiLFwiLGQzX3N2Z19saW5lRG90NChkM19zdmdfbGluZUJhc2lzQmV6aWVyMix4KSxcIixcIixkM19zdmdfbGluZURvdDQoZDNfc3ZnX2xpbmVCYXNpc0JlemllcjIseSksXCIsXCIsZDNfc3ZnX2xpbmVEb3Q0KGQzX3N2Z19saW5lQmFzaXNCZXppZXIzLHgpLFwiLFwiLGQzX3N2Z19saW5lRG90NChkM19zdmdfbGluZUJhc2lzQmV6aWVyMyx5KSl9ZnVuY3Rpb24gZDNfc3ZnX2xpbmVTbG9wZShwMCxwMSl7cmV0dXJuKHAxWzFdLXAwWzFdKS8ocDFbMF0tcDBbMF0pfWZ1bmN0aW9uIGQzX3N2Z19saW5lRmluaXRlRGlmZmVyZW5jZXMocG9pbnRzKXt2YXIgaT0wLGo9cG9pbnRzLmxlbmd0aC0xLG09W10scDA9cG9pbnRzWzBdLHAxPXBvaW50c1sxXSxkPW1bMF09ZDNfc3ZnX2xpbmVTbG9wZShwMCxwMSk7d2hpbGUoKytpPGope21baV09KGQrKGQ9ZDNfc3ZnX2xpbmVTbG9wZShwMD1wMSxwMT1wb2ludHNbaSsxXSkpKS8yfW1baV09ZDtyZXR1cm4gbX1mdW5jdGlvbiBkM19zdmdfbGluZU1vbm90b25lVGFuZ2VudHMocG9pbnRzKXt2YXIgdGFuZ2VudHM9W10sZCxhLGIscyxtPWQzX3N2Z19saW5lRmluaXRlRGlmZmVyZW5jZXMocG9pbnRzKSxpPS0xLGo9cG9pbnRzLmxlbmd0aC0xO3doaWxlKCsraTxqKXtkPWQzX3N2Z19saW5lU2xvcGUocG9pbnRzW2ldLHBvaW50c1tpKzFdKTtpZihhYnMoZCk8zrUpe21baV09bVtpKzFdPTB9ZWxzZXthPW1baV0vZDtiPW1baSsxXS9kO3M9YSphK2IqYjtpZihzPjkpe3M9ZCozL01hdGguc3FydChzKTttW2ldPXMqYTttW2krMV09cypifX19aT0tMTt3aGlsZSgrK2k8PWope3M9KHBvaW50c1tNYXRoLm1pbihqLGkrMSldWzBdLXBvaW50c1tNYXRoLm1heCgwLGktMSldWzBdKS8oNiooMSttW2ldKm1baV0pKTt0YW5nZW50cy5wdXNoKFtzfHwwLG1baV0qc3x8MF0pfXJldHVybiB0YW5nZW50c31mdW5jdGlvbiBkM19zdmdfbGluZU1vbm90b25lKHBvaW50cyl7cmV0dXJuIHBvaW50cy5sZW5ndGg8Mz9kM19zdmdfbGluZUxpbmVhcihwb2ludHMpOnBvaW50c1swXStkM19zdmdfbGluZUhlcm1pdGUocG9pbnRzLGQzX3N2Z19saW5lTW9ub3RvbmVUYW5nZW50cyhwb2ludHMpKX1kMy5zdmcubGluZS5yYWRpYWw9ZnVuY3Rpb24oKXt2YXIgbGluZT1kM19zdmdfbGluZShkM19zdmdfbGluZVJhZGlhbCk7bGluZS5yYWRpdXM9bGluZS54LGRlbGV0ZSBsaW5lLng7bGluZS5hbmdsZT1saW5lLnksZGVsZXRlIGxpbmUueTtyZXR1cm4gbGluZX07ZnVuY3Rpb24gZDNfc3ZnX2xpbmVSYWRpYWwocG9pbnRzKXt2YXIgcG9pbnQsaT0tMSxuPXBvaW50cy5sZW5ndGgscixhO3doaWxlKCsraTxuKXtwb2ludD1wb2ludHNbaV07cj1wb2ludFswXTthPXBvaW50WzFdK2QzX3N2Z19hcmNPZmZzZXQ7cG9pbnRbMF09cipNYXRoLmNvcyhhKTtwb2ludFsxXT1yKk1hdGguc2luKGEpfXJldHVybiBwb2ludHN9ZnVuY3Rpb24gZDNfc3ZnX2FyZWEocHJvamVjdGlvbil7dmFyIHgwPWQzX2dlb21fcG9pbnRYLHgxPWQzX2dlb21fcG9pbnRYLHkwPTAseTE9ZDNfZ2VvbV9wb2ludFksZGVmaW5lZD1kM190cnVlLGludGVycG9sYXRlPWQzX3N2Z19saW5lTGluZWFyLGludGVycG9sYXRlS2V5PWludGVycG9sYXRlLmtleSxpbnRlcnBvbGF0ZVJldmVyc2U9aW50ZXJwb2xhdGUsTD1cIkxcIix0ZW5zaW9uPS43O2Z1bmN0aW9uIGFyZWEoZGF0YSl7dmFyIHNlZ21lbnRzPVtdLHBvaW50czA9W10scG9pbnRzMT1bXSxpPS0xLG49ZGF0YS5sZW5ndGgsZCxmeDA9ZDNfZnVuY3Rvcih4MCksZnkwPWQzX2Z1bmN0b3IoeTApLGZ4MT14MD09PXgxP2Z1bmN0aW9uKCl7cmV0dXJuIHh9OmQzX2Z1bmN0b3IoeDEpLGZ5MT15MD09PXkxP2Z1bmN0aW9uKCl7cmV0dXJuIHl9OmQzX2Z1bmN0b3IoeTEpLHgseTtmdW5jdGlvbiBzZWdtZW50KCl7c2VnbWVudHMucHVzaChcIk1cIixpbnRlcnBvbGF0ZShwcm9qZWN0aW9uKHBvaW50czEpLHRlbnNpb24pLEwsaW50ZXJwb2xhdGVSZXZlcnNlKHByb2plY3Rpb24ocG9pbnRzMC5yZXZlcnNlKCkpLHRlbnNpb24pLFwiWlwiKX13aGlsZSgrK2k8bil7aWYoZGVmaW5lZC5jYWxsKHRoaXMsZD1kYXRhW2ldLGkpKXtwb2ludHMwLnB1c2goW3g9K2Z4MC5jYWxsKHRoaXMsZCxpKSx5PStmeTAuY2FsbCh0aGlzLGQsaSldKTtwb2ludHMxLnB1c2goWytmeDEuY2FsbCh0aGlzLGQsaSksK2Z5MS5jYWxsKHRoaXMsZCxpKV0pfWVsc2UgaWYocG9pbnRzMC5sZW5ndGgpe3NlZ21lbnQoKTtwb2ludHMwPVtdO3BvaW50czE9W119fWlmKHBvaW50czAubGVuZ3RoKXNlZ21lbnQoKTtyZXR1cm4gc2VnbWVudHMubGVuZ3RoP3NlZ21lbnRzLmpvaW4oXCJcIik6bnVsbH1hcmVhLng9ZnVuY3Rpb24oXyl7aWYoIWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHgxO3gwPXgxPV87cmV0dXJuIGFyZWF9O2FyZWEueDA9ZnVuY3Rpb24oXyl7aWYoIWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHgwO3gwPV87cmV0dXJuIGFyZWF9O2FyZWEueDE9ZnVuY3Rpb24oXyl7aWYoIWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHgxO3gxPV87cmV0dXJuIGFyZWF9O2FyZWEueT1mdW5jdGlvbihfKXtpZighYXJndW1lbnRzLmxlbmd0aClyZXR1cm4geTE7eTA9eTE9XztyZXR1cm4gYXJlYX07YXJlYS55MD1mdW5jdGlvbihfKXtpZighYXJndW1lbnRzLmxlbmd0aClyZXR1cm4geTA7eTA9XztyZXR1cm4gYXJlYX07YXJlYS55MT1mdW5jdGlvbihfKXtpZighYXJndW1lbnRzLmxlbmd0aClyZXR1cm4geTE7eTE9XztyZXR1cm4gYXJlYX07YXJlYS5kZWZpbmVkPWZ1bmN0aW9uKF8pe2lmKCFhcmd1bWVudHMubGVuZ3RoKXJldHVybiBkZWZpbmVkO2RlZmluZWQ9XztyZXR1cm4gYXJlYX07YXJlYS5pbnRlcnBvbGF0ZT1mdW5jdGlvbihfKXtpZighYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gaW50ZXJwb2xhdGVLZXk7aWYodHlwZW9mIF89PT1cImZ1bmN0aW9uXCIpaW50ZXJwb2xhdGVLZXk9aW50ZXJwb2xhdGU9XztlbHNlIGludGVycG9sYXRlS2V5PShpbnRlcnBvbGF0ZT1kM19zdmdfbGluZUludGVycG9sYXRvcnMuZ2V0KF8pfHxkM19zdmdfbGluZUxpbmVhcikua2V5O2ludGVycG9sYXRlUmV2ZXJzZT1pbnRlcnBvbGF0ZS5yZXZlcnNlfHxpbnRlcnBvbGF0ZTtMPWludGVycG9sYXRlLmNsb3NlZD9cIk1cIjpcIkxcIjtyZXR1cm4gYXJlYX07YXJlYS50ZW5zaW9uPWZ1bmN0aW9uKF8pe2lmKCFhcmd1bWVudHMubGVuZ3RoKXJldHVybiB0ZW5zaW9uO3RlbnNpb249XztyZXR1cm4gYXJlYX07cmV0dXJuIGFyZWF9ZDNfc3ZnX2xpbmVTdGVwQmVmb3JlLnJldmVyc2U9ZDNfc3ZnX2xpbmVTdGVwQWZ0ZXI7ZDNfc3ZnX2xpbmVTdGVwQWZ0ZXIucmV2ZXJzZT1kM19zdmdfbGluZVN0ZXBCZWZvcmU7ZDMuc3ZnLmFyZWE9ZnVuY3Rpb24oKXtyZXR1cm4gZDNfc3ZnX2FyZWEoZDNfaWRlbnRpdHkpfTtkMy5zdmcuYXJlYS5yYWRpYWw9ZnVuY3Rpb24oKXt2YXIgYXJlYT1kM19zdmdfYXJlYShkM19zdmdfbGluZVJhZGlhbCk7YXJlYS5yYWRpdXM9YXJlYS54LGRlbGV0ZSBhcmVhLng7YXJlYS5pbm5lclJhZGl1cz1hcmVhLngwLGRlbGV0ZSBhcmVhLngwO2FyZWEub3V0ZXJSYWRpdXM9YXJlYS54MSxkZWxldGUgYXJlYS54MTthcmVhLmFuZ2xlPWFyZWEueSxkZWxldGUgYXJlYS55O2FyZWEuc3RhcnRBbmdsZT1hcmVhLnkwLGRlbGV0ZSBhcmVhLnkwO2FyZWEuZW5kQW5nbGU9YXJlYS55MSxkZWxldGUgYXJlYS55MTtyZXR1cm4gYXJlYX07ZnVuY3Rpb24gZDNfc291cmNlKGQpe3JldHVybiBkLnNvdXJjZX1mdW5jdGlvbiBkM190YXJnZXQoZCl7cmV0dXJuIGQudGFyZ2V0fWQzLnN2Zy5jaG9yZD1mdW5jdGlvbigpe3ZhciBzb3VyY2U9ZDNfc291cmNlLHRhcmdldD1kM190YXJnZXQscmFkaXVzPWQzX3N2Z19jaG9yZFJhZGl1cyxzdGFydEFuZ2xlPWQzX3N2Z19hcmNTdGFydEFuZ2xlLGVuZEFuZ2xlPWQzX3N2Z19hcmNFbmRBbmdsZTtmdW5jdGlvbiBjaG9yZChkLGkpe3ZhciBzPXN1Ymdyb3VwKHRoaXMsc291cmNlLGQsaSksdD1zdWJncm91cCh0aGlzLHRhcmdldCxkLGkpO3JldHVyblwiTVwiK3MucDArYXJjKHMucixzLnAxLHMuYTEtcy5hMCkrKGVxdWFscyhzLHQpP2N1cnZlKHMucixzLnAxLHMucixzLnAwKTpjdXJ2ZShzLnIscy5wMSx0LnIsdC5wMCkrYXJjKHQucix0LnAxLHQuYTEtdC5hMCkrY3VydmUodC5yLHQucDEscy5yLHMucDApKStcIlpcIn1mdW5jdGlvbiBzdWJncm91cChzZWxmLGYsZCxpKXt2YXIgc3ViZ3JvdXA9Zi5jYWxsKHNlbGYsZCxpKSxyPXJhZGl1cy5jYWxsKHNlbGYsc3ViZ3JvdXAsaSksYTA9c3RhcnRBbmdsZS5jYWxsKHNlbGYsc3ViZ3JvdXAsaSkrZDNfc3ZnX2FyY09mZnNldCxhMT1lbmRBbmdsZS5jYWxsKHNlbGYsc3ViZ3JvdXAsaSkrZDNfc3ZnX2FyY09mZnNldDtyZXR1cm57cjpyLGEwOmEwLGExOmExLHAwOltyKk1hdGguY29zKGEwKSxyKk1hdGguc2luKGEwKV0scDE6W3IqTWF0aC5jb3MoYTEpLHIqTWF0aC5zaW4oYTEpXX19ZnVuY3Rpb24gZXF1YWxzKGEsYil7cmV0dXJuIGEuYTA9PWIuYTAmJmEuYTE9PWIuYTF9ZnVuY3Rpb24gYXJjKHIscCxhKXtyZXR1cm5cIkFcIityK1wiLFwiK3IrXCIgMCBcIisgKyhhPs+AKStcIiwxIFwiK3B9ZnVuY3Rpb24gY3VydmUocjAscDAscjEscDEpe3JldHVyblwiUSAwLDAgXCIrcDF9Y2hvcmQucmFkaXVzPWZ1bmN0aW9uKHYpe2lmKCFhcmd1bWVudHMubGVuZ3RoKXJldHVybiByYWRpdXM7cmFkaXVzPWQzX2Z1bmN0b3Iodik7cmV0dXJuIGNob3JkfTtjaG9yZC5zb3VyY2U9ZnVuY3Rpb24odil7aWYoIWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHNvdXJjZTtzb3VyY2U9ZDNfZnVuY3Rvcih2KTtyZXR1cm4gY2hvcmR9O2Nob3JkLnRhcmdldD1mdW5jdGlvbih2KXtpZighYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gdGFyZ2V0O3RhcmdldD1kM19mdW5jdG9yKHYpO3JldHVybiBjaG9yZH07Y2hvcmQuc3RhcnRBbmdsZT1mdW5jdGlvbih2KXtpZighYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gc3RhcnRBbmdsZTtzdGFydEFuZ2xlPWQzX2Z1bmN0b3Iodik7cmV0dXJuIGNob3JkfTtjaG9yZC5lbmRBbmdsZT1mdW5jdGlvbih2KXtpZighYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gZW5kQW5nbGU7ZW5kQW5nbGU9ZDNfZnVuY3Rvcih2KTtyZXR1cm4gY2hvcmR9O3JldHVybiBjaG9yZH07ZnVuY3Rpb24gZDNfc3ZnX2Nob3JkUmFkaXVzKGQpe3JldHVybiBkLnJhZGl1c31kMy5zdmcuZGlhZ29uYWw9ZnVuY3Rpb24oKXt2YXIgc291cmNlPWQzX3NvdXJjZSx0YXJnZXQ9ZDNfdGFyZ2V0LHByb2plY3Rpb249ZDNfc3ZnX2RpYWdvbmFsUHJvamVjdGlvbjtmdW5jdGlvbiBkaWFnb25hbChkLGkpe3ZhciBwMD1zb3VyY2UuY2FsbCh0aGlzLGQsaSkscDM9dGFyZ2V0LmNhbGwodGhpcyxkLGkpLG09KHAwLnkrcDMueSkvMixwPVtwMCx7eDpwMC54LHk6bX0se3g6cDMueCx5Om19LHAzXTtwPXAubWFwKHByb2plY3Rpb24pO3JldHVyblwiTVwiK3BbMF0rXCJDXCIrcFsxXStcIiBcIitwWzJdK1wiIFwiK3BbM119ZGlhZ29uYWwuc291cmNlPWZ1bmN0aW9uKHgpe2lmKCFhcmd1bWVudHMubGVuZ3RoKXJldHVybiBzb3VyY2U7c291cmNlPWQzX2Z1bmN0b3IoeCk7cmV0dXJuIGRpYWdvbmFsfTtkaWFnb25hbC50YXJnZXQ9ZnVuY3Rpb24oeCl7aWYoIWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHRhcmdldDt0YXJnZXQ9ZDNfZnVuY3Rvcih4KTtyZXR1cm4gZGlhZ29uYWx9O2RpYWdvbmFsLnByb2plY3Rpb249ZnVuY3Rpb24oeCl7aWYoIWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHByb2plY3Rpb247cHJvamVjdGlvbj14O3JldHVybiBkaWFnb25hbH07cmV0dXJuIGRpYWdvbmFsfTtmdW5jdGlvbiBkM19zdmdfZGlhZ29uYWxQcm9qZWN0aW9uKGQpe3JldHVybltkLngsZC55XX1kMy5zdmcuZGlhZ29uYWwucmFkaWFsPWZ1bmN0aW9uKCl7dmFyIGRpYWdvbmFsPWQzLnN2Zy5kaWFnb25hbCgpLHByb2plY3Rpb249ZDNfc3ZnX2RpYWdvbmFsUHJvamVjdGlvbixwcm9qZWN0aW9uXz1kaWFnb25hbC5wcm9qZWN0aW9uO2RpYWdvbmFsLnByb2plY3Rpb249ZnVuY3Rpb24oeCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/cHJvamVjdGlvbl8oZDNfc3ZnX2RpYWdvbmFsUmFkaWFsUHJvamVjdGlvbihwcm9qZWN0aW9uPXgpKTpwcm9qZWN0aW9ufTtyZXR1cm4gZGlhZ29uYWx9O2Z1bmN0aW9uIGQzX3N2Z19kaWFnb25hbFJhZGlhbFByb2plY3Rpb24ocHJvamVjdGlvbil7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIGQ9cHJvamVjdGlvbi5hcHBseSh0aGlzLGFyZ3VtZW50cykscj1kWzBdLGE9ZFsxXStkM19zdmdfYXJjT2Zmc2V0O3JldHVybltyKk1hdGguY29zKGEpLHIqTWF0aC5zaW4oYSldfX1kMy5zdmcuc3ltYm9sPWZ1bmN0aW9uKCl7dmFyIHR5cGU9ZDNfc3ZnX3N5bWJvbFR5cGUsc2l6ZT1kM19zdmdfc3ltYm9sU2l6ZTtmdW5jdGlvbiBzeW1ib2woZCxpKXtyZXR1cm4oZDNfc3ZnX3N5bWJvbHMuZ2V0KHR5cGUuY2FsbCh0aGlzLGQsaSkpfHxkM19zdmdfc3ltYm9sQ2lyY2xlKShzaXplLmNhbGwodGhpcyxkLGkpKX1zeW1ib2wudHlwZT1mdW5jdGlvbih4KXtpZighYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gdHlwZTt0eXBlPWQzX2Z1bmN0b3IoeCk7cmV0dXJuIHN5bWJvbH07c3ltYm9sLnNpemU9ZnVuY3Rpb24oeCl7aWYoIWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHNpemU7c2l6ZT1kM19mdW5jdG9yKHgpO3JldHVybiBzeW1ib2x9O3JldHVybiBzeW1ib2x9O2Z1bmN0aW9uIGQzX3N2Z19zeW1ib2xTaXplKCl7cmV0dXJuIDY0fWZ1bmN0aW9uIGQzX3N2Z19zeW1ib2xUeXBlKCl7cmV0dXJuXCJjaXJjbGVcIn1mdW5jdGlvbiBkM19zdmdfc3ltYm9sQ2lyY2xlKHNpemUpe3ZhciByPU1hdGguc3FydChzaXplL8+AKTtyZXR1cm5cIk0wLFwiK3IrXCJBXCIrcitcIixcIityK1wiIDAgMSwxIDAsXCIrLXIrXCJBXCIrcitcIixcIityK1wiIDAgMSwxIDAsXCIrcitcIlpcIn12YXIgZDNfc3ZnX3N5bWJvbHM9ZDMubWFwKHtjaXJjbGU6ZDNfc3ZnX3N5bWJvbENpcmNsZSxjcm9zczpmdW5jdGlvbihzaXplKXt2YXIgcj1NYXRoLnNxcnQoc2l6ZS81KS8yO3JldHVyblwiTVwiKy0zKnIrXCIsXCIrLXIrXCJIXCIrLXIrXCJWXCIrLTMqcitcIkhcIityK1wiVlwiKy1yK1wiSFwiKzMqcitcIlZcIityK1wiSFwiK3IrXCJWXCIrMypyK1wiSFwiKy1yK1wiVlwiK3IrXCJIXCIrLTMqcitcIlpcIn0sZGlhbW9uZDpmdW5jdGlvbihzaXplKXt2YXIgcnk9TWF0aC5zcXJ0KHNpemUvKDIqZDNfc3ZnX3N5bWJvbFRhbjMwKSkscng9cnkqZDNfc3ZnX3N5bWJvbFRhbjMwO3JldHVyblwiTTAsXCIrLXJ5K1wiTFwiK3J4K1wiLDBcIitcIiAwLFwiK3J5K1wiIFwiKy1yeCtcIiwwXCIrXCJaXCJ9LHNxdWFyZTpmdW5jdGlvbihzaXplKXt2YXIgcj1NYXRoLnNxcnQoc2l6ZSkvMjtyZXR1cm5cIk1cIistcitcIixcIistcitcIkxcIityK1wiLFwiKy1yK1wiIFwiK3IrXCIsXCIrcitcIiBcIistcitcIixcIityK1wiWlwifSxcInRyaWFuZ2xlLWRvd25cIjpmdW5jdGlvbihzaXplKXt2YXIgcng9TWF0aC5zcXJ0KHNpemUvZDNfc3ZnX3N5bWJvbFNxcnQzKSxyeT1yeCpkM19zdmdfc3ltYm9sU3FydDMvMjtyZXR1cm5cIk0wLFwiK3J5K1wiTFwiK3J4K1wiLFwiKy1yeStcIiBcIistcngrXCIsXCIrLXJ5K1wiWlwifSxcInRyaWFuZ2xlLXVwXCI6ZnVuY3Rpb24oc2l6ZSl7dmFyIHJ4PU1hdGguc3FydChzaXplL2QzX3N2Z19zeW1ib2xTcXJ0Mykscnk9cngqZDNfc3ZnX3N5bWJvbFNxcnQzLzI7cmV0dXJuXCJNMCxcIistcnkrXCJMXCIrcngrXCIsXCIrcnkrXCIgXCIrLXJ4K1wiLFwiK3J5K1wiWlwifX0pO2QzLnN2Zy5zeW1ib2xUeXBlcz1kM19zdmdfc3ltYm9scy5rZXlzKCk7dmFyIGQzX3N2Z19zeW1ib2xTcXJ0Mz1NYXRoLnNxcnQoMyksZDNfc3ZnX3N5bWJvbFRhbjMwPU1hdGgudGFuKDMwKmQzX3JhZGlhbnMpO2Z1bmN0aW9uIGQzX0NvbG9yKCl7fWQzX0NvbG9yLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0aGlzLnJnYigpK1wiXCJ9O2QzLmhzbD1mdW5jdGlvbihoLHMsbCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg9PT0xP2ggaW5zdGFuY2VvZiBkM19Ic2w/ZDNfaHNsKGguaCxoLnMsaC5sKTpkM19yZ2JfcGFyc2UoXCJcIitoLGQzX3JnYl9oc2wsZDNfaHNsKTpkM19oc2woK2gsK3MsK2wpfTtmdW5jdGlvbiBkM19oc2woaCxzLGwpe3JldHVybiBuZXcgZDNfSHNsKGgscyxsKX1mdW5jdGlvbiBkM19Ic2woaCxzLGwpe3RoaXMuaD1oO3RoaXMucz1zO3RoaXMubD1sfXZhciBkM19oc2xQcm90b3R5cGU9ZDNfSHNsLnByb3RvdHlwZT1uZXcgZDNfQ29sb3I7ZDNfaHNsUHJvdG90eXBlLmJyaWdodGVyPWZ1bmN0aW9uKGspe2s9TWF0aC5wb3coLjcsYXJndW1lbnRzLmxlbmd0aD9rOjEpO3JldHVybiBkM19oc2wodGhpcy5oLHRoaXMucyx0aGlzLmwvayl9O2QzX2hzbFByb3RvdHlwZS5kYXJrZXI9ZnVuY3Rpb24oayl7az1NYXRoLnBvdyguNyxhcmd1bWVudHMubGVuZ3RoP2s6MSk7cmV0dXJuIGQzX2hzbCh0aGlzLmgsdGhpcy5zLGsqdGhpcy5sKX07ZDNfaHNsUHJvdG90eXBlLnJnYj1mdW5jdGlvbigpe3JldHVybiBkM19oc2xfcmdiKHRoaXMuaCx0aGlzLnMsdGhpcy5sKX07ZnVuY3Rpb24gZDNfaHNsX3JnYihoLHMsbCl7dmFyIG0xLG0yO2g9aXNOYU4oaCk/MDooaCU9MzYwKTwwP2grMzYwOmg7cz1pc05hTihzKT8wOnM8MD8wOnM+MT8xOnM7bD1sPDA/MDpsPjE/MTpsO20yPWw8PS41P2wqKDErcyk6bCtzLWwqczttMT0yKmwtbTI7ZnVuY3Rpb24gdihoKXtpZihoPjM2MCloLT0zNjA7ZWxzZSBpZihoPDApaCs9MzYwO2lmKGg8NjApcmV0dXJuIG0xKyhtMi1tMSkqaC82MDtpZihoPDE4MClyZXR1cm4gbTI7aWYoaDwyNDApcmV0dXJuIG0xKyhtMi1tMSkqKDI0MC1oKS82MDtyZXR1cm4gbTF9ZnVuY3Rpb24gdnYoaCl7cmV0dXJuIE1hdGgucm91bmQodihoKSoyNTUpfXJldHVybiBkM19yZ2IodnYoaCsxMjApLHZ2KGgpLHZ2KGgtMTIwKSl9ZDMuaGNsPWZ1bmN0aW9uKGgsYyxsKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD09PTE/aCBpbnN0YW5jZW9mIGQzX0hjbD9kM19oY2woaC5oLGguYyxoLmwpOmggaW5zdGFuY2VvZiBkM19MYWI/ZDNfbGFiX2hjbChoLmwsaC5hLGguYik6ZDNfbGFiX2hjbCgoaD1kM19yZ2JfbGFiKChoPWQzLnJnYihoKSkucixoLmcsaC5iKSkubCxoLmEsaC5iKTpkM19oY2woK2gsK2MsK2wpfTtmdW5jdGlvbiBkM19oY2woaCxjLGwpe3JldHVybiBuZXcgZDNfSGNsKGgsYyxsKX1mdW5jdGlvbiBkM19IY2woaCxjLGwpe3RoaXMuaD1oO3RoaXMuYz1jO3RoaXMubD1sfXZhciBkM19oY2xQcm90b3R5cGU9ZDNfSGNsLnByb3RvdHlwZT1uZXcgZDNfQ29sb3I7ZDNfaGNsUHJvdG90eXBlLmJyaWdodGVyPWZ1bmN0aW9uKGspe3JldHVybiBkM19oY2wodGhpcy5oLHRoaXMuYyxNYXRoLm1pbigxMDAsdGhpcy5sK2QzX2xhYl9LKihhcmd1bWVudHMubGVuZ3RoP2s6MSkpKX07ZDNfaGNsUHJvdG90eXBlLmRhcmtlcj1mdW5jdGlvbihrKXtyZXR1cm4gZDNfaGNsKHRoaXMuaCx0aGlzLmMsTWF0aC5tYXgoMCx0aGlzLmwtZDNfbGFiX0sqKGFyZ3VtZW50cy5sZW5ndGg/azoxKSkpfTtkM19oY2xQcm90b3R5cGUucmdiPWZ1bmN0aW9uKCl7cmV0dXJuIGQzX2hjbF9sYWIodGhpcy5oLHRoaXMuYyx0aGlzLmwpLnJnYigpfTtmdW5jdGlvbiBkM19oY2xfbGFiKGgsYyxsKXtpZihpc05hTihoKSloPTA7aWYoaXNOYU4oYykpYz0wO3JldHVybiBkM19sYWIobCxNYXRoLmNvcyhoKj1kM19yYWRpYW5zKSpjLE1hdGguc2luKGgpKmMpfWQzLmxhYj1mdW5jdGlvbihsLGEsYil7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg9PT0xP2wgaW5zdGFuY2VvZiBkM19MYWI/ZDNfbGFiKGwubCxsLmEsbC5iKTpsIGluc3RhbmNlb2YgZDNfSGNsP2QzX2hjbF9sYWIobC5sLGwuYyxsLmgpOmQzX3JnYl9sYWIoKGw9ZDMucmdiKGwpKS5yLGwuZyxsLmIpOmQzX2xhYigrbCwrYSwrYil9O2Z1bmN0aW9uIGQzX2xhYihsLGEsYil7cmV0dXJuIG5ldyBkM19MYWIobCxhLGIpfWZ1bmN0aW9uIGQzX0xhYihsLGEsYil7dGhpcy5sPWw7dGhpcy5hPWE7dGhpcy5iPWJ9dmFyIGQzX2xhYl9LPTE4O3ZhciBkM19sYWJfWD0uOTUwNDcsZDNfbGFiX1k9MSxkM19sYWJfWj0xLjA4ODgzO3ZhciBkM19sYWJQcm90b3R5cGU9ZDNfTGFiLnByb3RvdHlwZT1uZXcgZDNfQ29sb3I7ZDNfbGFiUHJvdG90eXBlLmJyaWdodGVyPWZ1bmN0aW9uKGspe3JldHVybiBkM19sYWIoTWF0aC5taW4oMTAwLHRoaXMubCtkM19sYWJfSyooYXJndW1lbnRzLmxlbmd0aD9rOjEpKSx0aGlzLmEsdGhpcy5iKX07ZDNfbGFiUHJvdG90eXBlLmRhcmtlcj1mdW5jdGlvbihrKXtyZXR1cm4gZDNfbGFiKE1hdGgubWF4KDAsdGhpcy5sLWQzX2xhYl9LKihhcmd1bWVudHMubGVuZ3RoP2s6MSkpLHRoaXMuYSx0aGlzLmIpfTtkM19sYWJQcm90b3R5cGUucmdiPWZ1bmN0aW9uKCl7cmV0dXJuIGQzX2xhYl9yZ2IodGhpcy5sLHRoaXMuYSx0aGlzLmIpfTtmdW5jdGlvbiBkM19sYWJfcmdiKGwsYSxiKXt2YXIgeT0obCsxNikvMTE2LHg9eSthLzUwMCx6PXktYi8yMDA7eD1kM19sYWJfeHl6KHgpKmQzX2xhYl9YO3k9ZDNfbGFiX3h5eih5KSpkM19sYWJfWTt6PWQzX2xhYl94eXooeikqZDNfbGFiX1o7cmV0dXJuIGQzX3JnYihkM194eXpfcmdiKDMuMjQwNDU0Mip4LTEuNTM3MTM4NSp5LS40OTg1MzE0KnopLGQzX3h5el9yZ2IoLS45NjkyNjYqeCsxLjg3NjAxMDgqeSsuMDQxNTU2KnopLGQzX3h5el9yZ2IoLjA1NTY0MzQqeC0uMjA0MDI1OSp5KzEuMDU3MjI1Mip6KSl9ZnVuY3Rpb24gZDNfbGFiX2hjbChsLGEsYil7cmV0dXJuIGw+MD9kM19oY2woTWF0aC5hdGFuMihiLGEpKmQzX2RlZ3JlZXMsTWF0aC5zcXJ0KGEqYStiKmIpLGwpOmQzX2hjbChOYU4sTmFOLGwpfWZ1bmN0aW9uIGQzX2xhYl94eXooeCl7cmV0dXJuIHg+LjIwNjg5MzAzND94KngqeDooeC00LzI5KS83Ljc4NzAzN31mdW5jdGlvbiBkM194eXpfbGFiKHgpe3JldHVybiB4Pi4wMDg4NTY/TWF0aC5wb3coeCwxLzMpOjcuNzg3MDM3KngrNC8yOX1mdW5jdGlvbiBkM194eXpfcmdiKHIpe3JldHVybiBNYXRoLnJvdW5kKDI1NSoocjw9LjAwMzA0PzEyLjkyKnI6MS4wNTUqTWF0aC5wb3cociwxLzIuNCktLjA1NSkpfWQzLnJnYj1mdW5jdGlvbihyLGcsYil7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg9PT0xP3IgaW5zdGFuY2VvZiBkM19SZ2I/ZDNfcmdiKHIucixyLmcsci5iKTpkM19yZ2JfcGFyc2UoXCJcIityLGQzX3JnYixkM19oc2xfcmdiKTpkM19yZ2Iofn5yLH5+Zyx+fmIpfTtmdW5jdGlvbiBkM19yZ2JOdW1iZXIodmFsdWUpe3JldHVybiBkM19yZ2IodmFsdWU+PjE2LHZhbHVlPj44JjI1NSx2YWx1ZSYyNTUpfWZ1bmN0aW9uIGQzX3JnYlN0cmluZyh2YWx1ZSl7cmV0dXJuIGQzX3JnYk51bWJlcih2YWx1ZSkrXCJcIn1mdW5jdGlvbiBkM19yZ2IocixnLGIpe3JldHVybiBuZXcgZDNfUmdiKHIsZyxiKX1mdW5jdGlvbiBkM19SZ2IocixnLGIpe3RoaXMucj1yO3RoaXMuZz1nO3RoaXMuYj1ifXZhciBkM19yZ2JQcm90b3R5cGU9ZDNfUmdiLnByb3RvdHlwZT1uZXcgZDNfQ29sb3I7ZDNfcmdiUHJvdG90eXBlLmJyaWdodGVyPWZ1bmN0aW9uKGspe2s9TWF0aC5wb3coLjcsYXJndW1lbnRzLmxlbmd0aD9rOjEpO3ZhciByPXRoaXMucixnPXRoaXMuZyxiPXRoaXMuYixpPTMwO2lmKCFyJiYhZyYmIWIpcmV0dXJuIGQzX3JnYihpLGksaSk7aWYociYmcjxpKXI9aTtpZihnJiZnPGkpZz1pO2lmKGImJmI8aSliPWk7cmV0dXJuIGQzX3JnYihNYXRoLm1pbigyNTUsfn4oci9rKSksTWF0aC5taW4oMjU1LH5+KGcvaykpLE1hdGgubWluKDI1NSx+fihiL2spKSl9O2QzX3JnYlByb3RvdHlwZS5kYXJrZXI9ZnVuY3Rpb24oayl7az1NYXRoLnBvdyguNyxhcmd1bWVudHMubGVuZ3RoP2s6MSk7cmV0dXJuIGQzX3JnYih+fihrKnRoaXMuciksfn4oayp0aGlzLmcpLH5+KGsqdGhpcy5iKSl9O2QzX3JnYlByb3RvdHlwZS5oc2w9ZnVuY3Rpb24oKXtyZXR1cm4gZDNfcmdiX2hzbCh0aGlzLnIsdGhpcy5nLHRoaXMuYil9O2QzX3JnYlByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVyblwiI1wiK2QzX3JnYl9oZXgodGhpcy5yKStkM19yZ2JfaGV4KHRoaXMuZykrZDNfcmdiX2hleCh0aGlzLmIpfTtmdW5jdGlvbiBkM19yZ2JfaGV4KHYpe3JldHVybiB2PDE2P1wiMFwiK01hdGgubWF4KDAsdikudG9TdHJpbmcoMTYpOk1hdGgubWluKDI1NSx2KS50b1N0cmluZygxNil9ZnVuY3Rpb24gZDNfcmdiX3BhcnNlKGZvcm1hdCxyZ2IsaHNsKXt2YXIgcj0wLGc9MCxiPTAsbTEsbTIsbmFtZTttMT0vKFthLXpdKylcXCgoLiopXFwpL2kuZXhlYyhmb3JtYXQpO2lmKG0xKXttMj1tMVsyXS5zcGxpdChcIixcIik7c3dpdGNoKG0xWzFdKXtjYXNlXCJoc2xcIjp7cmV0dXJuIGhzbChwYXJzZUZsb2F0KG0yWzBdKSxwYXJzZUZsb2F0KG0yWzFdKS8xMDAscGFyc2VGbG9hdChtMlsyXSkvMTAwKX1jYXNlXCJyZ2JcIjp7cmV0dXJuIHJnYihkM19yZ2JfcGFyc2VOdW1iZXIobTJbMF0pLGQzX3JnYl9wYXJzZU51bWJlcihtMlsxXSksZDNfcmdiX3BhcnNlTnVtYmVyKG0yWzJdKSl9fX1pZihuYW1lPWQzX3JnYl9uYW1lcy5nZXQoZm9ybWF0KSlyZXR1cm4gcmdiKG5hbWUucixuYW1lLmcsbmFtZS5iKTtpZihmb3JtYXQhPW51bGwmJmZvcm1hdC5jaGFyQXQoMCk9PT1cIiNcIil7aWYoZm9ybWF0Lmxlbmd0aD09PTQpe3I9Zm9ybWF0LmNoYXJBdCgxKTtyKz1yO2c9Zm9ybWF0LmNoYXJBdCgyKTtnKz1nO2I9Zm9ybWF0LmNoYXJBdCgzKTtiKz1ifWVsc2UgaWYoZm9ybWF0Lmxlbmd0aD09PTcpe3I9Zm9ybWF0LnN1YnN0cmluZygxLDMpO2c9Zm9ybWF0LnN1YnN0cmluZygzLDUpO2I9Zm9ybWF0LnN1YnN0cmluZyg1LDcpfXI9cGFyc2VJbnQociwxNik7Zz1wYXJzZUludChnLDE2KTtiPXBhcnNlSW50KGIsMTYpfXJldHVybiByZ2IocixnLGIpfWZ1bmN0aW9uIGQzX3JnYl9oc2wocixnLGIpe3ZhciBtaW49TWF0aC5taW4oci89MjU1LGcvPTI1NSxiLz0yNTUpLG1heD1NYXRoLm1heChyLGcsYiksZD1tYXgtbWluLGgscyxsPShtYXgrbWluKS8yO2lmKGQpe3M9bDwuNT9kLyhtYXgrbWluKTpkLygyLW1heC1taW4pO2lmKHI9PW1heCloPShnLWIpL2QrKGc8Yj82OjApO2Vsc2UgaWYoZz09bWF4KWg9KGItcikvZCsyO2Vsc2UgaD0oci1nKS9kKzQ7aCo9NjB9ZWxzZXtoPU5hTjtzPWw+MCYmbDwxPzA6aH1yZXR1cm4gZDNfaHNsKGgscyxsKX1mdW5jdGlvbiBkM19yZ2JfbGFiKHIsZyxiKXtyPWQzX3JnYl94eXoocik7Zz1kM19yZ2JfeHl6KGcpO2I9ZDNfcmdiX3h5eihiKTt2YXIgeD1kM194eXpfbGFiKCguNDEyNDU2NCpyKy4zNTc1NzYxKmcrLjE4MDQzNzUqYikvZDNfbGFiX1gpLHk9ZDNfeHl6X2xhYigoLjIxMjY3MjkqcisuNzE1MTUyMipnKy4wNzIxNzUqYikvZDNfbGFiX1kpLHo9ZDNfeHl6X2xhYigoLjAxOTMzMzkqcisuMTE5MTkyKmcrLjk1MDMwNDEqYikvZDNfbGFiX1opO3JldHVybiBkM19sYWIoMTE2KnktMTYsNTAwKih4LXkpLDIwMCooeS16KSl9ZnVuY3Rpb24gZDNfcmdiX3h5eihyKXtyZXR1cm4oci89MjU1KTw9LjA0MDQ1P3IvMTIuOTI6TWF0aC5wb3coKHIrLjA1NSkvMS4wNTUsMi40KX1mdW5jdGlvbiBkM19yZ2JfcGFyc2VOdW1iZXIoYyl7dmFyIGY9cGFyc2VGbG9hdChjKTtyZXR1cm4gYy5jaGFyQXQoYy5sZW5ndGgtMSk9PT1cIiVcIj9NYXRoLnJvdW5kKGYqMi41NSk6Zn12YXIgZDNfcmdiX25hbWVzPWQzLm1hcCh7YWxpY2VibHVlOjE1NzkyMzgzLGFudGlxdWV3aGl0ZToxNjQ0NDM3NSxhcXVhOjY1NTM1LGFxdWFtYXJpbmU6ODM4ODU2NCxhenVyZToxNTc5NDE3NSxiZWlnZToxNjExOTI2MCxiaXNxdWU6MTY3NzAyNDQsYmxhY2s6MCxibGFuY2hlZGFsbW9uZDoxNjc3MjA0NSxibHVlOjI1NSxibHVldmlvbGV0OjkwNTUyMDIsYnJvd246MTA4MjQyMzQsYnVybHl3b29kOjE0NTk2MjMxLGNhZGV0Ymx1ZTo2MjY2NTI4LGNoYXJ0cmV1c2U6ODM4ODM1MixjaG9jb2xhdGU6MTM3ODk0NzAsY29yYWw6MTY3NDQyNzIsY29ybmZsb3dlcmJsdWU6NjU5MTk4MSxjb3Juc2lsazoxNjc3NTM4OCxjcmltc29uOjE0NDIzMTAwLGN5YW46NjU1MzUsZGFya2JsdWU6MTM5LGRhcmtjeWFuOjM1NzIzLGRhcmtnb2xkZW5yb2Q6MTIwOTI5MzksZGFya2dyYXk6MTExMTkwMTcsZGFya2dyZWVuOjI1NjAwLGRhcmtncmV5OjExMTE5MDE3LGRhcmtraGFraToxMjQzMzI1OSxkYXJrbWFnZW50YTo5MTA5NjQzLGRhcmtvbGl2ZWdyZWVuOjU1OTc5OTksZGFya29yYW5nZToxNjc0NzUyMCxkYXJrb3JjaGlkOjEwMDQwMDEyLGRhcmtyZWQ6OTEwOTUwNCxkYXJrc2FsbW9uOjE1MzA4NDEwLGRhcmtzZWFncmVlbjo5NDE5OTE5LGRhcmtzbGF0ZWJsdWU6NDczNDM0NyxkYXJrc2xhdGVncmF5OjMxMDA0OTUsZGFya3NsYXRlZ3JleTozMTAwNDk1LGRhcmt0dXJxdW9pc2U6NTI5NDUsZGFya3Zpb2xldDo5Njk5NTM5LGRlZXBwaW5rOjE2NzE2OTQ3LGRlZXBza3libHVlOjQ5MTUxLGRpbWdyYXk6NjkwODI2NSxkaW1ncmV5OjY5MDgyNjUsZG9kZ2VyYmx1ZToyMDAzMTk5LGZpcmVicmljazoxMTY3NDE0NixmbG9yYWx3aGl0ZToxNjc3NTkyMCxmb3Jlc3RncmVlbjoyMjYzODQyLGZ1Y2hzaWE6MTY3MTE5MzUsZ2FpbnNib3JvOjE0NDc0NDYwLGdob3N0d2hpdGU6MTYzMTY2NzEsZ29sZDoxNjc2NjcyMCxnb2xkZW5yb2Q6MTQzMjkxMjAsZ3JheTo4NDIxNTA0LGdyZWVuOjMyNzY4LGdyZWVueWVsbG93OjExNDAzMDU1LGdyZXk6ODQyMTUwNCxob25leWRldzoxNTc5NDE2MCxob3RwaW5rOjE2NzM4NzQwLGluZGlhbnJlZDoxMzQ1ODUyNCxpbmRpZ286NDkxNTMzMCxpdm9yeToxNjc3NzIwMCxraGFraToxNTc4NzY2MCxsYXZlbmRlcjoxNTEzMjQxMCxsYXZlbmRlcmJsdXNoOjE2NzczMzY1LGxhd25ncmVlbjo4MTkwOTc2LGxlbW9uY2hpZmZvbjoxNjc3NTg4NSxsaWdodGJsdWU6MTEzOTMyNTQsbGlnaHRjb3JhbDoxNTc2MTUzNixsaWdodGN5YW46MTQ3NDU1OTksbGlnaHRnb2xkZW5yb2R5ZWxsb3c6MTY0NDgyMTAsbGlnaHRncmF5OjEzODgyMzIzLGxpZ2h0Z3JlZW46OTQ5ODI1NixsaWdodGdyZXk6MTM4ODIzMjMsbGlnaHRwaW5rOjE2NzU4NDY1LGxpZ2h0c2FsbW9uOjE2NzUyNzYyLGxpZ2h0c2VhZ3JlZW46MjE0Mjg5MCxsaWdodHNreWJsdWU6ODkwMDM0NixsaWdodHNsYXRlZ3JheTo3ODMzNzUzLGxpZ2h0c2xhdGVncmV5Ojc4MzM3NTMsbGlnaHRzdGVlbGJsdWU6MTE1ODQ3MzQsbGlnaHR5ZWxsb3c6MTY3NzcxODQsbGltZTo2NTI4MCxsaW1lZ3JlZW46MzMyOTMzMCxsaW5lbjoxNjQ0NTY3MCxtYWdlbnRhOjE2NzExOTM1LG1hcm9vbjo4Mzg4NjA4LG1lZGl1bWFxdWFtYXJpbmU6NjczNzMyMixtZWRpdW1ibHVlOjIwNSxtZWRpdW1vcmNoaWQ6MTIyMTE2NjcsbWVkaXVtcHVycGxlOjk2NjI2ODMsbWVkaXVtc2VhZ3JlZW46Mzk3ODA5NyxtZWRpdW1zbGF0ZWJsdWU6ODA4Nzc5MCxtZWRpdW1zcHJpbmdncmVlbjo2NDE1NCxtZWRpdW10dXJxdW9pc2U6NDc3MjMwMCxtZWRpdW12aW9sZXRyZWQ6MTMwNDcxNzMsbWlkbmlnaHRibHVlOjE2NDQ5MTIsbWludGNyZWFtOjE2MTIxODUwLG1pc3R5cm9zZToxNjc3MDI3Myxtb2NjYXNpbjoxNjc3MDIyOSxuYXZham93aGl0ZToxNjc2ODY4NSxuYXZ5OjEyOCxvbGRsYWNlOjE2NjQzNTU4LG9saXZlOjg0MjEzNzYsb2xpdmVkcmFiOjcwNDg3Mzksb3JhbmdlOjE2NzUzOTIwLG9yYW5nZXJlZDoxNjcyOTM0NCxvcmNoaWQ6MTQzMTU3MzQscGFsZWdvbGRlbnJvZDoxNTY1NzEzMCxwYWxlZ3JlZW46MTAwMjU4ODAscGFsZXR1cnF1b2lzZToxMTUyOTk2NixwYWxldmlvbGV0cmVkOjE0MzgxMjAzLHBhcGF5YXdoaXA6MTY3NzMwNzcscGVhY2hwdWZmOjE2NzY3NjczLHBlcnU6MTM0Njg5OTEscGluazoxNjc2MTAzNSxwbHVtOjE0NTI0NjM3LHBvd2RlcmJsdWU6MTE1OTE5MTAscHVycGxlOjgzODg3MzYscmVkOjE2NzExNjgwLHJvc3licm93bjoxMjM1NzUxOSxyb3lhbGJsdWU6NDI4Njk0NSxzYWRkbGVicm93bjo5MTI3MTg3LHNhbG1vbjoxNjQxNjg4MixzYW5keWJyb3duOjE2MDMyODY0LHNlYWdyZWVuOjMwNTAzMjcsc2Vhc2hlbGw6MTY3NzQ2Mzgsc2llbm5hOjEwNTA2Nzk3LHNpbHZlcjoxMjYzMjI1Nixza3libHVlOjg5MDAzMzEsc2xhdGVibHVlOjY5NzAwNjEsc2xhdGVncmF5OjczNzI5NDQsc2xhdGVncmV5OjczNzI5NDQsc25vdzoxNjc3NTkzMCxzcHJpbmdncmVlbjo2NTQwNyxzdGVlbGJsdWU6NDYyMDk4MCx0YW46MTM4MDg3ODAsdGVhbDozMjg5Nix0aGlzdGxlOjE0MjA0ODg4LHRvbWF0bzoxNjczNzA5NSx0dXJxdW9pc2U6NDI1MTg1Nix2aW9sZXQ6MTU2MzEwODYsd2hlYXQ6MTYxMTMzMzEsd2hpdGU6MTY3NzcyMTUsd2hpdGVzbW9rZToxNjExOTI4NSx5ZWxsb3c6MTY3NzY5NjAseWVsbG93Z3JlZW46MTAxNDUwNzR9KTtcbmQzX3JnYl9uYW1lcy5mb3JFYWNoKGZ1bmN0aW9uKGtleSx2YWx1ZSl7ZDNfcmdiX25hbWVzLnNldChrZXksZDNfcmdiTnVtYmVyKHZhbHVlKSl9KTtkMy5pbnRlcnBvbGF0ZVJnYj1kM19pbnRlcnBvbGF0ZVJnYjtmdW5jdGlvbiBkM19pbnRlcnBvbGF0ZVJnYihhLGIpe2E9ZDMucmdiKGEpO2I9ZDMucmdiKGIpO3ZhciBhcj1hLnIsYWc9YS5nLGFiPWEuYixicj1iLnItYXIsYmc9Yi5nLWFnLGJiPWIuYi1hYjtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuXCIjXCIrZDNfcmdiX2hleChNYXRoLnJvdW5kKGFyK2JyKnQpKStkM19yZ2JfaGV4KE1hdGgucm91bmQoYWcrYmcqdCkpK2QzX3JnYl9oZXgoTWF0aC5yb3VuZChhYitiYip0KSl9fWQzLmludGVycG9sYXRlT2JqZWN0PWQzX2ludGVycG9sYXRlT2JqZWN0O2Z1bmN0aW9uIGQzX2ludGVycG9sYXRlT2JqZWN0KGEsYil7dmFyIGk9e30sYz17fSxrO2ZvcihrIGluIGEpe2lmKGsgaW4gYil7aVtrXT1kM19pbnRlcnBvbGF0ZShhW2tdLGJba10pfWVsc2V7Y1trXT1hW2tdfX1mb3IoayBpbiBiKXtpZighKGsgaW4gYSkpe2Nba109YltrXX19cmV0dXJuIGZ1bmN0aW9uKHQpe2ZvcihrIGluIGkpY1trXT1pW2tdKHQpO3JldHVybiBjfX1kMy5pbnRlcnBvbGF0ZUFycmF5PWQzX2ludGVycG9sYXRlQXJyYXk7ZnVuY3Rpb24gZDNfaW50ZXJwb2xhdGVBcnJheShhLGIpe3ZhciB4PVtdLGM9W10sbmE9YS5sZW5ndGgsbmI9Yi5sZW5ndGgsbjA9TWF0aC5taW4oYS5sZW5ndGgsYi5sZW5ndGgpLGk7Zm9yKGk9MDtpPG4wOysraSl4LnB1c2goZDNfaW50ZXJwb2xhdGUoYVtpXSxiW2ldKSk7Zm9yKDtpPG5hOysraSljW2ldPWFbaV07Zm9yKDtpPG5iOysraSljW2ldPWJbaV07cmV0dXJuIGZ1bmN0aW9uKHQpe2ZvcihpPTA7aTxuMDsrK2kpY1tpXT14W2ldKHQpO3JldHVybiBjfX1kMy5pbnRlcnBvbGF0ZU51bWJlcj1kM19pbnRlcnBvbGF0ZU51bWJlcjtmdW5jdGlvbiBkM19pbnRlcnBvbGF0ZU51bWJlcihhLGIpe2ItPWE9K2E7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBhK2IqdH19ZDMuaW50ZXJwb2xhdGVTdHJpbmc9ZDNfaW50ZXJwb2xhdGVTdHJpbmc7ZnVuY3Rpb24gZDNfaW50ZXJwb2xhdGVTdHJpbmcoYSxiKXt2YXIgbSxpLGosczA9MCxzMT0wLHM9W10scT1bXSxuLG87YT1hK1wiXCIsYj1iK1wiXCI7ZDNfaW50ZXJwb2xhdGVfbnVtYmVyLmxhc3RJbmRleD0wO2ZvcihpPTA7bT1kM19pbnRlcnBvbGF0ZV9udW1iZXIuZXhlYyhiKTsrK2kpe2lmKG0uaW5kZXgpcy5wdXNoKGIuc3Vic3RyaW5nKHMwLHMxPW0uaW5kZXgpKTtxLnB1c2goe2k6cy5sZW5ndGgseDptWzBdfSk7cy5wdXNoKG51bGwpO3MwPWQzX2ludGVycG9sYXRlX251bWJlci5sYXN0SW5kZXh9aWYoczA8Yi5sZW5ndGgpcy5wdXNoKGIuc3Vic3RyaW5nKHMwKSk7Zm9yKGk9MCxuPXEubGVuZ3RoOyhtPWQzX2ludGVycG9sYXRlX251bWJlci5leGVjKGEpKSYmaTxuOysraSl7bz1xW2ldO2lmKG8ueD09bVswXSl7aWYoby5pKXtpZihzW28uaSsxXT09bnVsbCl7c1tvLmktMV0rPW8ueDtzLnNwbGljZShvLmksMSk7Zm9yKGo9aSsxO2o8bjsrK2opcVtqXS5pLS19ZWxzZXtzW28uaS0xXSs9by54K3Nbby5pKzFdO3Muc3BsaWNlKG8uaSwyKTtmb3Ioaj1pKzE7ajxuOysrailxW2pdLmktPTJ9fWVsc2V7aWYoc1tvLmkrMV09PW51bGwpe3Nbby5pXT1vLnh9ZWxzZXtzW28uaV09by54K3Nbby5pKzFdO3Muc3BsaWNlKG8uaSsxLDEpO2ZvcihqPWkrMTtqPG47KytqKXFbal0uaS0tfX1xLnNwbGljZShpLDEpO24tLTtpLS19ZWxzZXtvLng9ZDNfaW50ZXJwb2xhdGVOdW1iZXIocGFyc2VGbG9hdChtWzBdKSxwYXJzZUZsb2F0KG8ueCkpfX13aGlsZShpPG4pe289cS5wb3AoKTtpZihzW28uaSsxXT09bnVsbCl7c1tvLmldPW8ueH1lbHNle3Nbby5pXT1vLngrc1tvLmkrMV07cy5zcGxpY2Uoby5pKzEsMSl9bi0tfWlmKHMubGVuZ3RoPT09MSl7cmV0dXJuIHNbMF09PW51bGw/KG89cVswXS54LGZ1bmN0aW9uKHQpe3JldHVybiBvKHQpK1wiXCJ9KTpmdW5jdGlvbigpe3JldHVybiBifX1yZXR1cm4gZnVuY3Rpb24odCl7Zm9yKGk9MDtpPG47KytpKXNbKG89cVtpXSkuaV09by54KHQpO3JldHVybiBzLmpvaW4oXCJcIil9fXZhciBkM19pbnRlcnBvbGF0ZV9udW1iZXI9L1stK10/KD86XFxkK1xcLj9cXGQqfFxcLj9cXGQrKSg/OltlRV1bLStdP1xcZCspPy9nO2QzLmludGVycG9sYXRlPWQzX2ludGVycG9sYXRlO2Z1bmN0aW9uIGQzX2ludGVycG9sYXRlKGEsYil7dmFyIGk9ZDMuaW50ZXJwb2xhdG9ycy5sZW5ndGgsZjt3aGlsZSgtLWk+PTAmJiEoZj1kMy5pbnRlcnBvbGF0b3JzW2ldKGEsYikpKTtyZXR1cm4gZn1kMy5pbnRlcnBvbGF0b3JzPVtmdW5jdGlvbihhLGIpe3ZhciB0PXR5cGVvZiBiO3JldHVybih0PT09XCJzdHJpbmdcIj9kM19yZ2JfbmFtZXMuaGFzKGIpfHwvXigjfHJnYlxcKHxoc2xcXCgpLy50ZXN0KGIpP2QzX2ludGVycG9sYXRlUmdiOmQzX2ludGVycG9sYXRlU3RyaW5nOmIgaW5zdGFuY2VvZiBkM19Db2xvcj9kM19pbnRlcnBvbGF0ZVJnYjp0PT09XCJvYmplY3RcIj9BcnJheS5pc0FycmF5KGIpP2QzX2ludGVycG9sYXRlQXJyYXk6ZDNfaW50ZXJwb2xhdGVPYmplY3Q6ZDNfaW50ZXJwb2xhdGVOdW1iZXIpKGEsYil9XTtkMy5pbnRlcnBvbGF0ZVJvdW5kPWQzX2ludGVycG9sYXRlUm91bmQ7ZnVuY3Rpb24gZDNfaW50ZXJwb2xhdGVSb3VuZChhLGIpe2ItPWE7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiBNYXRoLnJvdW5kKGErYip0KX19ZnVuY3Rpb24gZDNfdW5pbnRlcnBvbGF0ZU51bWJlcihhLGIpe2I9Yi0oYT0rYSk/MS8oYi1hKTowO3JldHVybiBmdW5jdGlvbih4KXtyZXR1cm4oeC1hKSpifX1mdW5jdGlvbiBkM191bmludGVycG9sYXRlQ2xhbXAoYSxiKXtiPWItKGE9K2EpPzEvKGItYSk6MDtyZXR1cm4gZnVuY3Rpb24oeCl7cmV0dXJuIE1hdGgubWF4KDAsTWF0aC5taW4oMSwoeC1hKSpiKSl9fWZ1bmN0aW9uIGQzX2Zvcm1hdF9wcmVjaXNpb24oeCxwKXtyZXR1cm4gcC0oeD9NYXRoLmNlaWwoTWF0aC5sb2coeCkvTWF0aC5MTjEwKToxKX1kMy5yb3VuZD1mdW5jdGlvbih4LG4pe3JldHVybiBuP01hdGgucm91bmQoeCoobj1NYXRoLnBvdygxMCxuKSkpL246TWF0aC5yb3VuZCh4KX07dmFyIGQzX2Zvcm1hdFByZWZpeGVzPVtcInlcIixcInpcIixcImFcIixcImZcIixcInBcIixcIm5cIixcIsK1XCIsXCJtXCIsXCJcIixcImtcIixcIk1cIixcIkdcIixcIlRcIixcIlBcIixcIkVcIixcIlpcIixcIllcIl0ubWFwKGQzX2Zvcm1hdFByZWZpeCk7ZDMuZm9ybWF0UHJlZml4PWZ1bmN0aW9uKHZhbHVlLHByZWNpc2lvbil7dmFyIGk9MDtpZih2YWx1ZSl7aWYodmFsdWU8MCl2YWx1ZSo9LTE7aWYocHJlY2lzaW9uKXZhbHVlPWQzLnJvdW5kKHZhbHVlLGQzX2Zvcm1hdF9wcmVjaXNpb24odmFsdWUscHJlY2lzaW9uKSk7aT0xK01hdGguZmxvb3IoMWUtMTIrTWF0aC5sb2codmFsdWUpL01hdGguTE4xMCk7aT1NYXRoLm1heCgtMjQsTWF0aC5taW4oMjQsTWF0aC5mbG9vcigoaTw9MD9pKzE6aS0xKS8zKSozKSl9cmV0dXJuIGQzX2Zvcm1hdFByZWZpeGVzWzgraS8zXX07ZnVuY3Rpb24gZDNfZm9ybWF0UHJlZml4KGQsaSl7dmFyIGs9TWF0aC5wb3coMTAsYWJzKDgtaSkqMyk7cmV0dXJue3NjYWxlOmk+OD9mdW5jdGlvbihkKXtyZXR1cm4gZC9rfTpmdW5jdGlvbihkKXtyZXR1cm4gZCprfSxzeW1ib2w6ZH19ZnVuY3Rpb24gZDNfbG9jYWxlX251bWJlckZvcm1hdChsb2NhbGUpe3ZhciBsb2NhbGVfZGVjaW1hbD1sb2NhbGUuZGVjaW1hbCxsb2NhbGVfdGhvdXNhbmRzPWxvY2FsZS50aG91c2FuZHMsbG9jYWxlX2dyb3VwaW5nPWxvY2FsZS5ncm91cGluZyxsb2NhbGVfY3VycmVuY3k9bG9jYWxlLmN1cnJlbmN5LGZvcm1hdEdyb3VwPWxvY2FsZV9ncm91cGluZz9mdW5jdGlvbih2YWx1ZSl7dmFyIGk9dmFsdWUubGVuZ3RoLHQ9W10saj0wLGc9bG9jYWxlX2dyb3VwaW5nWzBdO3doaWxlKGk+MCYmZz4wKXt0LnB1c2godmFsdWUuc3Vic3RyaW5nKGktPWcsaStnKSk7Zz1sb2NhbGVfZ3JvdXBpbmdbaj0oaisxKSVsb2NhbGVfZ3JvdXBpbmcubGVuZ3RoXX1yZXR1cm4gdC5yZXZlcnNlKCkuam9pbihsb2NhbGVfdGhvdXNhbmRzKX06ZDNfaWRlbnRpdHk7cmV0dXJuIGZ1bmN0aW9uKHNwZWNpZmllcil7dmFyIG1hdGNoPWQzX2Zvcm1hdF9yZS5leGVjKHNwZWNpZmllciksZmlsbD1tYXRjaFsxXXx8XCIgXCIsYWxpZ249bWF0Y2hbMl18fFwiPlwiLHNpZ249bWF0Y2hbM118fFwiXCIsc3ltYm9sPW1hdGNoWzRdfHxcIlwiLHpmaWxsPW1hdGNoWzVdLHdpZHRoPSttYXRjaFs2XSxjb21tYT1tYXRjaFs3XSxwcmVjaXNpb249bWF0Y2hbOF0sdHlwZT1tYXRjaFs5XSxzY2FsZT0xLHByZWZpeD1cIlwiLHN1ZmZpeD1cIlwiLGludGVnZXI9ZmFsc2U7aWYocHJlY2lzaW9uKXByZWNpc2lvbj0rcHJlY2lzaW9uLnN1YnN0cmluZygxKTtpZih6ZmlsbHx8ZmlsbD09PVwiMFwiJiZhbGlnbj09PVwiPVwiKXt6ZmlsbD1maWxsPVwiMFwiO2FsaWduPVwiPVwiO2lmKGNvbW1hKXdpZHRoLT1NYXRoLmZsb29yKCh3aWR0aC0xKS80KX1zd2l0Y2godHlwZSl7Y2FzZVwiblwiOmNvbW1hPXRydWU7dHlwZT1cImdcIjticmVhaztjYXNlXCIlXCI6c2NhbGU9MTAwO3N1ZmZpeD1cIiVcIjt0eXBlPVwiZlwiO2JyZWFrO2Nhc2VcInBcIjpzY2FsZT0xMDA7c3VmZml4PVwiJVwiO3R5cGU9XCJyXCI7YnJlYWs7Y2FzZVwiYlwiOmNhc2VcIm9cIjpjYXNlXCJ4XCI6Y2FzZVwiWFwiOmlmKHN5bWJvbD09PVwiI1wiKXByZWZpeD1cIjBcIit0eXBlLnRvTG93ZXJDYXNlKCk7Y2FzZVwiY1wiOmNhc2VcImRcIjppbnRlZ2VyPXRydWU7cHJlY2lzaW9uPTA7YnJlYWs7Y2FzZVwic1wiOnNjYWxlPS0xO3R5cGU9XCJyXCI7YnJlYWt9aWYoc3ltYm9sPT09XCIkXCIpcHJlZml4PWxvY2FsZV9jdXJyZW5jeVswXSxzdWZmaXg9bG9jYWxlX2N1cnJlbmN5WzFdO2lmKHR5cGU9PVwiclwiJiYhcHJlY2lzaW9uKXR5cGU9XCJnXCI7aWYocHJlY2lzaW9uIT1udWxsKXtpZih0eXBlPT1cImdcIilwcmVjaXNpb249TWF0aC5tYXgoMSxNYXRoLm1pbigyMSxwcmVjaXNpb24pKTtlbHNlIGlmKHR5cGU9PVwiZVwifHx0eXBlPT1cImZcIilwcmVjaXNpb249TWF0aC5tYXgoMCxNYXRoLm1pbigyMCxwcmVjaXNpb24pKX10eXBlPWQzX2Zvcm1hdF90eXBlcy5nZXQodHlwZSl8fGQzX2Zvcm1hdF90eXBlRGVmYXVsdDt2YXIgemNvbW1hPXpmaWxsJiZjb21tYTtyZXR1cm4gZnVuY3Rpb24odmFsdWUpe2lmKGludGVnZXImJnZhbHVlJTEpcmV0dXJuXCJcIjt2YXIgbmVnYXRpdmU9dmFsdWU8MHx8dmFsdWU9PT0wJiYxL3ZhbHVlPDA/KHZhbHVlPS12YWx1ZSxcIi1cIik6c2lnbjtpZihzY2FsZTwwKXt2YXIgdW5pdD1kMy5mb3JtYXRQcmVmaXgodmFsdWUscHJlY2lzaW9uKTt2YWx1ZT11bml0LnNjYWxlKHZhbHVlKTtzdWZmaXg9dW5pdC5zeW1ib2x9ZWxzZXt2YWx1ZSo9c2NhbGV9dmFsdWU9dHlwZSh2YWx1ZSxwcmVjaXNpb24pO3ZhciBpPXZhbHVlLmxhc3RJbmRleE9mKFwiLlwiKSxiZWZvcmU9aTwwP3ZhbHVlOnZhbHVlLnN1YnN0cmluZygwLGkpLGFmdGVyPWk8MD9cIlwiOmxvY2FsZV9kZWNpbWFsK3ZhbHVlLnN1YnN0cmluZyhpKzEpO2lmKCF6ZmlsbCYmY29tbWEpYmVmb3JlPWZvcm1hdEdyb3VwKGJlZm9yZSk7dmFyIGxlbmd0aD1wcmVmaXgubGVuZ3RoK2JlZm9yZS5sZW5ndGgrYWZ0ZXIubGVuZ3RoKyh6Y29tbWE/MDpuZWdhdGl2ZS5sZW5ndGgpLHBhZGRpbmc9bGVuZ3RoPHdpZHRoP25ldyBBcnJheShsZW5ndGg9d2lkdGgtbGVuZ3RoKzEpLmpvaW4oZmlsbCk6XCJcIjtpZih6Y29tbWEpYmVmb3JlPWZvcm1hdEdyb3VwKHBhZGRpbmcrYmVmb3JlKTtuZWdhdGl2ZSs9cHJlZml4O3ZhbHVlPWJlZm9yZSthZnRlcjtyZXR1cm4oYWxpZ249PT1cIjxcIj9uZWdhdGl2ZSt2YWx1ZStwYWRkaW5nOmFsaWduPT09XCI+XCI/cGFkZGluZytuZWdhdGl2ZSt2YWx1ZTphbGlnbj09PVwiXlwiP3BhZGRpbmcuc3Vic3RyaW5nKDAsbGVuZ3RoPj49MSkrbmVnYXRpdmUrdmFsdWUrcGFkZGluZy5zdWJzdHJpbmcobGVuZ3RoKTpuZWdhdGl2ZSsoemNvbW1hP3ZhbHVlOnBhZGRpbmcrdmFsdWUpKStzdWZmaXh9fX12YXIgZDNfZm9ybWF0X3JlPS8oPzooW157XSk/KFs8Pj1eXSkpPyhbK1xcLSBdKT8oWyQjXSk/KDApPyhcXGQrKT8oLCk/KFxcLi0/XFxkKyk/KFthLXolXSk/L2k7dmFyIGQzX2Zvcm1hdF90eXBlcz1kMy5tYXAoe2I6ZnVuY3Rpb24oeCl7cmV0dXJuIHgudG9TdHJpbmcoMil9LGM6ZnVuY3Rpb24oeCl7cmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoeCl9LG86ZnVuY3Rpb24oeCl7cmV0dXJuIHgudG9TdHJpbmcoOCl9LHg6ZnVuY3Rpb24oeCl7cmV0dXJuIHgudG9TdHJpbmcoMTYpfSxYOmZ1bmN0aW9uKHgpe3JldHVybiB4LnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpfSxnOmZ1bmN0aW9uKHgscCl7cmV0dXJuIHgudG9QcmVjaXNpb24ocCl9LGU6ZnVuY3Rpb24oeCxwKXtyZXR1cm4geC50b0V4cG9uZW50aWFsKHApfSxmOmZ1bmN0aW9uKHgscCl7cmV0dXJuIHgudG9GaXhlZChwKX0scjpmdW5jdGlvbih4LHApe3JldHVybih4PWQzLnJvdW5kKHgsZDNfZm9ybWF0X3ByZWNpc2lvbih4LHApKSkudG9GaXhlZChNYXRoLm1heCgwLE1hdGgubWluKDIwLGQzX2Zvcm1hdF9wcmVjaXNpb24oeCooMSsxZS0xNSkscCkpKSl9fSk7ZnVuY3Rpb24gZDNfZm9ybWF0X3R5cGVEZWZhdWx0KHgpe3JldHVybiB4K1wiXCJ9ZDMucmVxdW90ZT1mdW5jdGlvbihzKXtyZXR1cm4gcy5yZXBsYWNlKGQzX3JlcXVvdGVfcmUsXCJcXFxcJCZcIil9O3ZhciBkM19yZXF1b3RlX3JlPS9bXFxcXFxcXlxcJFxcKlxcK1xcP1xcfFxcW1xcXVxcKFxcKVxcLlxce1xcfV0vZzt2YXIgZDNfdGltZT1kMy50aW1lPXt9LGQzX2RhdGU9RGF0ZTtmdW5jdGlvbiBkM19kYXRlX3V0Yygpe3RoaXMuXz1uZXcgRGF0ZShhcmd1bWVudHMubGVuZ3RoPjE/RGF0ZS5VVEMuYXBwbHkodGhpcyxhcmd1bWVudHMpOmFyZ3VtZW50c1swXSl9ZDNfZGF0ZV91dGMucHJvdG90eXBlPXtnZXREYXRlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuXy5nZXRVVENEYXRlKCl9LGdldERheTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl8uZ2V0VVRDRGF5KCl9LGdldEZ1bGxZZWFyOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuXy5nZXRVVENGdWxsWWVhcigpfSxnZXRIb3VyczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl8uZ2V0VVRDSG91cnMoKX0sZ2V0TWlsbGlzZWNvbmRzOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuXy5nZXRVVENNaWxsaXNlY29uZHMoKX0sZ2V0TWludXRlczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl8uZ2V0VVRDTWludXRlcygpfSxnZXRNb250aDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl8uZ2V0VVRDTW9udGgoKX0sZ2V0U2Vjb25kczpmdW5jdGlvbigpe3JldHVybiB0aGlzLl8uZ2V0VVRDU2Vjb25kcygpfSxnZXRUaW1lOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuXy5nZXRUaW1lKCl9LGdldFRpbWV6b25lT2Zmc2V0OmZ1bmN0aW9uKCl7cmV0dXJuIDB9LHZhbHVlT2Y6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fLnZhbHVlT2YoKX0sc2V0RGF0ZTpmdW5jdGlvbigpe2QzX3RpbWVfcHJvdG90eXBlLnNldFVUQ0RhdGUuYXBwbHkodGhpcy5fLGFyZ3VtZW50cyl9LHNldERheTpmdW5jdGlvbigpe2QzX3RpbWVfcHJvdG90eXBlLnNldFVUQ0RheS5hcHBseSh0aGlzLl8sYXJndW1lbnRzKX0sc2V0RnVsbFllYXI6ZnVuY3Rpb24oKXtkM190aW1lX3Byb3RvdHlwZS5zZXRVVENGdWxsWWVhci5hcHBseSh0aGlzLl8sYXJndW1lbnRzKX0sc2V0SG91cnM6ZnVuY3Rpb24oKXtkM190aW1lX3Byb3RvdHlwZS5zZXRVVENIb3Vycy5hcHBseSh0aGlzLl8sYXJndW1lbnRzKX0sc2V0TWlsbGlzZWNvbmRzOmZ1bmN0aW9uKCl7ZDNfdGltZV9wcm90b3R5cGUuc2V0VVRDTWlsbGlzZWNvbmRzLmFwcGx5KHRoaXMuXyxhcmd1bWVudHMpfSxzZXRNaW51dGVzOmZ1bmN0aW9uKCl7ZDNfdGltZV9wcm90b3R5cGUuc2V0VVRDTWludXRlcy5hcHBseSh0aGlzLl8sYXJndW1lbnRzKX0sc2V0TW9udGg6ZnVuY3Rpb24oKXtkM190aW1lX3Byb3RvdHlwZS5zZXRVVENNb250aC5hcHBseSh0aGlzLl8sYXJndW1lbnRzKX0sc2V0U2Vjb25kczpmdW5jdGlvbigpe2QzX3RpbWVfcHJvdG90eXBlLnNldFVUQ1NlY29uZHMuYXBwbHkodGhpcy5fLGFyZ3VtZW50cyl9LHNldFRpbWU6ZnVuY3Rpb24oKXtkM190aW1lX3Byb3RvdHlwZS5zZXRUaW1lLmFwcGx5KHRoaXMuXyxhcmd1bWVudHMpfX07dmFyIGQzX3RpbWVfcHJvdG90eXBlPURhdGUucHJvdG90eXBlO2Z1bmN0aW9uIGQzX3RpbWVfaW50ZXJ2YWwobG9jYWwsc3RlcCxudW1iZXIpe2Z1bmN0aW9uIHJvdW5kKGRhdGUpe3ZhciBkMD1sb2NhbChkYXRlKSxkMT1vZmZzZXQoZDAsMSk7cmV0dXJuIGRhdGUtZDA8ZDEtZGF0ZT9kMDpkMX1mdW5jdGlvbiBjZWlsKGRhdGUpe3N0ZXAoZGF0ZT1sb2NhbChuZXcgZDNfZGF0ZShkYXRlLTEpKSwxKTtyZXR1cm4gZGF0ZX1mdW5jdGlvbiBvZmZzZXQoZGF0ZSxrKXtzdGVwKGRhdGU9bmV3IGQzX2RhdGUoK2RhdGUpLGspO3JldHVybiBkYXRlfWZ1bmN0aW9uIHJhbmdlKHQwLHQxLGR0KXt2YXIgdGltZT1jZWlsKHQwKSx0aW1lcz1bXTtpZihkdD4xKXt3aGlsZSh0aW1lPHQxKXtpZighKG51bWJlcih0aW1lKSVkdCkpdGltZXMucHVzaChuZXcgRGF0ZSgrdGltZSkpO3N0ZXAodGltZSwxKX19ZWxzZXt3aGlsZSh0aW1lPHQxKXRpbWVzLnB1c2gobmV3IERhdGUoK3RpbWUpKSxzdGVwKHRpbWUsMSl9cmV0dXJuIHRpbWVzfWZ1bmN0aW9uIHJhbmdlX3V0Yyh0MCx0MSxkdCl7dHJ5e2QzX2RhdGU9ZDNfZGF0ZV91dGM7dmFyIHV0Yz1uZXcgZDNfZGF0ZV91dGM7dXRjLl89dDA7cmV0dXJuIHJhbmdlKHV0Yyx0MSxkdCl9ZmluYWxseXtkM19kYXRlPURhdGV9fWxvY2FsLmZsb29yPWxvY2FsO2xvY2FsLnJvdW5kPXJvdW5kO2xvY2FsLmNlaWw9Y2VpbDtsb2NhbC5vZmZzZXQ9b2Zmc2V0O2xvY2FsLnJhbmdlPXJhbmdlO3ZhciB1dGM9bG9jYWwudXRjPWQzX3RpbWVfaW50ZXJ2YWxfdXRjKGxvY2FsKTt1dGMuZmxvb3I9dXRjO3V0Yy5yb3VuZD1kM190aW1lX2ludGVydmFsX3V0Yyhyb3VuZCk7dXRjLmNlaWw9ZDNfdGltZV9pbnRlcnZhbF91dGMoY2VpbCk7dXRjLm9mZnNldD1kM190aW1lX2ludGVydmFsX3V0YyhvZmZzZXQpO3V0Yy5yYW5nZT1yYW5nZV91dGM7cmV0dXJuIGxvY2FsfWZ1bmN0aW9uIGQzX3RpbWVfaW50ZXJ2YWxfdXRjKG1ldGhvZCl7cmV0dXJuIGZ1bmN0aW9uKGRhdGUsayl7dHJ5e2QzX2RhdGU9ZDNfZGF0ZV91dGM7dmFyIHV0Yz1uZXcgZDNfZGF0ZV91dGM7dXRjLl89ZGF0ZTtyZXR1cm4gbWV0aG9kKHV0YyxrKS5ffWZpbmFsbHl7ZDNfZGF0ZT1EYXRlfX19ZDNfdGltZS55ZWFyPWQzX3RpbWVfaW50ZXJ2YWwoZnVuY3Rpb24oZGF0ZSl7ZGF0ZT1kM190aW1lLmRheShkYXRlKTtkYXRlLnNldE1vbnRoKDAsMSk7cmV0dXJuIGRhdGV9LGZ1bmN0aW9uKGRhdGUsb2Zmc2V0KXtkYXRlLnNldEZ1bGxZZWFyKGRhdGUuZ2V0RnVsbFllYXIoKStvZmZzZXQpfSxmdW5jdGlvbihkYXRlKXtyZXR1cm4gZGF0ZS5nZXRGdWxsWWVhcigpfSk7ZDNfdGltZS55ZWFycz1kM190aW1lLnllYXIucmFuZ2U7ZDNfdGltZS55ZWFycy51dGM9ZDNfdGltZS55ZWFyLnV0Yy5yYW5nZTtkM190aW1lLmRheT1kM190aW1lX2ludGVydmFsKGZ1bmN0aW9uKGRhdGUpe3ZhciBkYXk9bmV3IGQzX2RhdGUoMmUzLDApO2RheS5zZXRGdWxsWWVhcihkYXRlLmdldEZ1bGxZZWFyKCksZGF0ZS5nZXRNb250aCgpLGRhdGUuZ2V0RGF0ZSgpKTtyZXR1cm4gZGF5fSxmdW5jdGlvbihkYXRlLG9mZnNldCl7ZGF0ZS5zZXREYXRlKGRhdGUuZ2V0RGF0ZSgpK29mZnNldCl9LGZ1bmN0aW9uKGRhdGUpe3JldHVybiBkYXRlLmdldERhdGUoKS0xfSk7ZDNfdGltZS5kYXlzPWQzX3RpbWUuZGF5LnJhbmdlO2QzX3RpbWUuZGF5cy51dGM9ZDNfdGltZS5kYXkudXRjLnJhbmdlO2QzX3RpbWUuZGF5T2ZZZWFyPWZ1bmN0aW9uKGRhdGUpe3ZhciB5ZWFyPWQzX3RpbWUueWVhcihkYXRlKTtyZXR1cm4gTWF0aC5mbG9vcigoZGF0ZS15ZWFyLShkYXRlLmdldFRpbWV6b25lT2Zmc2V0KCkteWVhci5nZXRUaW1lem9uZU9mZnNldCgpKSo2ZTQpLzg2NGU1KX07W1wic3VuZGF5XCIsXCJtb25kYXlcIixcInR1ZXNkYXlcIixcIndlZG5lc2RheVwiLFwidGh1cnNkYXlcIixcImZyaWRheVwiLFwic2F0dXJkYXlcIl0uZm9yRWFjaChmdW5jdGlvbihkYXksaSl7aT03LWk7dmFyIGludGVydmFsPWQzX3RpbWVbZGF5XT1kM190aW1lX2ludGVydmFsKGZ1bmN0aW9uKGRhdGUpeyhkYXRlPWQzX3RpbWUuZGF5KGRhdGUpKS5zZXREYXRlKGRhdGUuZ2V0RGF0ZSgpLShkYXRlLmdldERheSgpK2kpJTcpO3JldHVybiBkYXRlfSxmdW5jdGlvbihkYXRlLG9mZnNldCl7ZGF0ZS5zZXREYXRlKGRhdGUuZ2V0RGF0ZSgpK01hdGguZmxvb3Iob2Zmc2V0KSo3KX0sZnVuY3Rpb24oZGF0ZSl7dmFyIGRheT1kM190aW1lLnllYXIoZGF0ZSkuZ2V0RGF5KCk7cmV0dXJuIE1hdGguZmxvb3IoKGQzX3RpbWUuZGF5T2ZZZWFyKGRhdGUpKyhkYXkraSklNykvNyktKGRheSE9PWkpfSk7ZDNfdGltZVtkYXkrXCJzXCJdPWludGVydmFsLnJhbmdlO2QzX3RpbWVbZGF5K1wic1wiXS51dGM9aW50ZXJ2YWwudXRjLnJhbmdlO2QzX3RpbWVbZGF5K1wiT2ZZZWFyXCJdPWZ1bmN0aW9uKGRhdGUpe3ZhciBkYXk9ZDNfdGltZS55ZWFyKGRhdGUpLmdldERheSgpO3JldHVybiBNYXRoLmZsb29yKChkM190aW1lLmRheU9mWWVhcihkYXRlKSsoZGF5K2kpJTcpLzcpfX0pO2QzX3RpbWUud2Vlaz1kM190aW1lLnN1bmRheTtkM190aW1lLndlZWtzPWQzX3RpbWUuc3VuZGF5LnJhbmdlO2QzX3RpbWUud2Vla3MudXRjPWQzX3RpbWUuc3VuZGF5LnV0Yy5yYW5nZTtkM190aW1lLndlZWtPZlllYXI9ZDNfdGltZS5zdW5kYXlPZlllYXI7ZnVuY3Rpb24gZDNfbG9jYWxlX3RpbWVGb3JtYXQobG9jYWxlKXt2YXIgbG9jYWxlX2RhdGVUaW1lPWxvY2FsZS5kYXRlVGltZSxsb2NhbGVfZGF0ZT1sb2NhbGUuZGF0ZSxsb2NhbGVfdGltZT1sb2NhbGUudGltZSxsb2NhbGVfcGVyaW9kcz1sb2NhbGUucGVyaW9kcyxsb2NhbGVfZGF5cz1sb2NhbGUuZGF5cyxsb2NhbGVfc2hvcnREYXlzPWxvY2FsZS5zaG9ydERheXMsbG9jYWxlX21vbnRocz1sb2NhbGUubW9udGhzLGxvY2FsZV9zaG9ydE1vbnRocz1sb2NhbGUuc2hvcnRNb250aHM7ZnVuY3Rpb24gZDNfdGltZV9mb3JtYXQodGVtcGxhdGUpe3ZhciBuPXRlbXBsYXRlLmxlbmd0aDtmdW5jdGlvbiBmb3JtYXQoZGF0ZSl7dmFyIHN0cmluZz1bXSxpPS0xLGo9MCxjLHAsZjt3aGlsZSgrK2k8bil7aWYodGVtcGxhdGUuY2hhckNvZGVBdChpKT09PTM3KXtzdHJpbmcucHVzaCh0ZW1wbGF0ZS5zdWJzdHJpbmcoaixpKSk7aWYoKHA9ZDNfdGltZV9mb3JtYXRQYWRzW2M9dGVtcGxhdGUuY2hhckF0KCsraSldKSE9bnVsbCljPXRlbXBsYXRlLmNoYXJBdCgrK2kpO2lmKGY9ZDNfdGltZV9mb3JtYXRzW2NdKWM9ZihkYXRlLHA9PW51bGw/Yz09PVwiZVwiP1wiIFwiOlwiMFwiOnApO3N0cmluZy5wdXNoKGMpO2o9aSsxfX1zdHJpbmcucHVzaCh0ZW1wbGF0ZS5zdWJzdHJpbmcoaixpKSk7cmV0dXJuIHN0cmluZy5qb2luKFwiXCIpfWZvcm1hdC5wYXJzZT1mdW5jdGlvbihzdHJpbmcpe3ZhciBkPXt5OjE5MDAsbTowLGQ6MSxIOjAsTTowLFM6MCxMOjAsWjpudWxsfSxpPWQzX3RpbWVfcGFyc2UoZCx0ZW1wbGF0ZSxzdHJpbmcsMCk7aWYoaSE9c3RyaW5nLmxlbmd0aClyZXR1cm4gbnVsbDtpZihcInBcImluIGQpZC5IPWQuSCUxMitkLnAqMTI7dmFyIGxvY2FsWj1kLlohPW51bGwmJmQzX2RhdGUhPT1kM19kYXRlX3V0YyxkYXRlPW5ldyhsb2NhbFo/ZDNfZGF0ZV91dGM6ZDNfZGF0ZSk7aWYoXCJqXCJpbiBkKWRhdGUuc2V0RnVsbFllYXIoZC55LDAsZC5qKTtlbHNlIGlmKFwid1wiaW4gZCYmKFwiV1wiaW4gZHx8XCJVXCJpbiBkKSl7ZGF0ZS5zZXRGdWxsWWVhcihkLnksMCwxKTtkYXRlLnNldEZ1bGxZZWFyKGQueSwwLFwiV1wiaW4gZD8oZC53KzYpJTcrZC5XKjctKGRhdGUuZ2V0RGF5KCkrNSklNzpkLncrZC5VKjctKGRhdGUuZ2V0RGF5KCkrNiklNyl9ZWxzZSBkYXRlLnNldEZ1bGxZZWFyKGQueSxkLm0sZC5kKTtkYXRlLnNldEhvdXJzKGQuSCtNYXRoLmZsb29yKGQuWi8xMDApLGQuTStkLlolMTAwLGQuUyxkLkwpO3JldHVybiBsb2NhbFo/ZGF0ZS5fOmRhdGV9O2Zvcm1hdC50b1N0cmluZz1mdW5jdGlvbigpe3JldHVybiB0ZW1wbGF0ZX07cmV0dXJuIGZvcm1hdH1mdW5jdGlvbiBkM190aW1lX3BhcnNlKGRhdGUsdGVtcGxhdGUsc3RyaW5nLGope3ZhciBjLHAsdCxpPTAsbj10ZW1wbGF0ZS5sZW5ndGgsbT1zdHJpbmcubGVuZ3RoO3doaWxlKGk8bil7aWYoaj49bSlyZXR1cm4tMTtjPXRlbXBsYXRlLmNoYXJDb2RlQXQoaSsrKTtpZihjPT09Mzcpe3Q9dGVtcGxhdGUuY2hhckF0KGkrKyk7cD1kM190aW1lX3BhcnNlcnNbdCBpbiBkM190aW1lX2Zvcm1hdFBhZHM/dGVtcGxhdGUuY2hhckF0KGkrKyk6dF07aWYoIXB8fChqPXAoZGF0ZSxzdHJpbmcsaikpPDApcmV0dXJuLTF9ZWxzZSBpZihjIT1zdHJpbmcuY2hhckNvZGVBdChqKyspKXtyZXR1cm4tMX19cmV0dXJuIGp9ZDNfdGltZV9mb3JtYXQudXRjPWZ1bmN0aW9uKHRlbXBsYXRlKXt2YXIgbG9jYWw9ZDNfdGltZV9mb3JtYXQodGVtcGxhdGUpO2Z1bmN0aW9uIGZvcm1hdChkYXRlKXt0cnl7ZDNfZGF0ZT1kM19kYXRlX3V0Yzt2YXIgdXRjPW5ldyBkM19kYXRlO3V0Yy5fPWRhdGU7cmV0dXJuIGxvY2FsKHV0Yyl9ZmluYWxseXtkM19kYXRlPURhdGV9fWZvcm1hdC5wYXJzZT1mdW5jdGlvbihzdHJpbmcpe3RyeXtkM19kYXRlPWQzX2RhdGVfdXRjO3ZhciBkYXRlPWxvY2FsLnBhcnNlKHN0cmluZyk7cmV0dXJuIGRhdGUmJmRhdGUuX31maW5hbGx5e2QzX2RhdGU9RGF0ZX19O2Zvcm1hdC50b1N0cmluZz1sb2NhbC50b1N0cmluZztyZXR1cm4gZm9ybWF0fTtkM190aW1lX2Zvcm1hdC5tdWx0aT1kM190aW1lX2Zvcm1hdC51dGMubXVsdGk9ZDNfdGltZV9mb3JtYXRNdWx0aTt2YXIgZDNfdGltZV9wZXJpb2RMb29rdXA9ZDMubWFwKCksZDNfdGltZV9kYXlSZT1kM190aW1lX2Zvcm1hdFJlKGxvY2FsZV9kYXlzKSxkM190aW1lX2RheUxvb2t1cD1kM190aW1lX2Zvcm1hdExvb2t1cChsb2NhbGVfZGF5cyksZDNfdGltZV9kYXlBYmJyZXZSZT1kM190aW1lX2Zvcm1hdFJlKGxvY2FsZV9zaG9ydERheXMpLGQzX3RpbWVfZGF5QWJicmV2TG9va3VwPWQzX3RpbWVfZm9ybWF0TG9va3VwKGxvY2FsZV9zaG9ydERheXMpLGQzX3RpbWVfbW9udGhSZT1kM190aW1lX2Zvcm1hdFJlKGxvY2FsZV9tb250aHMpLGQzX3RpbWVfbW9udGhMb29rdXA9ZDNfdGltZV9mb3JtYXRMb29rdXAobG9jYWxlX21vbnRocyksZDNfdGltZV9tb250aEFiYnJldlJlPWQzX3RpbWVfZm9ybWF0UmUobG9jYWxlX3Nob3J0TW9udGhzKSxkM190aW1lX21vbnRoQWJicmV2TG9va3VwPWQzX3RpbWVfZm9ybWF0TG9va3VwKGxvY2FsZV9zaG9ydE1vbnRocyk7bG9jYWxlX3BlcmlvZHMuZm9yRWFjaChmdW5jdGlvbihwLGkpe2QzX3RpbWVfcGVyaW9kTG9va3VwLnNldChwLnRvTG93ZXJDYXNlKCksaSl9KTt2YXIgZDNfdGltZV9mb3JtYXRzPXthOmZ1bmN0aW9uKGQpe3JldHVybiBsb2NhbGVfc2hvcnREYXlzW2QuZ2V0RGF5KCldfSxBOmZ1bmN0aW9uKGQpe3JldHVybiBsb2NhbGVfZGF5c1tkLmdldERheSgpXX0sYjpmdW5jdGlvbihkKXtyZXR1cm4gbG9jYWxlX3Nob3J0TW9udGhzW2QuZ2V0TW9udGgoKV19LEI6ZnVuY3Rpb24oZCl7cmV0dXJuIGxvY2FsZV9tb250aHNbZC5nZXRNb250aCgpXX0sYzpkM190aW1lX2Zvcm1hdChsb2NhbGVfZGF0ZVRpbWUpLGQ6ZnVuY3Rpb24oZCxwKXtyZXR1cm4gZDNfdGltZV9mb3JtYXRQYWQoZC5nZXREYXRlKCkscCwyKX0sZTpmdW5jdGlvbihkLHApe3JldHVybiBkM190aW1lX2Zvcm1hdFBhZChkLmdldERhdGUoKSxwLDIpfSxIOmZ1bmN0aW9uKGQscCl7cmV0dXJuIGQzX3RpbWVfZm9ybWF0UGFkKGQuZ2V0SG91cnMoKSxwLDIpfSxJOmZ1bmN0aW9uKGQscCl7cmV0dXJuIGQzX3RpbWVfZm9ybWF0UGFkKGQuZ2V0SG91cnMoKSUxMnx8MTIscCwyKX0sajpmdW5jdGlvbihkLHApe3JldHVybiBkM190aW1lX2Zvcm1hdFBhZCgxK2QzX3RpbWUuZGF5T2ZZZWFyKGQpLHAsMyl9LEw6ZnVuY3Rpb24oZCxwKXtyZXR1cm4gZDNfdGltZV9mb3JtYXRQYWQoZC5nZXRNaWxsaXNlY29uZHMoKSxwLDMpfSxtOmZ1bmN0aW9uKGQscCl7cmV0dXJuIGQzX3RpbWVfZm9ybWF0UGFkKGQuZ2V0TW9udGgoKSsxLHAsMil9LE06ZnVuY3Rpb24oZCxwKXtyZXR1cm4gZDNfdGltZV9mb3JtYXRQYWQoZC5nZXRNaW51dGVzKCkscCwyKX0scDpmdW5jdGlvbihkKXtyZXR1cm4gbG9jYWxlX3BlcmlvZHNbKyhkLmdldEhvdXJzKCk+PTEyKV19LFM6ZnVuY3Rpb24oZCxwKXtyZXR1cm4gZDNfdGltZV9mb3JtYXRQYWQoZC5nZXRTZWNvbmRzKCkscCwyKX0sVTpmdW5jdGlvbihkLHApe3JldHVybiBkM190aW1lX2Zvcm1hdFBhZChkM190aW1lLnN1bmRheU9mWWVhcihkKSxwLDIpfSx3OmZ1bmN0aW9uKGQpe3JldHVybiBkLmdldERheSgpfSxXOmZ1bmN0aW9uKGQscCl7cmV0dXJuIGQzX3RpbWVfZm9ybWF0UGFkKGQzX3RpbWUubW9uZGF5T2ZZZWFyKGQpLHAsMil9LHg6ZDNfdGltZV9mb3JtYXQobG9jYWxlX2RhdGUpLFg6ZDNfdGltZV9mb3JtYXQobG9jYWxlX3RpbWUpLHk6ZnVuY3Rpb24oZCxwKXtyZXR1cm4gZDNfdGltZV9mb3JtYXRQYWQoZC5nZXRGdWxsWWVhcigpJTEwMCxwLDIpfSxZOmZ1bmN0aW9uKGQscCl7cmV0dXJuIGQzX3RpbWVfZm9ybWF0UGFkKGQuZ2V0RnVsbFllYXIoKSUxZTQscCw0KX0sWjpkM190aW1lX3pvbmUsXCIlXCI6ZnVuY3Rpb24oKXtyZXR1cm5cIiVcIn19O3ZhciBkM190aW1lX3BhcnNlcnM9e2E6ZDNfdGltZV9wYXJzZVdlZWtkYXlBYmJyZXYsQTpkM190aW1lX3BhcnNlV2Vla2RheSxiOmQzX3RpbWVfcGFyc2VNb250aEFiYnJldixCOmQzX3RpbWVfcGFyc2VNb250aCxjOmQzX3RpbWVfcGFyc2VMb2NhbGVGdWxsLGQ6ZDNfdGltZV9wYXJzZURheSxlOmQzX3RpbWVfcGFyc2VEYXksSDpkM190aW1lX3BhcnNlSG91cjI0LEk6ZDNfdGltZV9wYXJzZUhvdXIyNCxqOmQzX3RpbWVfcGFyc2VEYXlPZlllYXIsTDpkM190aW1lX3BhcnNlTWlsbGlzZWNvbmRzLG06ZDNfdGltZV9wYXJzZU1vbnRoTnVtYmVyLE06ZDNfdGltZV9wYXJzZU1pbnV0ZXMscDpkM190aW1lX3BhcnNlQW1QbSxTOmQzX3RpbWVfcGFyc2VTZWNvbmRzLFU6ZDNfdGltZV9wYXJzZVdlZWtOdW1iZXJTdW5kYXksdzpkM190aW1lX3BhcnNlV2Vla2RheU51bWJlcixXOmQzX3RpbWVfcGFyc2VXZWVrTnVtYmVyTW9uZGF5LHg6ZDNfdGltZV9wYXJzZUxvY2FsZURhdGUsWDpkM190aW1lX3BhcnNlTG9jYWxlVGltZSx5OmQzX3RpbWVfcGFyc2VZZWFyLFk6ZDNfdGltZV9wYXJzZUZ1bGxZZWFyLFo6ZDNfdGltZV9wYXJzZVpvbmUsXCIlXCI6ZDNfdGltZV9wYXJzZUxpdGVyYWxQZXJjZW50fTtmdW5jdGlvbiBkM190aW1lX3BhcnNlV2Vla2RheUFiYnJldihkYXRlLHN0cmluZyxpKXtkM190aW1lX2RheUFiYnJldlJlLmxhc3RJbmRleD0wO3ZhciBuPWQzX3RpbWVfZGF5QWJicmV2UmUuZXhlYyhzdHJpbmcuc3Vic3RyaW5nKGkpKTtyZXR1cm4gbj8oZGF0ZS53PWQzX3RpbWVfZGF5QWJicmV2TG9va3VwLmdldChuWzBdLnRvTG93ZXJDYXNlKCkpLGkrblswXS5sZW5ndGgpOi0xfWZ1bmN0aW9uIGQzX3RpbWVfcGFyc2VXZWVrZGF5KGRhdGUsc3RyaW5nLGkpe2QzX3RpbWVfZGF5UmUubGFzdEluZGV4PTA7dmFyIG49ZDNfdGltZV9kYXlSZS5leGVjKHN0cmluZy5zdWJzdHJpbmcoaSkpO3JldHVybiBuPyhkYXRlLnc9ZDNfdGltZV9kYXlMb29rdXAuZ2V0KG5bMF0udG9Mb3dlckNhc2UoKSksaStuWzBdLmxlbmd0aCk6LTF9ZnVuY3Rpb24gZDNfdGltZV9wYXJzZU1vbnRoQWJicmV2KGRhdGUsc3RyaW5nLGkpe2QzX3RpbWVfbW9udGhBYmJyZXZSZS5sYXN0SW5kZXg9MDt2YXIgbj1kM190aW1lX21vbnRoQWJicmV2UmUuZXhlYyhzdHJpbmcuc3Vic3RyaW5nKGkpKTtyZXR1cm4gbj8oZGF0ZS5tPWQzX3RpbWVfbW9udGhBYmJyZXZMb29rdXAuZ2V0KG5bMF0udG9Mb3dlckNhc2UoKSksaStuWzBdLmxlbmd0aCk6LTF9ZnVuY3Rpb24gZDNfdGltZV9wYXJzZU1vbnRoKGRhdGUsc3RyaW5nLGkpe2QzX3RpbWVfbW9udGhSZS5sYXN0SW5kZXg9MDt2YXIgbj1kM190aW1lX21vbnRoUmUuZXhlYyhzdHJpbmcuc3Vic3RyaW5nKGkpKTtyZXR1cm4gbj8oZGF0ZS5tPWQzX3RpbWVfbW9udGhMb29rdXAuZ2V0KG5bMF0udG9Mb3dlckNhc2UoKSksaStuWzBdLmxlbmd0aCk6LTF9ZnVuY3Rpb24gZDNfdGltZV9wYXJzZUxvY2FsZUZ1bGwoZGF0ZSxzdHJpbmcsaSl7cmV0dXJuIGQzX3RpbWVfcGFyc2UoZGF0ZSxkM190aW1lX2Zvcm1hdHMuYy50b1N0cmluZygpLHN0cmluZyxpKX1mdW5jdGlvbiBkM190aW1lX3BhcnNlTG9jYWxlRGF0ZShkYXRlLHN0cmluZyxpKXtyZXR1cm4gZDNfdGltZV9wYXJzZShkYXRlLGQzX3RpbWVfZm9ybWF0cy54LnRvU3RyaW5nKCksc3RyaW5nLGkpfWZ1bmN0aW9uIGQzX3RpbWVfcGFyc2VMb2NhbGVUaW1lKGRhdGUsc3RyaW5nLGkpe3JldHVybiBkM190aW1lX3BhcnNlKGRhdGUsZDNfdGltZV9mb3JtYXRzLlgudG9TdHJpbmcoKSxzdHJpbmcsaSl9ZnVuY3Rpb24gZDNfdGltZV9wYXJzZUFtUG0oZGF0ZSxzdHJpbmcsaSl7dmFyIG49ZDNfdGltZV9wZXJpb2RMb29rdXAuZ2V0KHN0cmluZy5zdWJzdHJpbmcoaSxpKz0yKS50b0xvd2VyQ2FzZSgpKTtyZXR1cm4gbj09bnVsbD8tMTooZGF0ZS5wPW4saSl9cmV0dXJuIGQzX3RpbWVfZm9ybWF0fXZhciBkM190aW1lX2Zvcm1hdFBhZHM9e1wiLVwiOlwiXCIsXzpcIiBcIiwwOlwiMFwifSxkM190aW1lX251bWJlclJlPS9eXFxzKlxcZCsvLGQzX3RpbWVfcGVyY2VudFJlPS9eJS87ZnVuY3Rpb24gZDNfdGltZV9mb3JtYXRQYWQodmFsdWUsZmlsbCx3aWR0aCl7dmFyIHNpZ249dmFsdWU8MD9cIi1cIjpcIlwiLHN0cmluZz0oc2lnbj8tdmFsdWU6dmFsdWUpK1wiXCIsbGVuZ3RoPXN0cmluZy5sZW5ndGg7cmV0dXJuIHNpZ24rKGxlbmd0aDx3aWR0aD9uZXcgQXJyYXkod2lkdGgtbGVuZ3RoKzEpLmpvaW4oZmlsbCkrc3RyaW5nOnN0cmluZyl9ZnVuY3Rpb24gZDNfdGltZV9mb3JtYXRSZShuYW1lcyl7cmV0dXJuIG5ldyBSZWdFeHAoXCJeKD86XCIrbmFtZXMubWFwKGQzLnJlcXVvdGUpLmpvaW4oXCJ8XCIpK1wiKVwiLFwiaVwiKX1mdW5jdGlvbiBkM190aW1lX2Zvcm1hdExvb2t1cChuYW1lcyl7dmFyIG1hcD1uZXcgZDNfTWFwLGk9LTEsbj1uYW1lcy5sZW5ndGg7d2hpbGUoKytpPG4pbWFwLnNldChuYW1lc1tpXS50b0xvd2VyQ2FzZSgpLGkpO3JldHVybiBtYXB9ZnVuY3Rpb24gZDNfdGltZV9wYXJzZVdlZWtkYXlOdW1iZXIoZGF0ZSxzdHJpbmcsaSl7ZDNfdGltZV9udW1iZXJSZS5sYXN0SW5kZXg9MDt2YXIgbj1kM190aW1lX251bWJlclJlLmV4ZWMoc3RyaW5nLnN1YnN0cmluZyhpLGkrMSkpO3JldHVybiBuPyhkYXRlLnc9K25bMF0saStuWzBdLmxlbmd0aCk6LTF9ZnVuY3Rpb24gZDNfdGltZV9wYXJzZVdlZWtOdW1iZXJTdW5kYXkoZGF0ZSxzdHJpbmcsaSl7ZDNfdGltZV9udW1iZXJSZS5sYXN0SW5kZXg9MDt2YXIgbj1kM190aW1lX251bWJlclJlLmV4ZWMoc3RyaW5nLnN1YnN0cmluZyhpKSk7cmV0dXJuIG4/KGRhdGUuVT0rblswXSxpK25bMF0ubGVuZ3RoKTotMX1mdW5jdGlvbiBkM190aW1lX3BhcnNlV2Vla051bWJlck1vbmRheShkYXRlLHN0cmluZyxpKXtkM190aW1lX251bWJlclJlLmxhc3RJbmRleD0wO3ZhciBuPWQzX3RpbWVfbnVtYmVyUmUuZXhlYyhzdHJpbmcuc3Vic3RyaW5nKGkpKTtyZXR1cm4gbj8oZGF0ZS5XPStuWzBdLGkrblswXS5sZW5ndGgpOi0xfWZ1bmN0aW9uIGQzX3RpbWVfcGFyc2VGdWxsWWVhcihkYXRlLHN0cmluZyxpKXtkM190aW1lX251bWJlclJlLmxhc3RJbmRleD0wO3ZhciBuPWQzX3RpbWVfbnVtYmVyUmUuZXhlYyhzdHJpbmcuc3Vic3RyaW5nKGksaSs0KSk7cmV0dXJuIG4/KGRhdGUueT0rblswXSxpK25bMF0ubGVuZ3RoKTotMX1mdW5jdGlvbiBkM190aW1lX3BhcnNlWWVhcihkYXRlLHN0cmluZyxpKXtkM190aW1lX251bWJlclJlLmxhc3RJbmRleD0wO3ZhciBuPWQzX3RpbWVfbnVtYmVyUmUuZXhlYyhzdHJpbmcuc3Vic3RyaW5nKGksaSsyKSk7cmV0dXJuIG4/KGRhdGUueT1kM190aW1lX2V4cGFuZFllYXIoK25bMF0pLGkrblswXS5sZW5ndGgpOi0xfWZ1bmN0aW9uIGQzX3RpbWVfcGFyc2Vab25lKGRhdGUsc3RyaW5nLGkpe3JldHVybi9eWystXVxcZHs0fSQvLnRlc3Qoc3RyaW5nPXN0cmluZy5zdWJzdHJpbmcoaSxpKzUpKT8oZGF0ZS5aPStzdHJpbmcsaSs1KTotMX1mdW5jdGlvbiBkM190aW1lX2V4cGFuZFllYXIoZCl7cmV0dXJuIGQrKGQ+Njg/MTkwMDoyZTMpfWZ1bmN0aW9uIGQzX3RpbWVfcGFyc2VNb250aE51bWJlcihkYXRlLHN0cmluZyxpKXtkM190aW1lX251bWJlclJlLmxhc3RJbmRleD0wO3ZhciBuPWQzX3RpbWVfbnVtYmVyUmUuZXhlYyhzdHJpbmcuc3Vic3RyaW5nKGksaSsyKSk7cmV0dXJuIG4/KGRhdGUubT1uWzBdLTEsaStuWzBdLmxlbmd0aCk6LTF9ZnVuY3Rpb24gZDNfdGltZV9wYXJzZURheShkYXRlLHN0cmluZyxpKXtkM190aW1lX251bWJlclJlLmxhc3RJbmRleD0wO3ZhciBuPWQzX3RpbWVfbnVtYmVyUmUuZXhlYyhzdHJpbmcuc3Vic3RyaW5nKGksaSsyKSk7cmV0dXJuIG4/KGRhdGUuZD0rblswXSxpK25bMF0ubGVuZ3RoKTotMX1mdW5jdGlvbiBkM190aW1lX3BhcnNlRGF5T2ZZZWFyKGRhdGUsc3RyaW5nLGkpe2QzX3RpbWVfbnVtYmVyUmUubGFzdEluZGV4PTA7dmFyIG49ZDNfdGltZV9udW1iZXJSZS5leGVjKHN0cmluZy5zdWJzdHJpbmcoaSxpKzMpKTtyZXR1cm4gbj8oZGF0ZS5qPStuWzBdLGkrblswXS5sZW5ndGgpOi0xfWZ1bmN0aW9uIGQzX3RpbWVfcGFyc2VIb3VyMjQoZGF0ZSxzdHJpbmcsaSl7ZDNfdGltZV9udW1iZXJSZS5sYXN0SW5kZXg9MDt2YXIgbj1kM190aW1lX251bWJlclJlLmV4ZWMoc3RyaW5nLnN1YnN0cmluZyhpLGkrMikpO3JldHVybiBuPyhkYXRlLkg9K25bMF0saStuWzBdLmxlbmd0aCk6LTF9ZnVuY3Rpb24gZDNfdGltZV9wYXJzZU1pbnV0ZXMoZGF0ZSxzdHJpbmcsaSl7ZDNfdGltZV9udW1iZXJSZS5sYXN0SW5kZXg9MDt2YXIgbj1kM190aW1lX251bWJlclJlLmV4ZWMoc3RyaW5nLnN1YnN0cmluZyhpLGkrMikpO3JldHVybiBuPyhkYXRlLk09K25bMF0saStuWzBdLmxlbmd0aCk6LTF9ZnVuY3Rpb24gZDNfdGltZV9wYXJzZVNlY29uZHMoZGF0ZSxzdHJpbmcsaSl7ZDNfdGltZV9udW1iZXJSZS5sYXN0SW5kZXg9MDt2YXIgbj1kM190aW1lX251bWJlclJlLmV4ZWMoc3RyaW5nLnN1YnN0cmluZyhpLGkrMikpO3JldHVybiBuPyhkYXRlLlM9K25bMF0saStuWzBdLmxlbmd0aCk6LTF9ZnVuY3Rpb24gZDNfdGltZV9wYXJzZU1pbGxpc2Vjb25kcyhkYXRlLHN0cmluZyxpKXtkM190aW1lX251bWJlclJlLmxhc3RJbmRleD0wO3ZhciBuPWQzX3RpbWVfbnVtYmVyUmUuZXhlYyhzdHJpbmcuc3Vic3RyaW5nKGksaSszKSk7cmV0dXJuIG4/KGRhdGUuTD0rblswXSxpK25bMF0ubGVuZ3RoKTotMX1mdW5jdGlvbiBkM190aW1lX3pvbmUoZCl7dmFyIHo9ZC5nZXRUaW1lem9uZU9mZnNldCgpLHpzPXo+MD9cIi1cIjpcIitcIix6aD1+fihhYnMoeikvNjApLHptPWFicyh6KSU2MDtyZXR1cm4genMrZDNfdGltZV9mb3JtYXRQYWQoemgsXCIwXCIsMikrZDNfdGltZV9mb3JtYXRQYWQoem0sXCIwXCIsMil9ZnVuY3Rpb24gZDNfdGltZV9wYXJzZUxpdGVyYWxQZXJjZW50KGRhdGUsc3RyaW5nLGkpe2QzX3RpbWVfcGVyY2VudFJlLmxhc3RJbmRleD0wO3ZhciBuPWQzX3RpbWVfcGVyY2VudFJlLmV4ZWMoc3RyaW5nLnN1YnN0cmluZyhpLGkrMSkpO3JldHVybiBuP2krblswXS5sZW5ndGg6LTF9ZnVuY3Rpb24gZDNfdGltZV9mb3JtYXRNdWx0aShmb3JtYXRzKXt2YXIgbj1mb3JtYXRzLmxlbmd0aCxpPS0xO3doaWxlKCsraTxuKWZvcm1hdHNbaV1bMF09dGhpcyhmb3JtYXRzW2ldWzBdKTtyZXR1cm4gZnVuY3Rpb24oZGF0ZSl7dmFyIGk9MCxmPWZvcm1hdHNbaV07d2hpbGUoIWZbMV0oZGF0ZSkpZj1mb3JtYXRzWysraV07cmV0dXJuIGZbMF0oZGF0ZSl9fWQzLmxvY2FsZT1mdW5jdGlvbihsb2NhbGUpe3JldHVybntudW1iZXJGb3JtYXQ6ZDNfbG9jYWxlX251bWJlckZvcm1hdChsb2NhbGUpLHRpbWVGb3JtYXQ6ZDNfbG9jYWxlX3RpbWVGb3JtYXQobG9jYWxlKX19O3ZhciBkM19sb2NhbGVfZW5VUz1kMy5sb2NhbGUoe2RlY2ltYWw6XCIuXCIsdGhvdXNhbmRzOlwiLFwiLGdyb3VwaW5nOlszXSxjdXJyZW5jeTpbXCIkXCIsXCJcIl0sZGF0ZVRpbWU6XCIlYSAlYiAlZSAlWCAlWVwiLGRhdGU6XCIlbS8lZC8lWVwiLHRpbWU6XCIlSDolTTolU1wiLHBlcmlvZHM6W1wiQU1cIixcIlBNXCJdLGRheXM6W1wiU3VuZGF5XCIsXCJNb25kYXlcIixcIlR1ZXNkYXlcIixcIldlZG5lc2RheVwiLFwiVGh1cnNkYXlcIixcIkZyaWRheVwiLFwiU2F0dXJkYXlcIl0sc2hvcnREYXlzOltcIlN1blwiLFwiTW9uXCIsXCJUdWVcIixcIldlZFwiLFwiVGh1XCIsXCJGcmlcIixcIlNhdFwiXSxtb250aHM6W1wiSmFudWFyeVwiLFwiRmVicnVhcnlcIixcIk1hcmNoXCIsXCJBcHJpbFwiLFwiTWF5XCIsXCJKdW5lXCIsXCJKdWx5XCIsXCJBdWd1c3RcIixcIlNlcHRlbWJlclwiLFwiT2N0b2JlclwiLFwiTm92ZW1iZXJcIixcIkRlY2VtYmVyXCJdLHNob3J0TW9udGhzOltcIkphblwiLFwiRmViXCIsXCJNYXJcIixcIkFwclwiLFwiTWF5XCIsXCJKdW5cIixcIkp1bFwiLFwiQXVnXCIsXCJTZXBcIixcIk9jdFwiLFwiTm92XCIsXCJEZWNcIl19KTtkMy5mb3JtYXQ9ZDNfbG9jYWxlX2VuVVMubnVtYmVyRm9ybWF0O2Z1bmN0aW9uIGQzX3NjYWxlX2JpbGluZWFyKGRvbWFpbixyYW5nZSx1bmludGVycG9sYXRlLGludGVycG9sYXRlKXt2YXIgdT11bmludGVycG9sYXRlKGRvbWFpblswXSxkb21haW5bMV0pLGk9aW50ZXJwb2xhdGUocmFuZ2VbMF0scmFuZ2VbMV0pO3JldHVybiBmdW5jdGlvbih4KXtyZXR1cm4gaSh1KHgpKX19ZnVuY3Rpb24gZDNfc2NhbGVfbmljZShkb21haW4sbmljZSl7dmFyIGkwPTAsaTE9ZG9tYWluLmxlbmd0aC0xLHgwPWRvbWFpbltpMF0seDE9ZG9tYWluW2kxXSxkeDtpZih4MTx4MCl7ZHg9aTAsaTA9aTEsaTE9ZHg7ZHg9eDAseDA9eDEseDE9ZHh9ZG9tYWluW2kwXT1uaWNlLmZsb29yKHgwKTtkb21haW5baTFdPW5pY2UuY2VpbCh4MSk7cmV0dXJuIGRvbWFpbn1mdW5jdGlvbiBkM19zY2FsZV9uaWNlU3RlcChzdGVwKXtyZXR1cm4gc3RlcD97Zmxvb3I6ZnVuY3Rpb24oeCl7cmV0dXJuIE1hdGguZmxvb3IoeC9zdGVwKSpzdGVwfSxjZWlsOmZ1bmN0aW9uKHgpe3JldHVybiBNYXRoLmNlaWwoeC9zdGVwKSpzdGVwfX06ZDNfc2NhbGVfbmljZUlkZW50aXR5fXZhciBkM19zY2FsZV9uaWNlSWRlbnRpdHk9e2Zsb29yOmQzX2lkZW50aXR5LGNlaWw6ZDNfaWRlbnRpdHl9O2Z1bmN0aW9uIGQzX3NjYWxlX3BvbHlsaW5lYXIoZG9tYWluLHJhbmdlLHVuaW50ZXJwb2xhdGUsaW50ZXJwb2xhdGUpe3ZhciB1PVtdLGk9W10saj0wLGs9TWF0aC5taW4oZG9tYWluLmxlbmd0aCxyYW5nZS5sZW5ndGgpLTE7aWYoZG9tYWluW2tdPGRvbWFpblswXSl7ZG9tYWluPWRvbWFpbi5zbGljZSgpLnJldmVyc2UoKTtyYW5nZT1yYW5nZS5zbGljZSgpLnJldmVyc2UoKX13aGlsZSgrK2o8PWspe3UucHVzaCh1bmludGVycG9sYXRlKGRvbWFpbltqLTFdLGRvbWFpbltqXSkpO2kucHVzaChpbnRlcnBvbGF0ZShyYW5nZVtqLTFdLHJhbmdlW2pdKSl9cmV0dXJuIGZ1bmN0aW9uKHgpe3ZhciBqPWQzLmJpc2VjdChkb21haW4seCwxLGspLTE7cmV0dXJuIGlbal0odVtqXSh4KSl9fWQzLnNjYWxlPXt9O2Z1bmN0aW9uIGQzX3NjYWxlRXh0ZW50KGRvbWFpbil7dmFyIHN0YXJ0PWRvbWFpblswXSxzdG9wPWRvbWFpbltkb21haW4ubGVuZ3RoLTFdO3JldHVybiBzdGFydDxzdG9wP1tzdGFydCxzdG9wXTpbc3RvcCxzdGFydF19ZnVuY3Rpb24gZDNfc2NhbGVSYW5nZShzY2FsZSl7cmV0dXJuIHNjYWxlLnJhbmdlRXh0ZW50P3NjYWxlLnJhbmdlRXh0ZW50KCk6ZDNfc2NhbGVFeHRlbnQoc2NhbGUucmFuZ2UoKSl9ZDMuc2NhbGUubGluZWFyPWZ1bmN0aW9uKCl7cmV0dXJuIGQzX3NjYWxlX2xpbmVhcihbMCwxXSxbMCwxXSxkM19pbnRlcnBvbGF0ZSxmYWxzZSl9O2Z1bmN0aW9uIGQzX3NjYWxlX2xpbmVhcihkb21haW4scmFuZ2UsaW50ZXJwb2xhdGUsY2xhbXApe3ZhciBvdXRwdXQsaW5wdXQ7ZnVuY3Rpb24gcmVzY2FsZSgpe3ZhciBsaW5lYXI9TWF0aC5taW4oZG9tYWluLmxlbmd0aCxyYW5nZS5sZW5ndGgpPjI/ZDNfc2NhbGVfcG9seWxpbmVhcjpkM19zY2FsZV9iaWxpbmVhcix1bmludGVycG9sYXRlPWNsYW1wP2QzX3VuaW50ZXJwb2xhdGVDbGFtcDpkM191bmludGVycG9sYXRlTnVtYmVyO291dHB1dD1saW5lYXIoZG9tYWluLHJhbmdlLHVuaW50ZXJwb2xhdGUsaW50ZXJwb2xhdGUpO2lucHV0PWxpbmVhcihyYW5nZSxkb21haW4sdW5pbnRlcnBvbGF0ZSxkM19pbnRlcnBvbGF0ZSk7cmV0dXJuIHNjYWxlfWZ1bmN0aW9uIHNjYWxlKHgpe3JldHVybiBvdXRwdXQoeCl9c2NhbGUuaW52ZXJ0PWZ1bmN0aW9uKHkpe3JldHVybiBpbnB1dCh5KX07c2NhbGUuZG9tYWluPWZ1bmN0aW9uKHgpe2lmKCFhcmd1bWVudHMubGVuZ3RoKXJldHVybiBkb21haW47ZG9tYWluPXgubWFwKE51bWJlcik7cmV0dXJuIHJlc2NhbGUoKX07c2NhbGUucmFuZ2U9ZnVuY3Rpb24oeCl7aWYoIWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHJhbmdlO3JhbmdlPXg7cmV0dXJuIHJlc2NhbGUoKX07c2NhbGUucmFuZ2VSb3VuZD1mdW5jdGlvbih4KXtyZXR1cm4gc2NhbGUucmFuZ2UoeCkuaW50ZXJwb2xhdGUoZDNfaW50ZXJwb2xhdGVSb3VuZCl9O3NjYWxlLmNsYW1wPWZ1bmN0aW9uKHgpe2lmKCFhcmd1bWVudHMubGVuZ3RoKXJldHVybiBjbGFtcDtjbGFtcD14O3JldHVybiByZXNjYWxlKCl9O3NjYWxlLmludGVycG9sYXRlPWZ1bmN0aW9uKHgpe2lmKCFhcmd1bWVudHMubGVuZ3RoKXJldHVybiBpbnRlcnBvbGF0ZTtpbnRlcnBvbGF0ZT14O3JldHVybiByZXNjYWxlKCl9O3NjYWxlLnRpY2tzPWZ1bmN0aW9uKG0pe3JldHVybiBkM19zY2FsZV9saW5lYXJUaWNrcyhkb21haW4sbSl9O3NjYWxlLnRpY2tGb3JtYXQ9ZnVuY3Rpb24obSxmb3JtYXQpe3JldHVybiBkM19zY2FsZV9saW5lYXJUaWNrRm9ybWF0KGRvbWFpbixtLGZvcm1hdCl9O3NjYWxlLm5pY2U9ZnVuY3Rpb24obSl7ZDNfc2NhbGVfbGluZWFyTmljZShkb21haW4sbSk7cmV0dXJuIHJlc2NhbGUoKX07c2NhbGUuY29weT1mdW5jdGlvbigpe3JldHVybiBkM19zY2FsZV9saW5lYXIoZG9tYWluLHJhbmdlLGludGVycG9sYXRlLGNsYW1wKX07cmV0dXJuIHJlc2NhbGUoKX1mdW5jdGlvbiBkM19zY2FsZV9saW5lYXJSZWJpbmQoc2NhbGUsbGluZWFyKXtyZXR1cm4gZDMucmViaW5kKHNjYWxlLGxpbmVhcixcInJhbmdlXCIsXCJyYW5nZVJvdW5kXCIsXCJpbnRlcnBvbGF0ZVwiLFwiY2xhbXBcIil9ZnVuY3Rpb24gZDNfc2NhbGVfbGluZWFyTmljZShkb21haW4sbSl7cmV0dXJuIGQzX3NjYWxlX25pY2UoZG9tYWluLGQzX3NjYWxlX25pY2VTdGVwKGQzX3NjYWxlX2xpbmVhclRpY2tSYW5nZShkb21haW4sbSlbMl0pKX1mdW5jdGlvbiBkM19zY2FsZV9saW5lYXJUaWNrUmFuZ2UoZG9tYWluLG0pe2lmKG09PW51bGwpbT0xMDt2YXIgZXh0ZW50PWQzX3NjYWxlRXh0ZW50KGRvbWFpbiksc3Bhbj1leHRlbnRbMV0tZXh0ZW50WzBdLHN0ZXA9TWF0aC5wb3coMTAsTWF0aC5mbG9vcihNYXRoLmxvZyhzcGFuL20pL01hdGguTE4xMCkpLGVycj1tL3NwYW4qc3RlcDtpZihlcnI8PS4xNSlzdGVwKj0xMDtlbHNlIGlmKGVycjw9LjM1KXN0ZXAqPTU7ZWxzZSBpZihlcnI8PS43NSlzdGVwKj0yO2V4dGVudFswXT1NYXRoLmNlaWwoZXh0ZW50WzBdL3N0ZXApKnN0ZXA7ZXh0ZW50WzFdPU1hdGguZmxvb3IoZXh0ZW50WzFdL3N0ZXApKnN0ZXArc3RlcCouNTtleHRlbnRbMl09c3RlcDtyZXR1cm4gZXh0ZW50fWZ1bmN0aW9uIGQzX3NjYWxlX2xpbmVhclRpY2tzKGRvbWFpbixtKXtyZXR1cm4gZDMucmFuZ2UuYXBwbHkoZDMsZDNfc2NhbGVfbGluZWFyVGlja1JhbmdlKGRvbWFpbixtKSl9ZnVuY3Rpb24gZDNfc2NhbGVfbGluZWFyVGlja0Zvcm1hdChkb21haW4sbSxmb3JtYXQpe3ZhciByYW5nZT1kM19zY2FsZV9saW5lYXJUaWNrUmFuZ2UoZG9tYWluLG0pO3JldHVybiBkMy5mb3JtYXQoZm9ybWF0P2Zvcm1hdC5yZXBsYWNlKGQzX2Zvcm1hdF9yZSxmdW5jdGlvbihhLGIsYyxkLGUsZixnLGgsaSxqKXtyZXR1cm5bYixjLGQsZSxmLGcsaCxpfHxcIi5cIitkM19zY2FsZV9saW5lYXJGb3JtYXRQcmVjaXNpb24oaixyYW5nZSksal0uam9pbihcIlwiKX0pOlwiLC5cIitkM19zY2FsZV9saW5lYXJQcmVjaXNpb24ocmFuZ2VbMl0pK1wiZlwiKX12YXIgZDNfc2NhbGVfbGluZWFyRm9ybWF0U2lnbmlmaWNhbnQ9e3M6MSxnOjEscDoxLHI6MSxlOjF9O2Z1bmN0aW9uIGQzX3NjYWxlX2xpbmVhclByZWNpc2lvbih2YWx1ZSl7cmV0dXJuLU1hdGguZmxvb3IoTWF0aC5sb2codmFsdWUpL01hdGguTE4xMCsuMDEpfWZ1bmN0aW9uIGQzX3NjYWxlX2xpbmVhckZvcm1hdFByZWNpc2lvbih0eXBlLHJhbmdlKXt2YXIgcD1kM19zY2FsZV9saW5lYXJQcmVjaXNpb24ocmFuZ2VbMl0pO3JldHVybiB0eXBlIGluIGQzX3NjYWxlX2xpbmVhckZvcm1hdFNpZ25pZmljYW50P01hdGguYWJzKHAtZDNfc2NhbGVfbGluZWFyUHJlY2lzaW9uKE1hdGgubWF4KE1hdGguYWJzKHJhbmdlWzBdKSxNYXRoLmFicyhyYW5nZVsxXSkpKSkrICsodHlwZSE9PVwiZVwiKTpwLSh0eXBlPT09XCIlXCIpKjJ9dmFyIGQzX2FycmF5U2xpY2U9W10uc2xpY2UsZDNfYXJyYXk9ZnVuY3Rpb24obGlzdCl7cmV0dXJuIGQzX2FycmF5U2xpY2UuY2FsbChsaXN0KX07dmFyIGQzX2RvY3VtZW50PWRvY3VtZW50LGQzX2RvY3VtZW50RWxlbWVudD1kM19kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQsZDNfd2luZG93PXdpbmRvdzt0cnl7ZDNfYXJyYXkoZDNfZG9jdW1lbnRFbGVtZW50LmNoaWxkTm9kZXMpWzBdLm5vZGVUeXBlfWNhdGNoKGUpe2QzX2FycmF5PWZ1bmN0aW9uKGxpc3Qpe3ZhciBpPWxpc3QubGVuZ3RoLGFycmF5PW5ldyBBcnJheShpKTt3aGlsZShpLS0pYXJyYXlbaV09bGlzdFtpXTtyZXR1cm4gYXJyYXl9fXZhciBkM19zdWJjbGFzcz17fS5fX3Byb3RvX18/ZnVuY3Rpb24ob2JqZWN0LHByb3RvdHlwZSl7b2JqZWN0Ll9fcHJvdG9fXz1wcm90b3R5cGV9OmZ1bmN0aW9uKG9iamVjdCxwcm90b3R5cGUpe2Zvcih2YXIgcHJvcGVydHkgaW4gcHJvdG90eXBlKW9iamVjdFtwcm9wZXJ0eV09cHJvdG90eXBlW3Byb3BlcnR5XX07ZnVuY3Rpb24gZDNfdmVuZG9yU3ltYm9sKG9iamVjdCxuYW1lKXtpZihuYW1lIGluIG9iamVjdClyZXR1cm4gbmFtZTtuYW1lPW5hbWUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkrbmFtZS5zdWJzdHJpbmcoMSk7Zm9yKHZhciBpPTAsbj1kM192ZW5kb3JQcmVmaXhlcy5sZW5ndGg7aTxuOysraSl7dmFyIHByZWZpeE5hbWU9ZDNfdmVuZG9yUHJlZml4ZXNbaV0rbmFtZTtpZihwcmVmaXhOYW1lIGluIG9iamVjdClyZXR1cm4gcHJlZml4TmFtZX19dmFyIGQzX3ZlbmRvclByZWZpeGVzPVtcIndlYmtpdFwiLFwibXNcIixcIm1velwiLFwiTW96XCIsXCJvXCIsXCJPXCJdO2Z1bmN0aW9uIGQzX3NlbGVjdGlvbihncm91cHMpe2QzX3N1YmNsYXNzKGdyb3VwcyxkM19zZWxlY3Rpb25Qcm90b3R5cGUpO3JldHVybiBncm91cHN9dmFyIGQzX3NlbGVjdD1mdW5jdGlvbihzLG4pe3JldHVybiBuLnF1ZXJ5U2VsZWN0b3Iocyl9LGQzX3NlbGVjdEFsbD1mdW5jdGlvbihzLG4pe3JldHVybiBuLnF1ZXJ5U2VsZWN0b3JBbGwocyl9LGQzX3NlbGVjdE1hdGNoZXI9ZDNfZG9jdW1lbnRFbGVtZW50W2QzX3ZlbmRvclN5bWJvbChkM19kb2N1bWVudEVsZW1lbnQsXCJtYXRjaGVzU2VsZWN0b3JcIildLGQzX3NlbGVjdE1hdGNoZXM9ZnVuY3Rpb24obixzKXtyZXR1cm4gZDNfc2VsZWN0TWF0Y2hlci5jYWxsKG4scyl9O2lmKHR5cGVvZiBTaXp6bGU9PT1cImZ1bmN0aW9uXCIpe2QzX3NlbGVjdD1mdW5jdGlvbihzLG4pe3JldHVybiBTaXp6bGUocyxuKVswXXx8bnVsbH07ZDNfc2VsZWN0QWxsPWZ1bmN0aW9uKHMsbil7cmV0dXJuIFNpenpsZS51bmlxdWVTb3J0KFNpenpsZShzLG4pKX07ZDNfc2VsZWN0TWF0Y2hlcz1TaXp6bGUubWF0Y2hlc1NlbGVjdG9yfWQzLnNlbGVjdGlvbj1mdW5jdGlvbigpe3JldHVybiBkM19zZWxlY3Rpb25Sb290fTt2YXIgZDNfc2VsZWN0aW9uUHJvdG90eXBlPWQzLnNlbGVjdGlvbi5wcm90b3R5cGU9W107ZDNfc2VsZWN0aW9uUHJvdG90eXBlLnNlbGVjdD1mdW5jdGlvbihzZWxlY3Rvcil7dmFyIHN1Ymdyb3Vwcz1bXSxzdWJncm91cCxzdWJub2RlLGdyb3VwLG5vZGU7c2VsZWN0b3I9ZDNfc2VsZWN0aW9uX3NlbGVjdG9yKHNlbGVjdG9yKTtmb3IodmFyIGo9LTEsbT10aGlzLmxlbmd0aDsrK2o8bTspe3N1Ymdyb3Vwcy5wdXNoKHN1Ymdyb3VwPVtdKTtzdWJncm91cC5wYXJlbnROb2RlPShncm91cD10aGlzW2pdKS5wYXJlbnROb2RlO2Zvcih2YXIgaT0tMSxuPWdyb3VwLmxlbmd0aDsrK2k8bjspe2lmKG5vZGU9Z3JvdXBbaV0pe3N1Ymdyb3VwLnB1c2goc3Vibm9kZT1zZWxlY3Rvci5jYWxsKG5vZGUsbm9kZS5fX2RhdGFfXyxpLGopKTtpZihzdWJub2RlJiZcIl9fZGF0YV9fXCJpbiBub2RlKXN1Ym5vZGUuX19kYXRhX189bm9kZS5fX2RhdGFfX31lbHNle3N1Ymdyb3VwLnB1c2gobnVsbCl9fX1yZXR1cm4gZDNfc2VsZWN0aW9uKHN1Ymdyb3Vwcyl9O2Z1bmN0aW9uIGQzX3NlbGVjdGlvbl9zZWxlY3RvcihzZWxlY3Rvcil7cmV0dXJuIHR5cGVvZiBzZWxlY3Rvcj09PVwiZnVuY3Rpb25cIj9zZWxlY3RvcjpmdW5jdGlvbigpe3JldHVybiBkM19zZWxlY3Qoc2VsZWN0b3IsdGhpcyl9fWQzX3NlbGVjdGlvblByb3RvdHlwZS5zZWxlY3RBbGw9ZnVuY3Rpb24oc2VsZWN0b3Ipe3ZhciBzdWJncm91cHM9W10sc3ViZ3JvdXAsbm9kZTtzZWxlY3Rvcj1kM19zZWxlY3Rpb25fc2VsZWN0b3JBbGwoc2VsZWN0b3IpO2Zvcih2YXIgaj0tMSxtPXRoaXMubGVuZ3RoOysrajxtOyl7Zm9yKHZhciBncm91cD10aGlzW2pdLGk9LTEsbj1ncm91cC5sZW5ndGg7KytpPG47KXtpZihub2RlPWdyb3VwW2ldKXtzdWJncm91cHMucHVzaChzdWJncm91cD1kM19hcnJheShzZWxlY3Rvci5jYWxsKG5vZGUsbm9kZS5fX2RhdGFfXyxpLGopKSk7c3ViZ3JvdXAucGFyZW50Tm9kZT1ub2RlfX19cmV0dXJuIGQzX3NlbGVjdGlvbihzdWJncm91cHMpfTtmdW5jdGlvbiBkM19zZWxlY3Rpb25fc2VsZWN0b3JBbGwoc2VsZWN0b3Ipe3JldHVybiB0eXBlb2Ygc2VsZWN0b3I9PT1cImZ1bmN0aW9uXCI/c2VsZWN0b3I6ZnVuY3Rpb24oKXtyZXR1cm4gZDNfc2VsZWN0QWxsKHNlbGVjdG9yLHRoaXMpfX1kM19zZWxlY3Rpb25Qcm90b3R5cGUuYXR0cj1mdW5jdGlvbihuYW1lLHZhbHVlKXtpZihhcmd1bWVudHMubGVuZ3RoPDIpe2lmKHR5cGVvZiBuYW1lPT09XCJzdHJpbmdcIil7dmFyIG5vZGU9dGhpcy5ub2RlKCk7bmFtZT1kMy5ucy5xdWFsaWZ5KG5hbWUpO3JldHVybiBuYW1lLmxvY2FsP25vZGUuZ2V0QXR0cmlidXRlTlMobmFtZS5zcGFjZSxuYW1lLmxvY2FsKTpub2RlLmdldEF0dHJpYnV0ZShuYW1lKX1mb3IodmFsdWUgaW4gbmFtZSl0aGlzLmVhY2goZDNfc2VsZWN0aW9uX2F0dHIodmFsdWUsbmFtZVt2YWx1ZV0pKTtyZXR1cm4gdGhpc31yZXR1cm4gdGhpcy5lYWNoKGQzX3NlbGVjdGlvbl9hdHRyKG5hbWUsdmFsdWUpKX07ZnVuY3Rpb24gZDNfc2VsZWN0aW9uX2F0dHIobmFtZSx2YWx1ZSl7bmFtZT1kMy5ucy5xdWFsaWZ5KG5hbWUpO2Z1bmN0aW9uIGF0dHJOdWxsKCl7dGhpcy5yZW1vdmVBdHRyaWJ1dGUobmFtZSl9ZnVuY3Rpb24gYXR0ck51bGxOUygpe3RoaXMucmVtb3ZlQXR0cmlidXRlTlMobmFtZS5zcGFjZSxuYW1lLmxvY2FsKX1mdW5jdGlvbiBhdHRyQ29uc3RhbnQoKXt0aGlzLnNldEF0dHJpYnV0ZShuYW1lLHZhbHVlKX1mdW5jdGlvbiBhdHRyQ29uc3RhbnROUygpe3RoaXMuc2V0QXR0cmlidXRlTlMobmFtZS5zcGFjZSxuYW1lLmxvY2FsLHZhbHVlKX1mdW5jdGlvbiBhdHRyRnVuY3Rpb24oKXt2YXIgeD12YWx1ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aWYoeD09bnVsbCl0aGlzLnJlbW92ZUF0dHJpYnV0ZShuYW1lKTtlbHNlIHRoaXMuc2V0QXR0cmlidXRlKG5hbWUseCl9ZnVuY3Rpb24gYXR0ckZ1bmN0aW9uTlMoKXt2YXIgeD12YWx1ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aWYoeD09bnVsbCl0aGlzLnJlbW92ZUF0dHJpYnV0ZU5TKG5hbWUuc3BhY2UsbmFtZS5sb2NhbCk7ZWxzZSB0aGlzLnNldEF0dHJpYnV0ZU5TKG5hbWUuc3BhY2UsbmFtZS5sb2NhbCx4KX1yZXR1cm4gdmFsdWU9PW51bGw/bmFtZS5sb2NhbD9hdHRyTnVsbE5TOmF0dHJOdWxsOnR5cGVvZiB2YWx1ZT09PVwiZnVuY3Rpb25cIj9uYW1lLmxvY2FsP2F0dHJGdW5jdGlvbk5TOmF0dHJGdW5jdGlvbjpuYW1lLmxvY2FsP2F0dHJDb25zdGFudE5TOmF0dHJDb25zdGFudH1mdW5jdGlvbiBkM19jb2xsYXBzZShzKXtyZXR1cm4gcy50cmltKCkucmVwbGFjZSgvXFxzKy9nLFwiIFwiKX1kM19zZWxlY3Rpb25Qcm90b3R5cGUuY2xhc3NlZD1mdW5jdGlvbihuYW1lLHZhbHVlKXtpZihhcmd1bWVudHMubGVuZ3RoPDIpe2lmKHR5cGVvZiBuYW1lPT09XCJzdHJpbmdcIil7dmFyIG5vZGU9dGhpcy5ub2RlKCksbj0obmFtZT1kM19zZWxlY3Rpb25fY2xhc3NlcyhuYW1lKSkubGVuZ3RoLGk9LTE7aWYodmFsdWU9bm9kZS5jbGFzc0xpc3Qpe3doaWxlKCsraTxuKWlmKCF2YWx1ZS5jb250YWlucyhuYW1lW2ldKSlyZXR1cm4gZmFsc2V9ZWxzZXt2YWx1ZT1ub2RlLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpO3doaWxlKCsraTxuKWlmKCFkM19zZWxlY3Rpb25fY2xhc3NlZFJlKG5hbWVbaV0pLnRlc3QodmFsdWUpKXJldHVybiBmYWxzZX1yZXR1cm4gdHJ1ZX1mb3IodmFsdWUgaW4gbmFtZSl0aGlzLmVhY2goZDNfc2VsZWN0aW9uX2NsYXNzZWQodmFsdWUsbmFtZVt2YWx1ZV0pKTtyZXR1cm4gdGhpc31yZXR1cm4gdGhpcy5lYWNoKGQzX3NlbGVjdGlvbl9jbGFzc2VkKG5hbWUsdmFsdWUpKX07ZnVuY3Rpb24gZDNfc2VsZWN0aW9uX2NsYXNzZWRSZShuYW1lKXtyZXR1cm4gbmV3IFJlZ0V4cChcIig/Ol58XFxcXHMrKVwiK2QzLnJlcXVvdGUobmFtZSkrXCIoPzpcXFxccyt8JClcIixcImdcIil9ZnVuY3Rpb24gZDNfc2VsZWN0aW9uX2NsYXNzZXMobmFtZSl7cmV0dXJuIG5hbWUudHJpbSgpLnNwbGl0KC9efFxccysvKX1mdW5jdGlvbiBkM19zZWxlY3Rpb25fY2xhc3NlZChuYW1lLHZhbHVlKXtuYW1lPWQzX3NlbGVjdGlvbl9jbGFzc2VzKG5hbWUpLm1hcChkM19zZWxlY3Rpb25fY2xhc3NlZE5hbWUpO3ZhciBuPW5hbWUubGVuZ3RoO2Z1bmN0aW9uIGNsYXNzZWRDb25zdGFudCgpe3ZhciBpPS0xO3doaWxlKCsraTxuKW5hbWVbaV0odGhpcyx2YWx1ZSl9ZnVuY3Rpb24gY2xhc3NlZEZ1bmN0aW9uKCl7dmFyIGk9LTEseD12YWx1ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7d2hpbGUoKytpPG4pbmFtZVtpXSh0aGlzLHgpfXJldHVybiB0eXBlb2YgdmFsdWU9PT1cImZ1bmN0aW9uXCI/Y2xhc3NlZEZ1bmN0aW9uOmNsYXNzZWRDb25zdGFudH1mdW5jdGlvbiBkM19zZWxlY3Rpb25fY2xhc3NlZE5hbWUobmFtZSl7dmFyIHJlPWQzX3NlbGVjdGlvbl9jbGFzc2VkUmUobmFtZSk7cmV0dXJuIGZ1bmN0aW9uKG5vZGUsdmFsdWUpe2lmKGM9bm9kZS5jbGFzc0xpc3QpcmV0dXJuIHZhbHVlP2MuYWRkKG5hbWUpOmMucmVtb3ZlKG5hbWUpO3ZhciBjPW5vZGUuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIil8fFwiXCI7aWYodmFsdWUpe3JlLmxhc3RJbmRleD0wO2lmKCFyZS50ZXN0KGMpKW5vZGUuc2V0QXR0cmlidXRlKFwiY2xhc3NcIixkM19jb2xsYXBzZShjK1wiIFwiK25hbWUpKX1lbHNle25vZGUuc2V0QXR0cmlidXRlKFwiY2xhc3NcIixkM19jb2xsYXBzZShjLnJlcGxhY2UocmUsXCIgXCIpKSl9fX1kM19zZWxlY3Rpb25Qcm90b3R5cGUuc3R5bGU9ZnVuY3Rpb24obmFtZSx2YWx1ZSxwcmlvcml0eSl7dmFyIG49YXJndW1lbnRzLmxlbmd0aDtpZihuPDMpe2lmKHR5cGVvZiBuYW1lIT09XCJzdHJpbmdcIil7aWYobjwyKXZhbHVlPVwiXCI7Zm9yKHByaW9yaXR5IGluIG5hbWUpdGhpcy5lYWNoKGQzX3NlbGVjdGlvbl9zdHlsZShwcmlvcml0eSxuYW1lW3ByaW9yaXR5XSx2YWx1ZSkpO3JldHVybiB0aGlzfWlmKG48MilyZXR1cm4gZDNfd2luZG93LmdldENvbXB1dGVkU3R5bGUodGhpcy5ub2RlKCksbnVsbCkuZ2V0UHJvcGVydHlWYWx1ZShuYW1lKTtwcmlvcml0eT1cIlwifXJldHVybiB0aGlzLmVhY2goZDNfc2VsZWN0aW9uX3N0eWxlKG5hbWUsdmFsdWUscHJpb3JpdHkpKX07ZnVuY3Rpb24gZDNfc2VsZWN0aW9uX3N0eWxlKG5hbWUsdmFsdWUscHJpb3JpdHkpe2Z1bmN0aW9uIHN0eWxlTnVsbCgpe3RoaXMuc3R5bGUucmVtb3ZlUHJvcGVydHkobmFtZSl9ZnVuY3Rpb24gc3R5bGVDb25zdGFudCgpe3RoaXMuc3R5bGUuc2V0UHJvcGVydHkobmFtZSx2YWx1ZSxwcmlvcml0eSl9ZnVuY3Rpb24gc3R5bGVGdW5jdGlvbigpe3ZhciB4PXZhbHVlLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtpZih4PT1udWxsKXRoaXMuc3R5bGUucmVtb3ZlUHJvcGVydHkobmFtZSk7ZWxzZSB0aGlzLnN0eWxlLnNldFByb3BlcnR5KG5hbWUseCxwcmlvcml0eSl9cmV0dXJuIHZhbHVlPT1udWxsP3N0eWxlTnVsbDp0eXBlb2YgdmFsdWU9PT1cImZ1bmN0aW9uXCI/c3R5bGVGdW5jdGlvbjpzdHlsZUNvbnN0YW50fWQzX3NlbGVjdGlvblByb3RvdHlwZS5wcm9wZXJ0eT1mdW5jdGlvbihuYW1lLHZhbHVlKXtpZihhcmd1bWVudHMubGVuZ3RoPDIpe2lmKHR5cGVvZiBuYW1lPT09XCJzdHJpbmdcIilyZXR1cm4gdGhpcy5ub2RlKClbbmFtZV07Zm9yKHZhbHVlIGluIG5hbWUpdGhpcy5lYWNoKGQzX3NlbGVjdGlvbl9wcm9wZXJ0eSh2YWx1ZSxuYW1lW3ZhbHVlXSkpO3JldHVybiB0aGlzfXJldHVybiB0aGlzLmVhY2goZDNfc2VsZWN0aW9uX3Byb3BlcnR5KG5hbWUsdmFsdWUpKX07ZnVuY3Rpb24gZDNfc2VsZWN0aW9uX3Byb3BlcnR5KG5hbWUsdmFsdWUpe2Z1bmN0aW9uIHByb3BlcnR5TnVsbCgpe2RlbGV0ZSB0aGlzW25hbWVdfWZ1bmN0aW9uIHByb3BlcnR5Q29uc3RhbnQoKXt0aGlzW25hbWVdPXZhbHVlfWZ1bmN0aW9uIHByb3BlcnR5RnVuY3Rpb24oKXt2YXIgeD12YWx1ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7aWYoeD09bnVsbClkZWxldGUgdGhpc1tuYW1lXTtlbHNlIHRoaXNbbmFtZV09eH1yZXR1cm4gdmFsdWU9PW51bGw/cHJvcGVydHlOdWxsOnR5cGVvZiB2YWx1ZT09PVwiZnVuY3Rpb25cIj9wcm9wZXJ0eUZ1bmN0aW9uOnByb3BlcnR5Q29uc3RhbnR9ZDNfc2VsZWN0aW9uUHJvdG90eXBlLnRleHQ9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBhcmd1bWVudHMubGVuZ3RoP3RoaXMuZWFjaCh0eXBlb2YgdmFsdWU9PT1cImZ1bmN0aW9uXCI/ZnVuY3Rpb24oKXt2YXIgdj12YWx1ZS5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dGhpcy50ZXh0Q29udGVudD12PT1udWxsP1wiXCI6dn06dmFsdWU9PW51bGw/ZnVuY3Rpb24oKXt0aGlzLnRleHRDb250ZW50PVwiXCJ9OmZ1bmN0aW9uKCl7dGhpcy50ZXh0Q29udGVudD12YWx1ZX0pOnRoaXMubm9kZSgpLnRleHRDb250ZW50fTtkM19zZWxlY3Rpb25Qcm90b3R5cGUuaHRtbD1mdW5jdGlvbih2YWx1ZSl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGg/dGhpcy5lYWNoKHR5cGVvZiB2YWx1ZT09PVwiZnVuY3Rpb25cIj9mdW5jdGlvbigpe3ZhciB2PXZhbHVlLmFwcGx5KHRoaXMsYXJndW1lbnRzKTt0aGlzLmlubmVySFRNTD12PT1udWxsP1wiXCI6dn06dmFsdWU9PW51bGw/ZnVuY3Rpb24oKXt0aGlzLmlubmVySFRNTD1cIlwifTpmdW5jdGlvbigpe3RoaXMuaW5uZXJIVE1MPXZhbHVlfSk6dGhpcy5ub2RlKCkuaW5uZXJIVE1MfTtkM19zZWxlY3Rpb25Qcm90b3R5cGUuYXBwZW5kPWZ1bmN0aW9uKG5hbWUpe25hbWU9ZDNfc2VsZWN0aW9uX2NyZWF0b3IobmFtZSk7cmV0dXJuIHRoaXMuc2VsZWN0KGZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYXBwZW5kQ2hpbGQobmFtZS5hcHBseSh0aGlzLGFyZ3VtZW50cykpfSl9O2Z1bmN0aW9uIGQzX3NlbGVjdGlvbl9jcmVhdG9yKG5hbWUpe3JldHVybiB0eXBlb2YgbmFtZT09PVwiZnVuY3Rpb25cIj9uYW1lOihuYW1lPWQzLm5zLnF1YWxpZnkobmFtZSkpLmxvY2FsP2Z1bmN0aW9uKCl7cmV0dXJuIHRoaXMub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50TlMobmFtZS5zcGFjZSxuYW1lLmxvY2FsKVxufTpmdW5jdGlvbigpe3JldHVybiB0aGlzLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKHRoaXMubmFtZXNwYWNlVVJJLG5hbWUpfX1kM19zZWxlY3Rpb25Qcm90b3R5cGUuaW5zZXJ0PWZ1bmN0aW9uKG5hbWUsYmVmb3JlKXtuYW1lPWQzX3NlbGVjdGlvbl9jcmVhdG9yKG5hbWUpO2JlZm9yZT1kM19zZWxlY3Rpb25fc2VsZWN0b3IoYmVmb3JlKTtyZXR1cm4gdGhpcy5zZWxlY3QoZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5pbnNlcnRCZWZvcmUobmFtZS5hcHBseSh0aGlzLGFyZ3VtZW50cyksYmVmb3JlLmFwcGx5KHRoaXMsYXJndW1lbnRzKXx8bnVsbCl9KX07ZDNfc2VsZWN0aW9uUHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLmVhY2goZnVuY3Rpb24oKXt2YXIgcGFyZW50PXRoaXMucGFyZW50Tm9kZTtpZihwYXJlbnQpcGFyZW50LnJlbW92ZUNoaWxkKHRoaXMpfSl9O2QzX3NlbGVjdGlvblByb3RvdHlwZS5kYXRhPWZ1bmN0aW9uKHZhbHVlLGtleSl7dmFyIGk9LTEsbj10aGlzLmxlbmd0aCxncm91cCxub2RlO2lmKCFhcmd1bWVudHMubGVuZ3RoKXt2YWx1ZT1uZXcgQXJyYXkobj0oZ3JvdXA9dGhpc1swXSkubGVuZ3RoKTt3aGlsZSgrK2k8bil7aWYobm9kZT1ncm91cFtpXSl7dmFsdWVbaV09bm9kZS5fX2RhdGFfX319cmV0dXJuIHZhbHVlfWZ1bmN0aW9uIGJpbmQoZ3JvdXAsZ3JvdXBEYXRhKXt2YXIgaSxuPWdyb3VwLmxlbmd0aCxtPWdyb3VwRGF0YS5sZW5ndGgsbjA9TWF0aC5taW4obixtKSx1cGRhdGVOb2Rlcz1uZXcgQXJyYXkobSksZW50ZXJOb2Rlcz1uZXcgQXJyYXkobSksZXhpdE5vZGVzPW5ldyBBcnJheShuKSxub2RlLG5vZGVEYXRhO2lmKGtleSl7dmFyIG5vZGVCeUtleVZhbHVlPW5ldyBkM19NYXAsZGF0YUJ5S2V5VmFsdWU9bmV3IGQzX01hcCxrZXlWYWx1ZXM9W10sa2V5VmFsdWU7Zm9yKGk9LTE7KytpPG47KXtrZXlWYWx1ZT1rZXkuY2FsbChub2RlPWdyb3VwW2ldLG5vZGUuX19kYXRhX18saSk7aWYobm9kZUJ5S2V5VmFsdWUuaGFzKGtleVZhbHVlKSl7ZXhpdE5vZGVzW2ldPW5vZGV9ZWxzZXtub2RlQnlLZXlWYWx1ZS5zZXQoa2V5VmFsdWUsbm9kZSl9a2V5VmFsdWVzLnB1c2goa2V5VmFsdWUpfWZvcihpPS0xOysraTxtOyl7a2V5VmFsdWU9a2V5LmNhbGwoZ3JvdXBEYXRhLG5vZGVEYXRhPWdyb3VwRGF0YVtpXSxpKTtpZihub2RlPW5vZGVCeUtleVZhbHVlLmdldChrZXlWYWx1ZSkpe3VwZGF0ZU5vZGVzW2ldPW5vZGU7bm9kZS5fX2RhdGFfXz1ub2RlRGF0YX1lbHNlIGlmKCFkYXRhQnlLZXlWYWx1ZS5oYXMoa2V5VmFsdWUpKXtlbnRlck5vZGVzW2ldPWQzX3NlbGVjdGlvbl9kYXRhTm9kZShub2RlRGF0YSl9ZGF0YUJ5S2V5VmFsdWUuc2V0KGtleVZhbHVlLG5vZGVEYXRhKTtub2RlQnlLZXlWYWx1ZS5yZW1vdmUoa2V5VmFsdWUpfWZvcihpPS0xOysraTxuOyl7aWYobm9kZUJ5S2V5VmFsdWUuaGFzKGtleVZhbHVlc1tpXSkpe2V4aXROb2Rlc1tpXT1ncm91cFtpXX19fWVsc2V7Zm9yKGk9LTE7KytpPG4wOyl7bm9kZT1ncm91cFtpXTtub2RlRGF0YT1ncm91cERhdGFbaV07aWYobm9kZSl7bm9kZS5fX2RhdGFfXz1ub2RlRGF0YTt1cGRhdGVOb2Rlc1tpXT1ub2RlfWVsc2V7ZW50ZXJOb2Rlc1tpXT1kM19zZWxlY3Rpb25fZGF0YU5vZGUobm9kZURhdGEpfX1mb3IoO2k8bTsrK2kpe2VudGVyTm9kZXNbaV09ZDNfc2VsZWN0aW9uX2RhdGFOb2RlKGdyb3VwRGF0YVtpXSl9Zm9yKDtpPG47KytpKXtleGl0Tm9kZXNbaV09Z3JvdXBbaV19fWVudGVyTm9kZXMudXBkYXRlPXVwZGF0ZU5vZGVzO2VudGVyTm9kZXMucGFyZW50Tm9kZT11cGRhdGVOb2Rlcy5wYXJlbnROb2RlPWV4aXROb2Rlcy5wYXJlbnROb2RlPWdyb3VwLnBhcmVudE5vZGU7ZW50ZXIucHVzaChlbnRlck5vZGVzKTt1cGRhdGUucHVzaCh1cGRhdGVOb2Rlcyk7ZXhpdC5wdXNoKGV4aXROb2Rlcyl9dmFyIGVudGVyPWQzX3NlbGVjdGlvbl9lbnRlcihbXSksdXBkYXRlPWQzX3NlbGVjdGlvbihbXSksZXhpdD1kM19zZWxlY3Rpb24oW10pO2lmKHR5cGVvZiB2YWx1ZT09PVwiZnVuY3Rpb25cIil7d2hpbGUoKytpPG4pe2JpbmQoZ3JvdXA9dGhpc1tpXSx2YWx1ZS5jYWxsKGdyb3VwLGdyb3VwLnBhcmVudE5vZGUuX19kYXRhX18saSkpfX1lbHNle3doaWxlKCsraTxuKXtiaW5kKGdyb3VwPXRoaXNbaV0sdmFsdWUpfX11cGRhdGUuZW50ZXI9ZnVuY3Rpb24oKXtyZXR1cm4gZW50ZXJ9O3VwZGF0ZS5leGl0PWZ1bmN0aW9uKCl7cmV0dXJuIGV4aXR9O3JldHVybiB1cGRhdGV9O2Z1bmN0aW9uIGQzX3NlbGVjdGlvbl9kYXRhTm9kZShkYXRhKXtyZXR1cm57X19kYXRhX186ZGF0YX19ZDNfc2VsZWN0aW9uUHJvdG90eXBlLmRhdHVtPWZ1bmN0aW9uKHZhbHVlKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD90aGlzLnByb3BlcnR5KFwiX19kYXRhX19cIix2YWx1ZSk6dGhpcy5wcm9wZXJ0eShcIl9fZGF0YV9fXCIpfTtkM19zZWxlY3Rpb25Qcm90b3R5cGUuZmlsdGVyPWZ1bmN0aW9uKGZpbHRlcil7dmFyIHN1Ymdyb3Vwcz1bXSxzdWJncm91cCxncm91cCxub2RlO2lmKHR5cGVvZiBmaWx0ZXIhPT1cImZ1bmN0aW9uXCIpZmlsdGVyPWQzX3NlbGVjdGlvbl9maWx0ZXIoZmlsdGVyKTtmb3IodmFyIGo9MCxtPXRoaXMubGVuZ3RoO2o8bTtqKyspe3N1Ymdyb3Vwcy5wdXNoKHN1Ymdyb3VwPVtdKTtzdWJncm91cC5wYXJlbnROb2RlPShncm91cD10aGlzW2pdKS5wYXJlbnROb2RlO2Zvcih2YXIgaT0wLG49Z3JvdXAubGVuZ3RoO2k8bjtpKyspe2lmKChub2RlPWdyb3VwW2ldKSYmZmlsdGVyLmNhbGwobm9kZSxub2RlLl9fZGF0YV9fLGksaikpe3N1Ymdyb3VwLnB1c2gobm9kZSl9fX1yZXR1cm4gZDNfc2VsZWN0aW9uKHN1Ymdyb3Vwcyl9O2Z1bmN0aW9uIGQzX3NlbGVjdGlvbl9maWx0ZXIoc2VsZWN0b3Ipe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBkM19zZWxlY3RNYXRjaGVzKHRoaXMsc2VsZWN0b3IpfX1kM19zZWxlY3Rpb25Qcm90b3R5cGUub3JkZXI9ZnVuY3Rpb24oKXtmb3IodmFyIGo9LTEsbT10aGlzLmxlbmd0aDsrK2o8bTspe2Zvcih2YXIgZ3JvdXA9dGhpc1tqXSxpPWdyb3VwLmxlbmd0aC0xLG5leHQ9Z3JvdXBbaV0sbm9kZTstLWk+PTA7KXtpZihub2RlPWdyb3VwW2ldKXtpZihuZXh0JiZuZXh0IT09bm9kZS5uZXh0U2libGluZyluZXh0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKG5vZGUsbmV4dCk7bmV4dD1ub2RlfX19cmV0dXJuIHRoaXN9O2QzX3NlbGVjdGlvblByb3RvdHlwZS5zb3J0PWZ1bmN0aW9uKGNvbXBhcmF0b3Ipe2NvbXBhcmF0b3I9ZDNfc2VsZWN0aW9uX3NvcnRDb21wYXJhdG9yLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtmb3IodmFyIGo9LTEsbT10aGlzLmxlbmd0aDsrK2o8bTspdGhpc1tqXS5zb3J0KGNvbXBhcmF0b3IpO3JldHVybiB0aGlzLm9yZGVyKCl9O2Z1bmN0aW9uIGQzX3NlbGVjdGlvbl9zb3J0Q29tcGFyYXRvcihjb21wYXJhdG9yKXtpZighYXJndW1lbnRzLmxlbmd0aCljb21wYXJhdG9yPWQzLmFzY2VuZGluZztyZXR1cm4gZnVuY3Rpb24oYSxiKXtyZXR1cm4gYSYmYj9jb21wYXJhdG9yKGEuX19kYXRhX18sYi5fX2RhdGFfXyk6IWEtIWJ9fWZ1bmN0aW9uIGQzX25vb3AoKXt9ZDMuZGlzcGF0Y2g9ZnVuY3Rpb24oKXt2YXIgZGlzcGF0Y2g9bmV3IGQzX2Rpc3BhdGNoLGk9LTEsbj1hcmd1bWVudHMubGVuZ3RoO3doaWxlKCsraTxuKWRpc3BhdGNoW2FyZ3VtZW50c1tpXV09ZDNfZGlzcGF0Y2hfZXZlbnQoZGlzcGF0Y2gpO3JldHVybiBkaXNwYXRjaH07ZnVuY3Rpb24gZDNfZGlzcGF0Y2goKXt9ZDNfZGlzcGF0Y2gucHJvdG90eXBlLm9uPWZ1bmN0aW9uKHR5cGUsbGlzdGVuZXIpe3ZhciBpPXR5cGUuaW5kZXhPZihcIi5cIiksbmFtZT1cIlwiO2lmKGk+PTApe25hbWU9dHlwZS5zdWJzdHJpbmcoaSsxKTt0eXBlPXR5cGUuc3Vic3RyaW5nKDAsaSl9aWYodHlwZSlyZXR1cm4gYXJndW1lbnRzLmxlbmd0aDwyP3RoaXNbdHlwZV0ub24obmFtZSk6dGhpc1t0eXBlXS5vbihuYW1lLGxpc3RlbmVyKTtpZihhcmd1bWVudHMubGVuZ3RoPT09Mil7aWYobGlzdGVuZXI9PW51bGwpZm9yKHR5cGUgaW4gdGhpcyl7aWYodGhpcy5oYXNPd25Qcm9wZXJ0eSh0eXBlKSl0aGlzW3R5cGVdLm9uKG5hbWUsbnVsbCl9cmV0dXJuIHRoaXN9fTtmdW5jdGlvbiBkM19kaXNwYXRjaF9ldmVudChkaXNwYXRjaCl7dmFyIGxpc3RlbmVycz1bXSxsaXN0ZW5lckJ5TmFtZT1uZXcgZDNfTWFwO2Z1bmN0aW9uIGV2ZW50KCl7dmFyIHo9bGlzdGVuZXJzLGk9LTEsbj16Lmxlbmd0aCxsO3doaWxlKCsraTxuKWlmKGw9eltpXS5vbilsLmFwcGx5KHRoaXMsYXJndW1lbnRzKTtyZXR1cm4gZGlzcGF0Y2h9ZXZlbnQub249ZnVuY3Rpb24obmFtZSxsaXN0ZW5lcil7dmFyIGw9bGlzdGVuZXJCeU5hbWUuZ2V0KG5hbWUpLGk7aWYoYXJndW1lbnRzLmxlbmd0aDwyKXJldHVybiBsJiZsLm9uO2lmKGwpe2wub249bnVsbDtsaXN0ZW5lcnM9bGlzdGVuZXJzLnNsaWNlKDAsaT1saXN0ZW5lcnMuaW5kZXhPZihsKSkuY29uY2F0KGxpc3RlbmVycy5zbGljZShpKzEpKTtsaXN0ZW5lckJ5TmFtZS5yZW1vdmUobmFtZSl9aWYobGlzdGVuZXIpbGlzdGVuZXJzLnB1c2gobGlzdGVuZXJCeU5hbWUuc2V0KG5hbWUse29uOmxpc3RlbmVyfSkpO3JldHVybiBkaXNwYXRjaH07cmV0dXJuIGV2ZW50fWQzLmV2ZW50PW51bGw7ZnVuY3Rpb24gZDNfZXZlbnRQcmV2ZW50RGVmYXVsdCgpe2QzLmV2ZW50LnByZXZlbnREZWZhdWx0KCl9ZnVuY3Rpb24gZDNfZXZlbnRTb3VyY2UoKXt2YXIgZT1kMy5ldmVudCxzO3doaWxlKHM9ZS5zb3VyY2VFdmVudCllPXM7cmV0dXJuIGV9ZnVuY3Rpb24gZDNfZXZlbnREaXNwYXRjaCh0YXJnZXQpe3ZhciBkaXNwYXRjaD1uZXcgZDNfZGlzcGF0Y2gsaT0wLG49YXJndW1lbnRzLmxlbmd0aDt3aGlsZSgrK2k8bilkaXNwYXRjaFthcmd1bWVudHNbaV1dPWQzX2Rpc3BhdGNoX2V2ZW50KGRpc3BhdGNoKTtkaXNwYXRjaC5vZj1mdW5jdGlvbih0aGl6LGFyZ3VtZW50eil7cmV0dXJuIGZ1bmN0aW9uKGUxKXt0cnl7dmFyIGUwPWUxLnNvdXJjZUV2ZW50PWQzLmV2ZW50O2UxLnRhcmdldD10YXJnZXQ7ZDMuZXZlbnQ9ZTE7ZGlzcGF0Y2hbZTEudHlwZV0uYXBwbHkodGhpeixhcmd1bWVudHopfWZpbmFsbHl7ZDMuZXZlbnQ9ZTB9fX07cmV0dXJuIGRpc3BhdGNofWQzX3NlbGVjdGlvblByb3RvdHlwZS5vbj1mdW5jdGlvbih0eXBlLGxpc3RlbmVyLGNhcHR1cmUpe3ZhciBuPWFyZ3VtZW50cy5sZW5ndGg7aWYobjwzKXtpZih0eXBlb2YgdHlwZSE9PVwic3RyaW5nXCIpe2lmKG48MilsaXN0ZW5lcj1mYWxzZTtmb3IoY2FwdHVyZSBpbiB0eXBlKXRoaXMuZWFjaChkM19zZWxlY3Rpb25fb24oY2FwdHVyZSx0eXBlW2NhcHR1cmVdLGxpc3RlbmVyKSk7cmV0dXJuIHRoaXN9aWYobjwyKXJldHVybihuPXRoaXMubm9kZSgpW1wiX19vblwiK3R5cGVdKSYmbi5fO2NhcHR1cmU9ZmFsc2V9cmV0dXJuIHRoaXMuZWFjaChkM19zZWxlY3Rpb25fb24odHlwZSxsaXN0ZW5lcixjYXB0dXJlKSl9O2Z1bmN0aW9uIGQzX3NlbGVjdGlvbl9vbih0eXBlLGxpc3RlbmVyLGNhcHR1cmUpe3ZhciBuYW1lPVwiX19vblwiK3R5cGUsaT10eXBlLmluZGV4T2YoXCIuXCIpLHdyYXA9ZDNfc2VsZWN0aW9uX29uTGlzdGVuZXI7aWYoaT4wKXR5cGU9dHlwZS5zdWJzdHJpbmcoMCxpKTt2YXIgZmlsdGVyPWQzX3NlbGVjdGlvbl9vbkZpbHRlcnMuZ2V0KHR5cGUpO2lmKGZpbHRlcil0eXBlPWZpbHRlcix3cmFwPWQzX3NlbGVjdGlvbl9vbkZpbHRlcjtmdW5jdGlvbiBvblJlbW92ZSgpe3ZhciBsPXRoaXNbbmFtZV07aWYobCl7dGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKHR5cGUsbCxsLiQpO2RlbGV0ZSB0aGlzW25hbWVdfX1mdW5jdGlvbiBvbkFkZCgpe3ZhciBsPXdyYXAobGlzdGVuZXIsZDNfYXJyYXkoYXJndW1lbnRzKSk7b25SZW1vdmUuY2FsbCh0aGlzKTt0aGlzLmFkZEV2ZW50TGlzdGVuZXIodHlwZSx0aGlzW25hbWVdPWwsbC4kPWNhcHR1cmUpO2wuXz1saXN0ZW5lcn1mdW5jdGlvbiByZW1vdmVBbGwoKXt2YXIgcmU9bmV3IFJlZ0V4cChcIl5fX29uKFteLl0rKVwiK2QzLnJlcXVvdGUodHlwZSkrXCIkXCIpLG1hdGNoO2Zvcih2YXIgbmFtZSBpbiB0aGlzKXtpZihtYXRjaD1uYW1lLm1hdGNoKHJlKSl7dmFyIGw9dGhpc1tuYW1lXTt0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIobWF0Y2hbMV0sbCxsLiQpO2RlbGV0ZSB0aGlzW25hbWVdfX19cmV0dXJuIGk/bGlzdGVuZXI/b25BZGQ6b25SZW1vdmU6bGlzdGVuZXI/ZDNfbm9vcDpyZW1vdmVBbGx9dmFyIGQzX3NlbGVjdGlvbl9vbkZpbHRlcnM9ZDMubWFwKHttb3VzZWVudGVyOlwibW91c2VvdmVyXCIsbW91c2VsZWF2ZTpcIm1vdXNlb3V0XCJ9KTtkM19zZWxlY3Rpb25fb25GaWx0ZXJzLmZvckVhY2goZnVuY3Rpb24oayl7aWYoXCJvblwiK2sgaW4gZDNfZG9jdW1lbnQpZDNfc2VsZWN0aW9uX29uRmlsdGVycy5yZW1vdmUoayl9KTtmdW5jdGlvbiBkM19zZWxlY3Rpb25fb25MaXN0ZW5lcihsaXN0ZW5lcixhcmd1bWVudHope3JldHVybiBmdW5jdGlvbihlKXt2YXIgbz1kMy5ldmVudDtkMy5ldmVudD1lO2FyZ3VtZW50elswXT10aGlzLl9fZGF0YV9fO3RyeXtsaXN0ZW5lci5hcHBseSh0aGlzLGFyZ3VtZW50eil9ZmluYWxseXtkMy5ldmVudD1vfX19ZnVuY3Rpb24gZDNfc2VsZWN0aW9uX29uRmlsdGVyKGxpc3RlbmVyLGFyZ3VtZW50eil7dmFyIGw9ZDNfc2VsZWN0aW9uX29uTGlzdGVuZXIobGlzdGVuZXIsYXJndW1lbnR6KTtyZXR1cm4gZnVuY3Rpb24oZSl7dmFyIHRhcmdldD10aGlzLHJlbGF0ZWQ9ZS5yZWxhdGVkVGFyZ2V0O2lmKCFyZWxhdGVkfHxyZWxhdGVkIT09dGFyZ2V0JiYhKHJlbGF0ZWQuY29tcGFyZURvY3VtZW50UG9zaXRpb24odGFyZ2V0KSY4KSl7bC5jYWxsKHRhcmdldCxlKX19fWQzX3NlbGVjdGlvblByb3RvdHlwZS5lYWNoPWZ1bmN0aW9uKGNhbGxiYWNrKXtyZXR1cm4gZDNfc2VsZWN0aW9uX2VhY2godGhpcyxmdW5jdGlvbihub2RlLGksail7Y2FsbGJhY2suY2FsbChub2RlLG5vZGUuX19kYXRhX18saSxqKX0pfTtmdW5jdGlvbiBkM19zZWxlY3Rpb25fZWFjaChncm91cHMsY2FsbGJhY2spe2Zvcih2YXIgaj0wLG09Z3JvdXBzLmxlbmd0aDtqPG07aisrKXtmb3IodmFyIGdyb3VwPWdyb3Vwc1tqXSxpPTAsbj1ncm91cC5sZW5ndGgsbm9kZTtpPG47aSsrKXtpZihub2RlPWdyb3VwW2ldKWNhbGxiYWNrKG5vZGUsaSxqKX19cmV0dXJuIGdyb3Vwc31kM19zZWxlY3Rpb25Qcm90b3R5cGUuY2FsbD1mdW5jdGlvbihjYWxsYmFjayl7dmFyIGFyZ3M9ZDNfYXJyYXkoYXJndW1lbnRzKTtjYWxsYmFjay5hcHBseShhcmdzWzBdPXRoaXMsYXJncyk7cmV0dXJuIHRoaXN9O2QzX3NlbGVjdGlvblByb3RvdHlwZS5lbXB0eT1mdW5jdGlvbigpe3JldHVybiF0aGlzLm5vZGUoKX07ZDNfc2VsZWN0aW9uUHJvdG90eXBlLm5vZGU9ZnVuY3Rpb24oKXtmb3IodmFyIGo9MCxtPXRoaXMubGVuZ3RoO2o8bTtqKyspe2Zvcih2YXIgZ3JvdXA9dGhpc1tqXSxpPTAsbj1ncm91cC5sZW5ndGg7aTxuO2krKyl7dmFyIG5vZGU9Z3JvdXBbaV07aWYobm9kZSlyZXR1cm4gbm9kZX19cmV0dXJuIG51bGx9O2QzX3NlbGVjdGlvblByb3RvdHlwZS5zaXplPWZ1bmN0aW9uKCl7dmFyIG49MDt0aGlzLmVhY2goZnVuY3Rpb24oKXsrK259KTtyZXR1cm4gbn07ZnVuY3Rpb24gZDNfc2VsZWN0aW9uX2VudGVyKHNlbGVjdGlvbil7ZDNfc3ViY2xhc3Moc2VsZWN0aW9uLGQzX3NlbGVjdGlvbl9lbnRlclByb3RvdHlwZSk7cmV0dXJuIHNlbGVjdGlvbn12YXIgZDNfc2VsZWN0aW9uX2VudGVyUHJvdG90eXBlPVtdO2QzLnNlbGVjdGlvbi5lbnRlcj1kM19zZWxlY3Rpb25fZW50ZXI7ZDMuc2VsZWN0aW9uLmVudGVyLnByb3RvdHlwZT1kM19zZWxlY3Rpb25fZW50ZXJQcm90b3R5cGU7ZDNfc2VsZWN0aW9uX2VudGVyUHJvdG90eXBlLmFwcGVuZD1kM19zZWxlY3Rpb25Qcm90b3R5cGUuYXBwZW5kO2QzX3NlbGVjdGlvbl9lbnRlclByb3RvdHlwZS5lbXB0eT1kM19zZWxlY3Rpb25Qcm90b3R5cGUuZW1wdHk7ZDNfc2VsZWN0aW9uX2VudGVyUHJvdG90eXBlLm5vZGU9ZDNfc2VsZWN0aW9uUHJvdG90eXBlLm5vZGU7ZDNfc2VsZWN0aW9uX2VudGVyUHJvdG90eXBlLmNhbGw9ZDNfc2VsZWN0aW9uUHJvdG90eXBlLmNhbGw7ZDNfc2VsZWN0aW9uX2VudGVyUHJvdG90eXBlLnNpemU9ZDNfc2VsZWN0aW9uUHJvdG90eXBlLnNpemU7ZDNfc2VsZWN0aW9uX2VudGVyUHJvdG90eXBlLnNlbGVjdD1mdW5jdGlvbihzZWxlY3Rvcil7dmFyIHN1Ymdyb3Vwcz1bXSxzdWJncm91cCxzdWJub2RlLHVwZ3JvdXAsZ3JvdXAsbm9kZTtmb3IodmFyIGo9LTEsbT10aGlzLmxlbmd0aDsrK2o8bTspe3VwZ3JvdXA9KGdyb3VwPXRoaXNbal0pLnVwZGF0ZTtzdWJncm91cHMucHVzaChzdWJncm91cD1bXSk7c3ViZ3JvdXAucGFyZW50Tm9kZT1ncm91cC5wYXJlbnROb2RlO2Zvcih2YXIgaT0tMSxuPWdyb3VwLmxlbmd0aDsrK2k8bjspe2lmKG5vZGU9Z3JvdXBbaV0pe3N1Ymdyb3VwLnB1c2godXBncm91cFtpXT1zdWJub2RlPXNlbGVjdG9yLmNhbGwoZ3JvdXAucGFyZW50Tm9kZSxub2RlLl9fZGF0YV9fLGksaikpO3N1Ym5vZGUuX19kYXRhX189bm9kZS5fX2RhdGFfX31lbHNle3N1Ymdyb3VwLnB1c2gobnVsbCl9fX1yZXR1cm4gZDNfc2VsZWN0aW9uKHN1Ymdyb3Vwcyl9O2QzX3NlbGVjdGlvbl9lbnRlclByb3RvdHlwZS5pbnNlcnQ9ZnVuY3Rpb24obmFtZSxiZWZvcmUpe2lmKGFyZ3VtZW50cy5sZW5ndGg8MiliZWZvcmU9ZDNfc2VsZWN0aW9uX2VudGVySW5zZXJ0QmVmb3JlKHRoaXMpO3JldHVybiBkM19zZWxlY3Rpb25Qcm90b3R5cGUuaW5zZXJ0LmNhbGwodGhpcyxuYW1lLGJlZm9yZSl9O2Z1bmN0aW9uIGQzX3NlbGVjdGlvbl9lbnRlckluc2VydEJlZm9yZShlbnRlcil7dmFyIGkwLGowO3JldHVybiBmdW5jdGlvbihkLGksail7dmFyIGdyb3VwPWVudGVyW2pdLnVwZGF0ZSxuPWdyb3VwLmxlbmd0aCxub2RlO2lmKGohPWowKWowPWosaTA9MDtpZihpPj1pMClpMD1pKzE7d2hpbGUoIShub2RlPWdyb3VwW2kwXSkmJisraTA8bik7cmV0dXJuIG5vZGV9fWQzX3NlbGVjdGlvblByb3RvdHlwZS50cmFuc2l0aW9uPWZ1bmN0aW9uKCl7dmFyIGlkPWQzX3RyYW5zaXRpb25Jbmhlcml0SWR8fCsrZDNfdHJhbnNpdGlvbklkLHN1Ymdyb3Vwcz1bXSxzdWJncm91cCxub2RlLHRyYW5zaXRpb249ZDNfdHJhbnNpdGlvbkluaGVyaXR8fHt0aW1lOkRhdGUubm93KCksZWFzZTpkM19lYXNlX2N1YmljSW5PdXQsZGVsYXk6MCxkdXJhdGlvbjoyNTB9O2Zvcih2YXIgaj0tMSxtPXRoaXMubGVuZ3RoOysrajxtOyl7c3ViZ3JvdXBzLnB1c2goc3ViZ3JvdXA9W10pO2Zvcih2YXIgZ3JvdXA9dGhpc1tqXSxpPS0xLG49Z3JvdXAubGVuZ3RoOysraTxuOyl7aWYobm9kZT1ncm91cFtpXSlkM190cmFuc2l0aW9uTm9kZShub2RlLGksaWQsdHJhbnNpdGlvbik7c3ViZ3JvdXAucHVzaChub2RlKX19cmV0dXJuIGQzX3RyYW5zaXRpb24oc3ViZ3JvdXBzLGlkKX07ZDNfc2VsZWN0aW9uUHJvdG90eXBlLmludGVycnVwdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmVhY2goZDNfc2VsZWN0aW9uX2ludGVycnVwdCl9O2Z1bmN0aW9uIGQzX3NlbGVjdGlvbl9pbnRlcnJ1cHQoKXt2YXIgbG9jaz10aGlzLl9fdHJhbnNpdGlvbl9fO2lmKGxvY2spKytsb2NrLmFjdGl2ZX1kMy5zZWxlY3Q9ZnVuY3Rpb24obm9kZSl7dmFyIGdyb3VwPVt0eXBlb2Ygbm9kZT09PVwic3RyaW5nXCI/ZDNfc2VsZWN0KG5vZGUsZDNfZG9jdW1lbnQpOm5vZGVdO2dyb3VwLnBhcmVudE5vZGU9ZDNfZG9jdW1lbnRFbGVtZW50O3JldHVybiBkM19zZWxlY3Rpb24oW2dyb3VwXSl9O2QzLnNlbGVjdEFsbD1mdW5jdGlvbihub2Rlcyl7dmFyIGdyb3VwPWQzX2FycmF5KHR5cGVvZiBub2Rlcz09PVwic3RyaW5nXCI/ZDNfc2VsZWN0QWxsKG5vZGVzLGQzX2RvY3VtZW50KTpub2Rlcyk7Z3JvdXAucGFyZW50Tm9kZT1kM19kb2N1bWVudEVsZW1lbnQ7cmV0dXJuIGQzX3NlbGVjdGlvbihbZ3JvdXBdKX07dmFyIGQzX3NlbGVjdGlvblJvb3Q9ZDMuc2VsZWN0KGQzX2RvY3VtZW50RWxlbWVudCk7dmFyIGQzX3RpbWVyX3F1ZXVlSGVhZCxkM190aW1lcl9xdWV1ZVRhaWwsZDNfdGltZXJfaW50ZXJ2YWwsZDNfdGltZXJfdGltZW91dCxkM190aW1lcl9hY3RpdmUsZDNfdGltZXJfZnJhbWU9ZDNfd2luZG93W2QzX3ZlbmRvclN5bWJvbChkM193aW5kb3csXCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWVcIildfHxmdW5jdGlvbihjYWxsYmFjayl7c2V0VGltZW91dChjYWxsYmFjaywxNyl9O2QzLnRpbWVyPWZ1bmN0aW9uKGNhbGxiYWNrLGRlbGF5LHRoZW4pe3ZhciBuPWFyZ3VtZW50cy5sZW5ndGg7aWYobjwyKWRlbGF5PTA7aWYobjwzKXRoZW49RGF0ZS5ub3coKTt2YXIgdGltZT10aGVuK2RlbGF5LHRpbWVyPXtjOmNhbGxiYWNrLHQ6dGltZSxmOmZhbHNlLG46bnVsbH07aWYoZDNfdGltZXJfcXVldWVUYWlsKWQzX3RpbWVyX3F1ZXVlVGFpbC5uPXRpbWVyO2Vsc2UgZDNfdGltZXJfcXVldWVIZWFkPXRpbWVyO2QzX3RpbWVyX3F1ZXVlVGFpbD10aW1lcjtpZighZDNfdGltZXJfaW50ZXJ2YWwpe2QzX3RpbWVyX3RpbWVvdXQ9Y2xlYXJUaW1lb3V0KGQzX3RpbWVyX3RpbWVvdXQpO2QzX3RpbWVyX2ludGVydmFsPTE7ZDNfdGltZXJfZnJhbWUoZDNfdGltZXJfc3RlcCl9fTtmdW5jdGlvbiBkM190aW1lcl9zdGVwKCl7dmFyIG5vdz1kM190aW1lcl9tYXJrKCksZGVsYXk9ZDNfdGltZXJfc3dlZXAoKS1ub3c7aWYoZGVsYXk+MjQpe2lmKGlzRmluaXRlKGRlbGF5KSl7Y2xlYXJUaW1lb3V0KGQzX3RpbWVyX3RpbWVvdXQpO2QzX3RpbWVyX3RpbWVvdXQ9c2V0VGltZW91dChkM190aW1lcl9zdGVwLGRlbGF5KX1kM190aW1lcl9pbnRlcnZhbD0wfWVsc2V7ZDNfdGltZXJfaW50ZXJ2YWw9MTtkM190aW1lcl9mcmFtZShkM190aW1lcl9zdGVwKX19ZDMudGltZXIuZmx1c2g9ZnVuY3Rpb24oKXtkM190aW1lcl9tYXJrKCk7ZDNfdGltZXJfc3dlZXAoKX07ZnVuY3Rpb24gZDNfdGltZXJfbWFyaygpe3ZhciBub3c9RGF0ZS5ub3coKTtkM190aW1lcl9hY3RpdmU9ZDNfdGltZXJfcXVldWVIZWFkO3doaWxlKGQzX3RpbWVyX2FjdGl2ZSl7aWYobm93Pj1kM190aW1lcl9hY3RpdmUudClkM190aW1lcl9hY3RpdmUuZj1kM190aW1lcl9hY3RpdmUuYyhub3ctZDNfdGltZXJfYWN0aXZlLnQpO2QzX3RpbWVyX2FjdGl2ZT1kM190aW1lcl9hY3RpdmUubn1yZXR1cm4gbm93fWZ1bmN0aW9uIGQzX3RpbWVyX3N3ZWVwKCl7dmFyIHQwLHQxPWQzX3RpbWVyX3F1ZXVlSGVhZCx0aW1lPUluZmluaXR5O3doaWxlKHQxKXtpZih0MS5mKXt0MT10MD90MC5uPXQxLm46ZDNfdGltZXJfcXVldWVIZWFkPXQxLm59ZWxzZXtpZih0MS50PHRpbWUpdGltZT10MS50O3QxPSh0MD10MSkubn19ZDNfdGltZXJfcXVldWVUYWlsPXQwO3JldHVybiB0aW1lfXZhciBkM19lYXNlX2RlZmF1bHQ9ZnVuY3Rpb24oKXtyZXR1cm4gZDNfaWRlbnRpdHl9O3ZhciBkM19lYXNlPWQzLm1hcCh7bGluZWFyOmQzX2Vhc2VfZGVmYXVsdCxwb2x5OmQzX2Vhc2VfcG9seSxxdWFkOmZ1bmN0aW9uKCl7cmV0dXJuIGQzX2Vhc2VfcXVhZH0sY3ViaWM6ZnVuY3Rpb24oKXtyZXR1cm4gZDNfZWFzZV9jdWJpY30sc2luOmZ1bmN0aW9uKCl7cmV0dXJuIGQzX2Vhc2Vfc2lufSxleHA6ZnVuY3Rpb24oKXtyZXR1cm4gZDNfZWFzZV9leHB9LGNpcmNsZTpmdW5jdGlvbigpe3JldHVybiBkM19lYXNlX2NpcmNsZX0sZWxhc3RpYzpkM19lYXNlX2VsYXN0aWMsYmFjazpkM19lYXNlX2JhY2ssYm91bmNlOmZ1bmN0aW9uKCl7cmV0dXJuIGQzX2Vhc2VfYm91bmNlfX0pO3ZhciBkM19lYXNlX21vZGU9ZDMubWFwKHtcImluXCI6ZDNfaWRlbnRpdHksb3V0OmQzX2Vhc2VfcmV2ZXJzZSxcImluLW91dFwiOmQzX2Vhc2VfcmVmbGVjdCxcIm91dC1pblwiOmZ1bmN0aW9uKGYpe3JldHVybiBkM19lYXNlX3JlZmxlY3QoZDNfZWFzZV9yZXZlcnNlKGYpKX19KTtkMy5lYXNlPWZ1bmN0aW9uKG5hbWUpe3ZhciBpPW5hbWUuaW5kZXhPZihcIi1cIiksdD1pPj0wP25hbWUuc3Vic3RyaW5nKDAsaSk6bmFtZSxtPWk+PTA/bmFtZS5zdWJzdHJpbmcoaSsxKTpcImluXCI7dD1kM19lYXNlLmdldCh0KXx8ZDNfZWFzZV9kZWZhdWx0O209ZDNfZWFzZV9tb2RlLmdldChtKXx8ZDNfaWRlbnRpdHk7cmV0dXJuIGQzX2Vhc2VfY2xhbXAobSh0LmFwcGx5KG51bGwsZDNfYXJyYXlTbGljZS5jYWxsKGFyZ3VtZW50cywxKSkpKX07ZnVuY3Rpb24gZDNfZWFzZV9jbGFtcChmKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIHQ8PTA/MDp0Pj0xPzE6Zih0KX19ZnVuY3Rpb24gZDNfZWFzZV9yZXZlcnNlKGYpe3JldHVybiBmdW5jdGlvbih0KXtyZXR1cm4gMS1mKDEtdCl9fWZ1bmN0aW9uIGQzX2Vhc2VfcmVmbGVjdChmKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuLjUqKHQ8LjU/ZigyKnQpOjItZigyLTIqdCkpfX1mdW5jdGlvbiBkM19lYXNlX3F1YWQodCl7cmV0dXJuIHQqdH1mdW5jdGlvbiBkM19lYXNlX2N1YmljKHQpe3JldHVybiB0KnQqdH1mdW5jdGlvbiBkM19lYXNlX2N1YmljSW5PdXQodCl7aWYodDw9MClyZXR1cm4gMDtpZih0Pj0xKXJldHVybiAxO3ZhciB0Mj10KnQsdDM9dDIqdDtyZXR1cm4gNCoodDwuNT90MzozKih0LXQyKSt0My0uNzUpfWZ1bmN0aW9uIGQzX2Vhc2VfcG9seShlKXtyZXR1cm4gZnVuY3Rpb24odCl7cmV0dXJuIE1hdGgucG93KHQsZSl9fWZ1bmN0aW9uIGQzX2Vhc2Vfc2luKHQpe3JldHVybiAxLU1hdGguY29zKHQqaGFsZs+AKX1mdW5jdGlvbiBkM19lYXNlX2V4cCh0KXtyZXR1cm4gTWF0aC5wb3coMiwxMCoodC0xKSl9ZnVuY3Rpb24gZDNfZWFzZV9jaXJjbGUodCl7cmV0dXJuIDEtTWF0aC5zcXJ0KDEtdCp0KX1mdW5jdGlvbiBkM19lYXNlX2VsYXN0aWMoYSxwKXt2YXIgcztpZihhcmd1bWVudHMubGVuZ3RoPDIpcD0uNDU7aWYoYXJndW1lbnRzLmxlbmd0aClzPXAvz4QqTWF0aC5hc2luKDEvYSk7ZWxzZSBhPTEscz1wLzQ7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiAxK2EqTWF0aC5wb3coMiwtMTAqdCkqTWF0aC5zaW4oKHQtcykqz4QvcCl9fWZ1bmN0aW9uIGQzX2Vhc2VfYmFjayhzKXtpZighcylzPTEuNzAxNTg7cmV0dXJuIGZ1bmN0aW9uKHQpe3JldHVybiB0KnQqKChzKzEpKnQtcyl9fWZ1bmN0aW9uIGQzX2Vhc2VfYm91bmNlKHQpe3JldHVybiB0PDEvMi43NT83LjU2MjUqdCp0OnQ8Mi8yLjc1PzcuNTYyNSoodC09MS41LzIuNzUpKnQrLjc1OnQ8Mi41LzIuNzU/Ny41NjI1Kih0LT0yLjI1LzIuNzUpKnQrLjkzNzU6Ny41NjI1Kih0LT0yLjYyNS8yLjc1KSp0Ky45ODQzNzV9ZnVuY3Rpb24gZDNfdHJhbnNpdGlvbihncm91cHMsaWQpe2QzX3N1YmNsYXNzKGdyb3VwcyxkM190cmFuc2l0aW9uUHJvdG90eXBlKTtncm91cHMuaWQ9aWQ7cmV0dXJuIGdyb3Vwc312YXIgZDNfdHJhbnNpdGlvblByb3RvdHlwZT1bXSxkM190cmFuc2l0aW9uSWQ9MCxkM190cmFuc2l0aW9uSW5oZXJpdElkLGQzX3RyYW5zaXRpb25Jbmhlcml0O2QzX3RyYW5zaXRpb25Qcm90b3R5cGUuY2FsbD1kM19zZWxlY3Rpb25Qcm90b3R5cGUuY2FsbDtkM190cmFuc2l0aW9uUHJvdG90eXBlLmVtcHR5PWQzX3NlbGVjdGlvblByb3RvdHlwZS5lbXB0eTtkM190cmFuc2l0aW9uUHJvdG90eXBlLm5vZGU9ZDNfc2VsZWN0aW9uUHJvdG90eXBlLm5vZGU7ZDNfdHJhbnNpdGlvblByb3RvdHlwZS5zaXplPWQzX3NlbGVjdGlvblByb3RvdHlwZS5zaXplO2QzLnRyYW5zaXRpb249ZnVuY3Rpb24oc2VsZWN0aW9uKXtyZXR1cm4gYXJndW1lbnRzLmxlbmd0aD9kM190cmFuc2l0aW9uSW5oZXJpdElkP3NlbGVjdGlvbi50cmFuc2l0aW9uKCk6c2VsZWN0aW9uOmQzX3NlbGVjdGlvblJvb3QudHJhbnNpdGlvbigpfTtkMy50cmFuc2l0aW9uLnByb3RvdHlwZT1kM190cmFuc2l0aW9uUHJvdG90eXBlO2QzX3RyYW5zaXRpb25Qcm90b3R5cGUuc2VsZWN0PWZ1bmN0aW9uKHNlbGVjdG9yKXt2YXIgaWQ9dGhpcy5pZCxzdWJncm91cHM9W10sc3ViZ3JvdXAsc3Vibm9kZSxub2RlO3NlbGVjdG9yPWQzX3NlbGVjdGlvbl9zZWxlY3RvcihzZWxlY3Rvcik7Zm9yKHZhciBqPS0xLG09dGhpcy5sZW5ndGg7KytqPG07KXtzdWJncm91cHMucHVzaChzdWJncm91cD1bXSk7Zm9yKHZhciBncm91cD10aGlzW2pdLGk9LTEsbj1ncm91cC5sZW5ndGg7KytpPG47KXtpZigobm9kZT1ncm91cFtpXSkmJihzdWJub2RlPXNlbGVjdG9yLmNhbGwobm9kZSxub2RlLl9fZGF0YV9fLGksaikpKXtpZihcIl9fZGF0YV9fXCJpbiBub2RlKXN1Ym5vZGUuX19kYXRhX189bm9kZS5fX2RhdGFfXztkM190cmFuc2l0aW9uTm9kZShzdWJub2RlLGksaWQsbm9kZS5fX3RyYW5zaXRpb25fX1tpZF0pO3N1Ymdyb3VwLnB1c2goc3Vibm9kZSl9ZWxzZXtzdWJncm91cC5wdXNoKG51bGwpfX19cmV0dXJuIGQzX3RyYW5zaXRpb24oc3ViZ3JvdXBzLGlkKX07ZDNfdHJhbnNpdGlvblByb3RvdHlwZS5zZWxlY3RBbGw9ZnVuY3Rpb24oc2VsZWN0b3Ipe3ZhciBpZD10aGlzLmlkLHN1Ymdyb3Vwcz1bXSxzdWJncm91cCxzdWJub2Rlcyxub2RlLHN1Ym5vZGUsdHJhbnNpdGlvbjtzZWxlY3Rvcj1kM19zZWxlY3Rpb25fc2VsZWN0b3JBbGwoc2VsZWN0b3IpO2Zvcih2YXIgaj0tMSxtPXRoaXMubGVuZ3RoOysrajxtOyl7Zm9yKHZhciBncm91cD10aGlzW2pdLGk9LTEsbj1ncm91cC5sZW5ndGg7KytpPG47KXtpZihub2RlPWdyb3VwW2ldKXt0cmFuc2l0aW9uPW5vZGUuX190cmFuc2l0aW9uX19baWRdO3N1Ym5vZGVzPXNlbGVjdG9yLmNhbGwobm9kZSxub2RlLl9fZGF0YV9fLGksaik7c3ViZ3JvdXBzLnB1c2goc3ViZ3JvdXA9W10pO2Zvcih2YXIgaz0tMSxvPXN1Ym5vZGVzLmxlbmd0aDsrK2s8bzspe2lmKHN1Ym5vZGU9c3Vibm9kZXNba10pZDNfdHJhbnNpdGlvbk5vZGUoc3Vibm9kZSxrLGlkLHRyYW5zaXRpb24pO3N1Ymdyb3VwLnB1c2goc3Vibm9kZSl9fX19cmV0dXJuIGQzX3RyYW5zaXRpb24oc3ViZ3JvdXBzLGlkKX07ZDNfdHJhbnNpdGlvblByb3RvdHlwZS5maWx0ZXI9ZnVuY3Rpb24oZmlsdGVyKXt2YXIgc3ViZ3JvdXBzPVtdLHN1Ymdyb3VwLGdyb3VwLG5vZGU7aWYodHlwZW9mIGZpbHRlciE9PVwiZnVuY3Rpb25cIilmaWx0ZXI9ZDNfc2VsZWN0aW9uX2ZpbHRlcihmaWx0ZXIpO2Zvcih2YXIgaj0wLG09dGhpcy5sZW5ndGg7ajxtO2orKyl7c3ViZ3JvdXBzLnB1c2goc3ViZ3JvdXA9W10pO2Zvcih2YXIgZ3JvdXA9dGhpc1tqXSxpPTAsbj1ncm91cC5sZW5ndGg7aTxuO2krKyl7aWYoKG5vZGU9Z3JvdXBbaV0pJiZmaWx0ZXIuY2FsbChub2RlLG5vZGUuX19kYXRhX18saSxqKSl7c3ViZ3JvdXAucHVzaChub2RlKX19fXJldHVybiBkM190cmFuc2l0aW9uKHN1Ymdyb3Vwcyx0aGlzLmlkKX07ZDMudHJhbnNmb3JtPWZ1bmN0aW9uKHN0cmluZyl7dmFyIGc9ZDNfZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKGQzLm5zLnByZWZpeC5zdmcsXCJnXCIpO3JldHVybihkMy50cmFuc2Zvcm09ZnVuY3Rpb24oc3RyaW5nKXtpZihzdHJpbmchPW51bGwpe2cuc2V0QXR0cmlidXRlKFwidHJhbnNmb3JtXCIsc3RyaW5nKTt2YXIgdD1nLnRyYW5zZm9ybS5iYXNlVmFsLmNvbnNvbGlkYXRlKCl9cmV0dXJuIG5ldyBkM190cmFuc2Zvcm0odD90Lm1hdHJpeDpkM190cmFuc2Zvcm1JZGVudGl0eSl9KShzdHJpbmcpfTtmdW5jdGlvbiBkM190cmFuc2Zvcm0obSl7dmFyIHIwPVttLmEsbS5iXSxyMT1bbS5jLG0uZF0sa3g9ZDNfdHJhbnNmb3JtTm9ybWFsaXplKHIwKSxrej1kM190cmFuc2Zvcm1Eb3QocjAscjEpLGt5PWQzX3RyYW5zZm9ybU5vcm1hbGl6ZShkM190cmFuc2Zvcm1Db21iaW5lKHIxLHIwLC1reikpfHwwO2lmKHIwWzBdKnIxWzFdPHIxWzBdKnIwWzFdKXtyMFswXSo9LTE7cjBbMV0qPS0xO2t4Kj0tMTtreio9LTF9dGhpcy5yb3RhdGU9KGt4P01hdGguYXRhbjIocjBbMV0scjBbMF0pOk1hdGguYXRhbjIoLXIxWzBdLHIxWzFdKSkqZDNfZGVncmVlczt0aGlzLnRyYW5zbGF0ZT1bbS5lLG0uZl07dGhpcy5zY2FsZT1ba3gsa3ldO3RoaXMuc2tldz1reT9NYXRoLmF0YW4yKGt6LGt5KSpkM19kZWdyZWVzOjB9ZDNfdHJhbnNmb3JtLnByb3RvdHlwZS50b1N0cmluZz1mdW5jdGlvbigpe3JldHVyblwidHJhbnNsYXRlKFwiK3RoaXMudHJhbnNsYXRlK1wiKXJvdGF0ZShcIit0aGlzLnJvdGF0ZStcIilza2V3WChcIit0aGlzLnNrZXcrXCIpc2NhbGUoXCIrdGhpcy5zY2FsZStcIilcIn07ZnVuY3Rpb24gZDNfdHJhbnNmb3JtRG90KGEsYil7cmV0dXJuIGFbMF0qYlswXSthWzFdKmJbMV19ZnVuY3Rpb24gZDNfdHJhbnNmb3JtTm9ybWFsaXplKGEpe3ZhciBrPU1hdGguc3FydChkM190cmFuc2Zvcm1Eb3QoYSxhKSk7aWYoayl7YVswXS89azthWzFdLz1rfXJldHVybiBrfWZ1bmN0aW9uIGQzX3RyYW5zZm9ybUNvbWJpbmUoYSxiLGspe2FbMF0rPWsqYlswXTthWzFdKz1rKmJbMV07cmV0dXJuIGF9dmFyIGQzX3RyYW5zZm9ybUlkZW50aXR5PXthOjEsYjowLGM6MCxkOjEsZTowLGY6MH07ZDMuaW50ZXJwb2xhdGVUcmFuc2Zvcm09ZDNfaW50ZXJwb2xhdGVUcmFuc2Zvcm07ZnVuY3Rpb24gZDNfaW50ZXJwb2xhdGVUcmFuc2Zvcm0oYSxiKXt2YXIgcz1bXSxxPVtdLG4sQT1kMy50cmFuc2Zvcm0oYSksQj1kMy50cmFuc2Zvcm0oYiksdGE9QS50cmFuc2xhdGUsdGI9Qi50cmFuc2xhdGUscmE9QS5yb3RhdGUscmI9Qi5yb3RhdGUsd2E9QS5za2V3LHdiPUIuc2tldyxrYT1BLnNjYWxlLGtiPUIuc2NhbGU7aWYodGFbMF0hPXRiWzBdfHx0YVsxXSE9dGJbMV0pe3MucHVzaChcInRyYW5zbGF0ZShcIixudWxsLFwiLFwiLG51bGwsXCIpXCIpO3EucHVzaCh7aToxLHg6ZDNfaW50ZXJwb2xhdGVOdW1iZXIodGFbMF0sdGJbMF0pfSx7aTozLHg6ZDNfaW50ZXJwb2xhdGVOdW1iZXIodGFbMV0sdGJbMV0pfSl9ZWxzZSBpZih0YlswXXx8dGJbMV0pe3MucHVzaChcInRyYW5zbGF0ZShcIit0YitcIilcIil9ZWxzZXtzLnB1c2goXCJcIil9aWYocmEhPXJiKXtpZihyYS1yYj4xODApcmIrPTM2MDtlbHNlIGlmKHJiLXJhPjE4MClyYSs9MzYwO3EucHVzaCh7aTpzLnB1c2gocy5wb3AoKStcInJvdGF0ZShcIixudWxsLFwiKVwiKS0yLHg6ZDNfaW50ZXJwb2xhdGVOdW1iZXIocmEscmIpfSl9ZWxzZSBpZihyYil7cy5wdXNoKHMucG9wKCkrXCJyb3RhdGUoXCIrcmIrXCIpXCIpfWlmKHdhIT13Yil7cS5wdXNoKHtpOnMucHVzaChzLnBvcCgpK1wic2tld1goXCIsbnVsbCxcIilcIiktMix4OmQzX2ludGVycG9sYXRlTnVtYmVyKHdhLHdiKX0pfWVsc2UgaWYod2Ipe3MucHVzaChzLnBvcCgpK1wic2tld1goXCIrd2IrXCIpXCIpfWlmKGthWzBdIT1rYlswXXx8a2FbMV0hPWtiWzFdKXtuPXMucHVzaChzLnBvcCgpK1wic2NhbGUoXCIsbnVsbCxcIixcIixudWxsLFwiKVwiKTtxLnB1c2goe2k6bi00LHg6ZDNfaW50ZXJwb2xhdGVOdW1iZXIoa2FbMF0sa2JbMF0pfSx7aTpuLTIseDpkM19pbnRlcnBvbGF0ZU51bWJlcihrYVsxXSxrYlsxXSl9KX1lbHNlIGlmKGtiWzBdIT0xfHxrYlsxXSE9MSl7cy5wdXNoKHMucG9wKCkrXCJzY2FsZShcIitrYitcIilcIil9bj1xLmxlbmd0aDtyZXR1cm4gZnVuY3Rpb24odCl7dmFyIGk9LTEsbzt3aGlsZSgrK2k8bilzWyhvPXFbaV0pLmldPW8ueCh0KTtyZXR1cm4gcy5qb2luKFwiXCIpfX1kM190cmFuc2l0aW9uUHJvdG90eXBlLnR3ZWVuPWZ1bmN0aW9uKG5hbWUsdHdlZW4pe3ZhciBpZD10aGlzLmlkO2lmKGFyZ3VtZW50cy5sZW5ndGg8MilyZXR1cm4gdGhpcy5ub2RlKCkuX190cmFuc2l0aW9uX19baWRdLnR3ZWVuLmdldChuYW1lKTtyZXR1cm4gZDNfc2VsZWN0aW9uX2VhY2godGhpcyx0d2Vlbj09bnVsbD9mdW5jdGlvbihub2RlKXtub2RlLl9fdHJhbnNpdGlvbl9fW2lkXS50d2Vlbi5yZW1vdmUobmFtZSl9OmZ1bmN0aW9uKG5vZGUpe25vZGUuX190cmFuc2l0aW9uX19baWRdLnR3ZWVuLnNldChuYW1lLHR3ZWVuKX0pfTtmdW5jdGlvbiBkM190cmFuc2l0aW9uX3R3ZWVuKGdyb3VwcyxuYW1lLHZhbHVlLHR3ZWVuKXt2YXIgaWQ9Z3JvdXBzLmlkO3JldHVybiBkM19zZWxlY3Rpb25fZWFjaChncm91cHMsdHlwZW9mIHZhbHVlPT09XCJmdW5jdGlvblwiP2Z1bmN0aW9uKG5vZGUsaSxqKXtub2RlLl9fdHJhbnNpdGlvbl9fW2lkXS50d2Vlbi5zZXQobmFtZSx0d2Vlbih2YWx1ZS5jYWxsKG5vZGUsbm9kZS5fX2RhdGFfXyxpLGopKSl9Oih2YWx1ZT10d2Vlbih2YWx1ZSksZnVuY3Rpb24obm9kZSl7bm9kZS5fX3RyYW5zaXRpb25fX1tpZF0udHdlZW4uc2V0KG5hbWUsdmFsdWUpfSkpfWQzX3RyYW5zaXRpb25Qcm90b3R5cGUuYXR0cj1mdW5jdGlvbihuYW1lTlMsdmFsdWUpe2lmKGFyZ3VtZW50cy5sZW5ndGg8Mil7Zm9yKHZhbHVlIGluIG5hbWVOUyl0aGlzLmF0dHIodmFsdWUsbmFtZU5TW3ZhbHVlXSk7cmV0dXJuIHRoaXN9dmFyIGludGVycG9sYXRlPW5hbWVOUz09XCJ0cmFuc2Zvcm1cIj9kM19pbnRlcnBvbGF0ZVRyYW5zZm9ybTpkM19pbnRlcnBvbGF0ZSxuYW1lPWQzLm5zLnF1YWxpZnkobmFtZU5TKTtmdW5jdGlvbiBhdHRyTnVsbCgpe3RoaXMucmVtb3ZlQXR0cmlidXRlKG5hbWUpfWZ1bmN0aW9uIGF0dHJOdWxsTlMoKXt0aGlzLnJlbW92ZUF0dHJpYnV0ZU5TKG5hbWUuc3BhY2UsbmFtZS5sb2NhbCl9ZnVuY3Rpb24gYXR0clR3ZWVuKGIpe3JldHVybiBiPT1udWxsP2F0dHJOdWxsOihiKz1cIlwiLGZ1bmN0aW9uKCl7dmFyIGE9dGhpcy5nZXRBdHRyaWJ1dGUobmFtZSksaTtyZXR1cm4gYSE9PWImJihpPWludGVycG9sYXRlKGEsYiksZnVuY3Rpb24odCl7dGhpcy5zZXRBdHRyaWJ1dGUobmFtZSxpKHQpKX0pfSl9ZnVuY3Rpb24gYXR0clR3ZWVuTlMoYil7cmV0dXJuIGI9PW51bGw/YXR0ck51bGxOUzooYis9XCJcIixmdW5jdGlvbigpe3ZhciBhPXRoaXMuZ2V0QXR0cmlidXRlTlMobmFtZS5zcGFjZSxuYW1lLmxvY2FsKSxpO3JldHVybiBhIT09YiYmKGk9aW50ZXJwb2xhdGUoYSxiKSxmdW5jdGlvbih0KXt0aGlzLnNldEF0dHJpYnV0ZU5TKG5hbWUuc3BhY2UsbmFtZS5sb2NhbCxpKHQpKX0pfSl9cmV0dXJuIGQzX3RyYW5zaXRpb25fdHdlZW4odGhpcyxcImF0dHIuXCIrbmFtZU5TLHZhbHVlLG5hbWUubG9jYWw/YXR0clR3ZWVuTlM6YXR0clR3ZWVuKX07ZDNfdHJhbnNpdGlvblByb3RvdHlwZS5hdHRyVHdlZW49ZnVuY3Rpb24obmFtZU5TLHR3ZWVuKXt2YXIgbmFtZT1kMy5ucy5xdWFsaWZ5KG5hbWVOUyk7ZnVuY3Rpb24gYXR0clR3ZWVuKGQsaSl7dmFyIGY9dHdlZW4uY2FsbCh0aGlzLGQsaSx0aGlzLmdldEF0dHJpYnV0ZShuYW1lKSk7cmV0dXJuIGYmJmZ1bmN0aW9uKHQpe3RoaXMuc2V0QXR0cmlidXRlKG5hbWUsZih0KSl9fWZ1bmN0aW9uIGF0dHJUd2Vlbk5TKGQsaSl7dmFyIGY9dHdlZW4uY2FsbCh0aGlzLGQsaSx0aGlzLmdldEF0dHJpYnV0ZU5TKG5hbWUuc3BhY2UsbmFtZS5sb2NhbCkpO3JldHVybiBmJiZmdW5jdGlvbih0KXt0aGlzLnNldEF0dHJpYnV0ZU5TKG5hbWUuc3BhY2UsbmFtZS5sb2NhbCxmKHQpKX19cmV0dXJuIHRoaXMudHdlZW4oXCJhdHRyLlwiK25hbWVOUyxuYW1lLmxvY2FsP2F0dHJUd2Vlbk5TOmF0dHJUd2Vlbil9O2QzX3RyYW5zaXRpb25Qcm90b3R5cGUuc3R5bGU9ZnVuY3Rpb24obmFtZSx2YWx1ZSxwcmlvcml0eSl7dmFyIG49YXJndW1lbnRzLmxlbmd0aDtpZihuPDMpe2lmKHR5cGVvZiBuYW1lIT09XCJzdHJpbmdcIil7aWYobjwyKXZhbHVlPVwiXCI7Zm9yKHByaW9yaXR5IGluIG5hbWUpdGhpcy5zdHlsZShwcmlvcml0eSxuYW1lW3ByaW9yaXR5XSx2YWx1ZSk7cmV0dXJuIHRoaXN9cHJpb3JpdHk9XCJcIn1mdW5jdGlvbiBzdHlsZU51bGwoKXt0aGlzLnN0eWxlLnJlbW92ZVByb3BlcnR5KG5hbWUpfWZ1bmN0aW9uIHN0eWxlU3RyaW5nKGIpe3JldHVybiBiPT1udWxsP3N0eWxlTnVsbDooYis9XCJcIixmdW5jdGlvbigpe3ZhciBhPWQzX3dpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRoaXMsbnVsbCkuZ2V0UHJvcGVydHlWYWx1ZShuYW1lKSxpO3JldHVybiBhIT09YiYmKGk9ZDNfaW50ZXJwb2xhdGUoYSxiKSxmdW5jdGlvbih0KXt0aGlzLnN0eWxlLnNldFByb3BlcnR5KG5hbWUsaSh0KSxwcmlvcml0eSl9KX0pfXJldHVybiBkM190cmFuc2l0aW9uX3R3ZWVuKHRoaXMsXCJzdHlsZS5cIituYW1lLHZhbHVlLHN0eWxlU3RyaW5nKX07ZDNfdHJhbnNpdGlvblByb3RvdHlwZS5zdHlsZVR3ZWVuPWZ1bmN0aW9uKG5hbWUsdHdlZW4scHJpb3JpdHkpe2lmKGFyZ3VtZW50cy5sZW5ndGg8Mylwcmlvcml0eT1cIlwiO2Z1bmN0aW9uIHN0eWxlVHdlZW4oZCxpKXt2YXIgZj10d2Vlbi5jYWxsKHRoaXMsZCxpLGQzX3dpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRoaXMsbnVsbCkuZ2V0UHJvcGVydHlWYWx1ZShuYW1lKSk7cmV0dXJuIGYmJmZ1bmN0aW9uKHQpe3RoaXMuc3R5bGUuc2V0UHJvcGVydHkobmFtZSxmKHQpLHByaW9yaXR5KX19cmV0dXJuIHRoaXMudHdlZW4oXCJzdHlsZS5cIituYW1lLHN0eWxlVHdlZW4pfTtkM190cmFuc2l0aW9uUHJvdG90eXBlLnRleHQ9ZnVuY3Rpb24odmFsdWUpe3JldHVybiBkM190cmFuc2l0aW9uX3R3ZWVuKHRoaXMsXCJ0ZXh0XCIsdmFsdWUsZDNfdHJhbnNpdGlvbl90ZXh0KX07ZnVuY3Rpb24gZDNfdHJhbnNpdGlvbl90ZXh0KGIpe2lmKGI9PW51bGwpYj1cIlwiO3JldHVybiBmdW5jdGlvbigpe3RoaXMudGV4dENvbnRlbnQ9Yn19ZDNfdHJhbnNpdGlvblByb3RvdHlwZS5yZW1vdmU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5lYWNoKFwiZW5kLnRyYW5zaXRpb25cIixmdW5jdGlvbigpe3ZhciBwO2lmKHRoaXMuX190cmFuc2l0aW9uX18uY291bnQ8MiYmKHA9dGhpcy5wYXJlbnROb2RlKSlwLnJlbW92ZUNoaWxkKHRoaXMpfSl9O2QzX3RyYW5zaXRpb25Qcm90b3R5cGUuZWFzZT1mdW5jdGlvbih2YWx1ZSl7dmFyIGlkPXRoaXMuaWQ7aWYoYXJndW1lbnRzLmxlbmd0aDwxKXJldHVybiB0aGlzLm5vZGUoKS5fX3RyYW5zaXRpb25fX1tpZF0uZWFzZTtpZih0eXBlb2YgdmFsdWUhPT1cImZ1bmN0aW9uXCIpdmFsdWU9ZDMuZWFzZS5hcHBseShkMyxhcmd1bWVudHMpO3JldHVybiBkM19zZWxlY3Rpb25fZWFjaCh0aGlzLGZ1bmN0aW9uKG5vZGUpe25vZGUuX190cmFuc2l0aW9uX19baWRdLmVhc2U9dmFsdWV9KX07ZDNfdHJhbnNpdGlvblByb3RvdHlwZS5kZWxheT1mdW5jdGlvbih2YWx1ZSl7dmFyIGlkPXRoaXMuaWQ7cmV0dXJuIGQzX3NlbGVjdGlvbl9lYWNoKHRoaXMsdHlwZW9mIHZhbHVlPT09XCJmdW5jdGlvblwiP2Z1bmN0aW9uKG5vZGUsaSxqKXtub2RlLl9fdHJhbnNpdGlvbl9fW2lkXS5kZWxheT0rdmFsdWUuY2FsbChub2RlLG5vZGUuX19kYXRhX18saSxqKX06KHZhbHVlPSt2YWx1ZSxmdW5jdGlvbihub2RlKXtub2RlLl9fdHJhbnNpdGlvbl9fW2lkXS5kZWxheT12YWx1ZX0pKX07ZDNfdHJhbnNpdGlvblByb3RvdHlwZS5kdXJhdGlvbj1mdW5jdGlvbih2YWx1ZSl7dmFyIGlkPXRoaXMuaWQ7cmV0dXJuIGQzX3NlbGVjdGlvbl9lYWNoKHRoaXMsdHlwZW9mIHZhbHVlPT09XCJmdW5jdGlvblwiP2Z1bmN0aW9uKG5vZGUsaSxqKXtub2RlLl9fdHJhbnNpdGlvbl9fW2lkXS5kdXJhdGlvbj1NYXRoLm1heCgxLHZhbHVlLmNhbGwobm9kZSxub2RlLl9fZGF0YV9fLGksaikpfToodmFsdWU9TWF0aC5tYXgoMSx2YWx1ZSksZnVuY3Rpb24obm9kZSl7bm9kZS5fX3RyYW5zaXRpb25fX1tpZF0uZHVyYXRpb249dmFsdWV9KSl9O2QzX3RyYW5zaXRpb25Qcm90b3R5cGUuZWFjaD1mdW5jdGlvbih0eXBlLGxpc3RlbmVyKXt2YXIgaWQ9dGhpcy5pZDtpZihhcmd1bWVudHMubGVuZ3RoPDIpe3ZhciBpbmhlcml0PWQzX3RyYW5zaXRpb25Jbmhlcml0LGluaGVyaXRJZD1kM190cmFuc2l0aW9uSW5oZXJpdElkO2QzX3RyYW5zaXRpb25Jbmhlcml0SWQ9aWQ7ZDNfc2VsZWN0aW9uX2VhY2godGhpcyxmdW5jdGlvbihub2RlLGksail7ZDNfdHJhbnNpdGlvbkluaGVyaXQ9bm9kZS5fX3RyYW5zaXRpb25fX1tpZF07dHlwZS5jYWxsKG5vZGUsbm9kZS5fX2RhdGFfXyxpLGopfSk7ZDNfdHJhbnNpdGlvbkluaGVyaXQ9aW5oZXJpdDtkM190cmFuc2l0aW9uSW5oZXJpdElkPWluaGVyaXRJZH1lbHNle2QzX3NlbGVjdGlvbl9lYWNoKHRoaXMsZnVuY3Rpb24obm9kZSl7dmFyIHRyYW5zaXRpb249bm9kZS5fX3RyYW5zaXRpb25fX1tpZF07KHRyYW5zaXRpb24uZXZlbnR8fCh0cmFuc2l0aW9uLmV2ZW50PWQzLmRpc3BhdGNoKFwic3RhcnRcIixcImVuZFwiKSkpLm9uKHR5cGUsbGlzdGVuZXIpfSl9cmV0dXJuIHRoaXN9O2QzX3RyYW5zaXRpb25Qcm90b3R5cGUudHJhbnNpdGlvbj1mdW5jdGlvbigpe3ZhciBpZDA9dGhpcy5pZCxpZDE9KytkM190cmFuc2l0aW9uSWQsc3ViZ3JvdXBzPVtdLHN1Ymdyb3VwLGdyb3VwLG5vZGUsdHJhbnNpdGlvbjtmb3IodmFyIGo9MCxtPXRoaXMubGVuZ3RoO2o8bTtqKyspe3N1Ymdyb3Vwcy5wdXNoKHN1Ymdyb3VwPVtdKTtmb3IodmFyIGdyb3VwPXRoaXNbal0saT0wLG49Z3JvdXAubGVuZ3RoO2k8bjtpKyspe2lmKG5vZGU9Z3JvdXBbaV0pe3RyYW5zaXRpb249T2JqZWN0LmNyZWF0ZShub2RlLl9fdHJhbnNpdGlvbl9fW2lkMF0pO3RyYW5zaXRpb24uZGVsYXkrPXRyYW5zaXRpb24uZHVyYXRpb247ZDNfdHJhbnNpdGlvbk5vZGUobm9kZSxpLGlkMSx0cmFuc2l0aW9uKX1zdWJncm91cC5wdXNoKG5vZGUpfX1yZXR1cm4gZDNfdHJhbnNpdGlvbihzdWJncm91cHMsaWQxKX07ZnVuY3Rpb24gZDNfdHJhbnNpdGlvbk5vZGUobm9kZSxpLGlkLGluaGVyaXQpe3ZhciBsb2NrPW5vZGUuX190cmFuc2l0aW9uX198fChub2RlLl9fdHJhbnNpdGlvbl9fPXthY3RpdmU6MCxjb3VudDowfSksdHJhbnNpdGlvbj1sb2NrW2lkXTtpZighdHJhbnNpdGlvbil7dmFyIHRpbWU9aW5oZXJpdC50aW1lO3RyYW5zaXRpb249bG9ja1tpZF09e3R3ZWVuOm5ldyBkM19NYXAsdGltZTp0aW1lLGVhc2U6aW5oZXJpdC5lYXNlLGRlbGF5OmluaGVyaXQuZGVsYXksZHVyYXRpb246aW5oZXJpdC5kdXJhdGlvbn07Kytsb2NrLmNvdW50O2QzLnRpbWVyKGZ1bmN0aW9uKGVsYXBzZWQpe3ZhciBkPW5vZGUuX19kYXRhX18sZWFzZT10cmFuc2l0aW9uLmVhc2UsZGVsYXk9dHJhbnNpdGlvbi5kZWxheSxkdXJhdGlvbj10cmFuc2l0aW9uLmR1cmF0aW9uLHRpbWVyPWQzX3RpbWVyX2FjdGl2ZSx0d2VlbmVkPVtdO3RpbWVyLnQ9ZGVsYXkrdGltZTtpZihkZWxheTw9ZWxhcHNlZClyZXR1cm4gc3RhcnQoZWxhcHNlZC1kZWxheSk7dGltZXIuYz1zdGFydDtmdW5jdGlvbiBzdGFydChlbGFwc2VkKXtpZihsb2NrLmFjdGl2ZT5pZClyZXR1cm4gc3RvcCgpO2xvY2suYWN0aXZlPWlkO3RyYW5zaXRpb24uZXZlbnQmJnRyYW5zaXRpb24uZXZlbnQuc3RhcnQuY2FsbChub2RlLGQsaSk7dHJhbnNpdGlvbi50d2Vlbi5mb3JFYWNoKGZ1bmN0aW9uKGtleSx2YWx1ZSl7aWYodmFsdWU9dmFsdWUuY2FsbChub2RlLGQsaSkpe3R3ZWVuZWQucHVzaCh2YWx1ZSl9fSk7ZDMudGltZXIoZnVuY3Rpb24oKXt0aW1lci5jPXRpY2soZWxhcHNlZHx8MSk/ZDNfdHJ1ZTp0aWNrO3JldHVybiAxfSwwLHRpbWUpfWZ1bmN0aW9uIHRpY2soZWxhcHNlZCl7aWYobG9jay5hY3RpdmUhPT1pZClyZXR1cm4gc3RvcCgpO3ZhciB0PWVsYXBzZWQvZHVyYXRpb24sZT1lYXNlKHQpLG49dHdlZW5lZC5sZW5ndGg7d2hpbGUobj4wKXt0d2VlbmVkWy0tbl0uY2FsbChub2RlLGUpfWlmKHQ+PTEpe3RyYW5zaXRpb24uZXZlbnQmJnRyYW5zaXRpb24uZXZlbnQuZW5kLmNhbGwobm9kZSxkLGkpO3JldHVybiBzdG9wKCl9fWZ1bmN0aW9uIHN0b3AoKXtpZigtLWxvY2suY291bnQpZGVsZXRlIGxvY2tbaWRdO2Vsc2UgZGVsZXRlIG5vZGUuX190cmFuc2l0aW9uX187cmV0dXJuIDF9fSwwLHRpbWUpfX1kMy5zdmcuYXhpcz1mdW5jdGlvbigpe3ZhciBzY2FsZT1kMy5zY2FsZS5saW5lYXIoKSxvcmllbnQ9ZDNfc3ZnX2F4aXNEZWZhdWx0T3JpZW50LGlubmVyVGlja1NpemU9NixvdXRlclRpY2tTaXplPTYsdGlja1BhZGRpbmc9Myx0aWNrQXJndW1lbnRzXz1bMTBdLHRpY2tWYWx1ZXM9bnVsbCx0aWNrRm9ybWF0XztmdW5jdGlvbiBheGlzKGcpe2cuZWFjaChmdW5jdGlvbigpe3ZhciBnPWQzLnNlbGVjdCh0aGlzKTt2YXIgc2NhbGUwPXRoaXMuX19jaGFydF9ffHxzY2FsZSxzY2FsZTE9dGhpcy5fX2NoYXJ0X189c2NhbGUuY29weSgpO3ZhciB0aWNrcz10aWNrVmFsdWVzPT1udWxsP3NjYWxlMS50aWNrcz9zY2FsZTEudGlja3MuYXBwbHkoc2NhbGUxLHRpY2tBcmd1bWVudHNfKTpzY2FsZTEuZG9tYWluKCk6dGlja1ZhbHVlcyx0aWNrRm9ybWF0PXRpY2tGb3JtYXRfPT1udWxsP3NjYWxlMS50aWNrRm9ybWF0P3NjYWxlMS50aWNrRm9ybWF0LmFwcGx5KHNjYWxlMSx0aWNrQXJndW1lbnRzXyk6ZDNfaWRlbnRpdHk6dGlja0Zvcm1hdF8sdGljaz1nLnNlbGVjdEFsbChcIi50aWNrXCIpLmRhdGEodGlja3Msc2NhbGUxKSx0aWNrRW50ZXI9dGljay5lbnRlcigpLmluc2VydChcImdcIixcIi5kb21haW5cIikuYXR0cihcImNsYXNzXCIsXCJ0aWNrXCIpLnN0eWxlKFwib3BhY2l0eVwiLM61KSx0aWNrRXhpdD1kMy50cmFuc2l0aW9uKHRpY2suZXhpdCgpKS5zdHlsZShcIm9wYWNpdHlcIizOtSkucmVtb3ZlKCksdGlja1VwZGF0ZT1kMy50cmFuc2l0aW9uKHRpY2spLnN0eWxlKFwib3BhY2l0eVwiLDEpLHRpY2tUcmFuc2Zvcm07dmFyIHJhbmdlPWQzX3NjYWxlUmFuZ2Uoc2NhbGUxKSxwYXRoPWcuc2VsZWN0QWxsKFwiLmRvbWFpblwiKS5kYXRhKFswXSkscGF0aFVwZGF0ZT0ocGF0aC5lbnRlcigpLmFwcGVuZChcInBhdGhcIikuYXR0cihcImNsYXNzXCIsXCJkb21haW5cIiksZDMudHJhbnNpdGlvbihwYXRoKSk7dGlja0VudGVyLmFwcGVuZChcImxpbmVcIik7dGlja0VudGVyLmFwcGVuZChcInRleHRcIik7dmFyIGxpbmVFbnRlcj10aWNrRW50ZXIuc2VsZWN0KFwibGluZVwiKSxsaW5lVXBkYXRlPXRpY2tVcGRhdGUuc2VsZWN0KFwibGluZVwiKSx0ZXh0PXRpY2suc2VsZWN0KFwidGV4dFwiKS50ZXh0KHRpY2tGb3JtYXQpLHRleHRFbnRlcj10aWNrRW50ZXIuc2VsZWN0KFwidGV4dFwiKSx0ZXh0VXBkYXRlPXRpY2tVcGRhdGUuc2VsZWN0KFwidGV4dFwiKTtzd2l0Y2gob3JpZW50KXtjYXNlXCJib3R0b21cIjp7dGlja1RyYW5zZm9ybT1kM19zdmdfYXhpc1g7bGluZUVudGVyLmF0dHIoXCJ5MlwiLGlubmVyVGlja1NpemUpO3RleHRFbnRlci5hdHRyKFwieVwiLE1hdGgubWF4KGlubmVyVGlja1NpemUsMCkrdGlja1BhZGRpbmcpO2xpbmVVcGRhdGUuYXR0cihcIngyXCIsMCkuYXR0cihcInkyXCIsaW5uZXJUaWNrU2l6ZSk7dGV4dFVwZGF0ZS5hdHRyKFwieFwiLDApLmF0dHIoXCJ5XCIsTWF0aC5tYXgoaW5uZXJUaWNrU2l6ZSwwKSt0aWNrUGFkZGluZyk7dGV4dC5hdHRyKFwiZHlcIixcIi43MWVtXCIpLnN0eWxlKFwidGV4dC1hbmNob3JcIixcIm1pZGRsZVwiKTtwYXRoVXBkYXRlLmF0dHIoXCJkXCIsXCJNXCIrcmFuZ2VbMF0rXCIsXCIrb3V0ZXJUaWNrU2l6ZStcIlYwSFwiK3JhbmdlWzFdK1wiVlwiK291dGVyVGlja1NpemUpO2JyZWFrfWNhc2VcInRvcFwiOnt0aWNrVHJhbnNmb3JtPWQzX3N2Z19heGlzWDtsaW5lRW50ZXIuYXR0cihcInkyXCIsLWlubmVyVGlja1NpemUpO3RleHRFbnRlci5hdHRyKFwieVwiLC0oTWF0aC5tYXgoaW5uZXJUaWNrU2l6ZSwwKSt0aWNrUGFkZGluZykpO2xpbmVVcGRhdGUuYXR0cihcIngyXCIsMCkuYXR0cihcInkyXCIsLWlubmVyVGlja1NpemUpO3RleHRVcGRhdGUuYXR0cihcInhcIiwwKS5hdHRyKFwieVwiLC0oTWF0aC5tYXgoaW5uZXJUaWNrU2l6ZSwwKSt0aWNrUGFkZGluZykpO3RleHQuYXR0cihcImR5XCIsXCIwZW1cIikuc3R5bGUoXCJ0ZXh0LWFuY2hvclwiLFwibWlkZGxlXCIpO3BhdGhVcGRhdGUuYXR0cihcImRcIixcIk1cIityYW5nZVswXStcIixcIistb3V0ZXJUaWNrU2l6ZStcIlYwSFwiK3JhbmdlWzFdK1wiVlwiKy1vdXRlclRpY2tTaXplKTticmVha31jYXNlXCJsZWZ0XCI6e3RpY2tUcmFuc2Zvcm09ZDNfc3ZnX2F4aXNZO2xpbmVFbnRlci5hdHRyKFwieDJcIiwtaW5uZXJUaWNrU2l6ZSk7dGV4dEVudGVyLmF0dHIoXCJ4XCIsLShNYXRoLm1heChpbm5lclRpY2tTaXplLDApK3RpY2tQYWRkaW5nKSk7bGluZVVwZGF0ZS5hdHRyKFwieDJcIiwtaW5uZXJUaWNrU2l6ZSkuYXR0cihcInkyXCIsMCk7dGV4dFVwZGF0ZS5hdHRyKFwieFwiLC0oTWF0aC5tYXgoaW5uZXJUaWNrU2l6ZSwwKSt0aWNrUGFkZGluZykpLmF0dHIoXCJ5XCIsMCk7dGV4dC5hdHRyKFwiZHlcIixcIi4zMmVtXCIpLnN0eWxlKFwidGV4dC1hbmNob3JcIixcImVuZFwiKTtwYXRoVXBkYXRlLmF0dHIoXCJkXCIsXCJNXCIrLW91dGVyVGlja1NpemUrXCIsXCIrcmFuZ2VbMF0rXCJIMFZcIityYW5nZVsxXStcIkhcIistb3V0ZXJUaWNrU2l6ZSk7YnJlYWt9Y2FzZVwicmlnaHRcIjp7dGlja1RyYW5zZm9ybT1kM19zdmdfYXhpc1k7bGluZUVudGVyLmF0dHIoXCJ4MlwiLGlubmVyVGlja1NpemUpO3RleHRFbnRlci5hdHRyKFwieFwiLE1hdGgubWF4KGlubmVyVGlja1NpemUsMCkrdGlja1BhZGRpbmcpO2xpbmVVcGRhdGUuYXR0cihcIngyXCIsaW5uZXJUaWNrU2l6ZSkuYXR0cihcInkyXCIsMCk7dGV4dFVwZGF0ZS5hdHRyKFwieFwiLE1hdGgubWF4KGlubmVyVGlja1NpemUsMCkrdGlja1BhZGRpbmcpLmF0dHIoXCJ5XCIsMCk7dGV4dC5hdHRyKFwiZHlcIixcIi4zMmVtXCIpLnN0eWxlKFwidGV4dC1hbmNob3JcIixcInN0YXJ0XCIpO3BhdGhVcGRhdGUuYXR0cihcImRcIixcIk1cIitvdXRlclRpY2tTaXplK1wiLFwiK3JhbmdlWzBdK1wiSDBWXCIrcmFuZ2VbMV0rXCJIXCIrb3V0ZXJUaWNrU2l6ZSk7YnJlYWt9fWlmKHNjYWxlMS5yYW5nZUJhbmQpe3ZhciB4PXNjYWxlMSxkeD14LnJhbmdlQmFuZCgpLzI7c2NhbGUwPXNjYWxlMT1mdW5jdGlvbihkKXtyZXR1cm4geChkKStkeH19ZWxzZSBpZihzY2FsZTAucmFuZ2VCYW5kKXtzY2FsZTA9c2NhbGUxfWVsc2V7dGlja0V4aXQuY2FsbCh0aWNrVHJhbnNmb3JtLHNjYWxlMSl9dGlja0VudGVyLmNhbGwodGlja1RyYW5zZm9ybSxzY2FsZTApO3RpY2tVcGRhdGUuY2FsbCh0aWNrVHJhbnNmb3JtLHNjYWxlMSl9KX1heGlzLnNjYWxlPWZ1bmN0aW9uKHgpe2lmKCFhcmd1bWVudHMubGVuZ3RoKXJldHVybiBzY2FsZTtzY2FsZT14O3JldHVybiBheGlzfTtheGlzLm9yaWVudD1mdW5jdGlvbih4KXtpZighYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gb3JpZW50O29yaWVudD14IGluIGQzX3N2Z19heGlzT3JpZW50cz94K1wiXCI6ZDNfc3ZnX2F4aXNEZWZhdWx0T3JpZW50O3JldHVybiBheGlzfTtheGlzLnRpY2tzPWZ1bmN0aW9uKCl7aWYoIWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIHRpY2tBcmd1bWVudHNfO3RpY2tBcmd1bWVudHNfPWFyZ3VtZW50cztyZXR1cm4gYXhpc307YXhpcy50aWNrVmFsdWVzPWZ1bmN0aW9uKHgpe2lmKCFhcmd1bWVudHMubGVuZ3RoKXJldHVybiB0aWNrVmFsdWVzO3RpY2tWYWx1ZXM9eDtyZXR1cm4gYXhpc307YXhpcy50aWNrRm9ybWF0PWZ1bmN0aW9uKHgpe2lmKCFhcmd1bWVudHMubGVuZ3RoKXJldHVybiB0aWNrRm9ybWF0Xzt0aWNrRm9ybWF0Xz14O3JldHVybiBheGlzfTtheGlzLnRpY2tTaXplPWZ1bmN0aW9uKHgpe3ZhciBuPWFyZ3VtZW50cy5sZW5ndGg7aWYoIW4pcmV0dXJuIGlubmVyVGlja1NpemU7aW5uZXJUaWNrU2l6ZT0reDtvdXRlclRpY2tTaXplPSthcmd1bWVudHNbbi0xXTtyZXR1cm4gYXhpc307YXhpcy5pbm5lclRpY2tTaXplPWZ1bmN0aW9uKHgpe2lmKCFhcmd1bWVudHMubGVuZ3RoKXJldHVybiBpbm5lclRpY2tTaXplO2lubmVyVGlja1NpemU9K3g7cmV0dXJuIGF4aXN9O2F4aXMub3V0ZXJUaWNrU2l6ZT1mdW5jdGlvbih4KXtpZighYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gb3V0ZXJUaWNrU2l6ZTtvdXRlclRpY2tTaXplPSt4O3JldHVybiBheGlzfTtheGlzLnRpY2tQYWRkaW5nPWZ1bmN0aW9uKHgpe2lmKCFhcmd1bWVudHMubGVuZ3RoKXJldHVybiB0aWNrUGFkZGluZzt0aWNrUGFkZGluZz0reDtyZXR1cm4gYXhpc307YXhpcy50aWNrU3ViZGl2aWRlPWZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50cy5sZW5ndGgmJmF4aXN9O3JldHVybiBheGlzfTt2YXIgZDNfc3ZnX2F4aXNEZWZhdWx0T3JpZW50PVwiYm90dG9tXCIsZDNfc3ZnX2F4aXNPcmllbnRzPXt0b3A6MSxyaWdodDoxLGJvdHRvbToxLGxlZnQ6MX07ZnVuY3Rpb24gZDNfc3ZnX2F4aXNYKHNlbGVjdGlvbix4KXtzZWxlY3Rpb24uYXR0cihcInRyYW5zZm9ybVwiLGZ1bmN0aW9uKGQpe3JldHVyblwidHJhbnNsYXRlKFwiK3goZCkrXCIsMClcIn0pfWZ1bmN0aW9uIGQzX3N2Z19heGlzWShzZWxlY3Rpb24seSl7c2VsZWN0aW9uLmF0dHIoXCJ0cmFuc2Zvcm1cIixmdW5jdGlvbihkKXtyZXR1cm5cInRyYW5zbGF0ZSgwLFwiK3koZCkrXCIpXCJ9KX12YXIgZDNfZXZlbnRfZHJhZ1NlbGVjdD1cIm9uc2VsZWN0c3RhcnRcImluIGQzX2RvY3VtZW50P251bGw6ZDNfdmVuZG9yU3ltYm9sKGQzX2RvY3VtZW50RWxlbWVudC5zdHlsZSxcInVzZXJTZWxlY3RcIiksZDNfZXZlbnRfZHJhZ0lkPTA7ZnVuY3Rpb24gZDNfZXZlbnRfZHJhZ1N1cHByZXNzKCl7dmFyIG5hbWU9XCIuZHJhZ3N1cHByZXNzLVwiKyArK2QzX2V2ZW50X2RyYWdJZCxjbGljaz1cImNsaWNrXCIrbmFtZSx3PWQzLnNlbGVjdChkM193aW5kb3cpLm9uKFwidG91Y2htb3ZlXCIrbmFtZSxkM19ldmVudFByZXZlbnREZWZhdWx0KS5vbihcImRyYWdzdGFydFwiK25hbWUsZDNfZXZlbnRQcmV2ZW50RGVmYXVsdCkub24oXCJzZWxlY3RzdGFydFwiK25hbWUsZDNfZXZlbnRQcmV2ZW50RGVmYXVsdCk7aWYoZDNfZXZlbnRfZHJhZ1NlbGVjdCl7dmFyIHN0eWxlPWQzX2RvY3VtZW50RWxlbWVudC5zdHlsZSxzZWxlY3Q9c3R5bGVbZDNfZXZlbnRfZHJhZ1NlbGVjdF07c3R5bGVbZDNfZXZlbnRfZHJhZ1NlbGVjdF09XCJub25lXCJ9cmV0dXJuIGZ1bmN0aW9uKHN1cHByZXNzQ2xpY2spe3cub24obmFtZSxudWxsKTtpZihkM19ldmVudF9kcmFnU2VsZWN0KXN0eWxlW2QzX2V2ZW50X2RyYWdTZWxlY3RdPXNlbGVjdDtpZihzdXBwcmVzc0NsaWNrKXtmdW5jdGlvbiBvZmYoKXt3Lm9uKGNsaWNrLG51bGwpfXcub24oY2xpY2ssZnVuY3Rpb24oKXtkM19ldmVudFByZXZlbnREZWZhdWx0KCk7b2ZmKCl9LHRydWUpO3NldFRpbWVvdXQob2ZmLDApfX19ZDMubW91c2U9ZnVuY3Rpb24oY29udGFpbmVyKXtyZXR1cm4gZDNfbW91c2VQb2ludChjb250YWluZXIsZDNfZXZlbnRTb3VyY2UoKSl9O3ZhciBkM19tb3VzZV9idWc0NDA4Mz0vV2ViS2l0Ly50ZXN0KGQzX3dpbmRvdy5uYXZpZ2F0b3IudXNlckFnZW50KT8tMTowO2Z1bmN0aW9uIGQzX21vdXNlUG9pbnQoY29udGFpbmVyLGUpe2lmKGUuY2hhbmdlZFRvdWNoZXMpZT1lLmNoYW5nZWRUb3VjaGVzWzBdO3ZhciBzdmc9Y29udGFpbmVyLm93bmVyU1ZHRWxlbWVudHx8Y29udGFpbmVyO2lmKHN2Zy5jcmVhdGVTVkdQb2ludCl7dmFyIHBvaW50PXN2Zy5jcmVhdGVTVkdQb2ludCgpO2lmKGQzX21vdXNlX2J1ZzQ0MDgzPDAmJihkM193aW5kb3cuc2Nyb2xsWHx8ZDNfd2luZG93LnNjcm9sbFkpKXtzdmc9ZDMuc2VsZWN0KFwiYm9keVwiKS5hcHBlbmQoXCJzdmdcIikuc3R5bGUoe3Bvc2l0aW9uOlwiYWJzb2x1dGVcIix0b3A6MCxsZWZ0OjAsbWFyZ2luOjAscGFkZGluZzowLGJvcmRlcjpcIm5vbmVcIn0sXCJpbXBvcnRhbnRcIik7dmFyIGN0bT1zdmdbMF1bMF0uZ2V0U2NyZWVuQ1RNKCk7ZDNfbW91c2VfYnVnNDQwODM9IShjdG0uZnx8Y3RtLmUpO3N2Zy5yZW1vdmUoKX1pZihkM19tb3VzZV9idWc0NDA4Mylwb2ludC54PWUucGFnZVgscG9pbnQueT1lLnBhZ2VZO2Vsc2UgcG9pbnQueD1lLmNsaWVudFgscG9pbnQueT1lLmNsaWVudFk7cG9pbnQ9cG9pbnQubWF0cml4VHJhbnNmb3JtKGNvbnRhaW5lci5nZXRTY3JlZW5DVE0oKS5pbnZlcnNlKCkpO3JldHVybltwb2ludC54LHBvaW50LnldfXZhciByZWN0PWNvbnRhaW5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKTtyZXR1cm5bZS5jbGllbnRYLXJlY3QubGVmdC1jb250YWluZXIuY2xpZW50TGVmdCxlLmNsaWVudFktcmVjdC50b3AtY29udGFpbmVyLmNsaWVudFRvcF19ZDMudG91Y2hlcz1mdW5jdGlvbihjb250YWluZXIsdG91Y2hlcyl7aWYoYXJndW1lbnRzLmxlbmd0aDwyKXRvdWNoZXM9ZDNfZXZlbnRTb3VyY2UoKS50b3VjaGVzO3JldHVybiB0b3VjaGVzP2QzX2FycmF5KHRvdWNoZXMpLm1hcChmdW5jdGlvbih0b3VjaCl7dmFyIHBvaW50PWQzX21vdXNlUG9pbnQoY29udGFpbmVyLHRvdWNoKTtwb2ludC5pZGVudGlmaWVyPXRvdWNoLmlkZW50aWZpZXI7cmV0dXJuIHBvaW50fSk6W119O2QzLnN2Zy5icnVzaD1mdW5jdGlvbigpe3ZhciBldmVudD1kM19ldmVudERpc3BhdGNoKGJydXNoLFwiYnJ1c2hzdGFydFwiLFwiYnJ1c2hcIixcImJydXNoZW5kXCIpLHg9bnVsbCx5PW51bGwseEV4dGVudD1bMCwwXSx5RXh0ZW50PVswLDBdLHhFeHRlbnREb21haW4seUV4dGVudERvbWFpbix4Q2xhbXA9dHJ1ZSx5Q2xhbXA9dHJ1ZSxyZXNpemVzPWQzX3N2Z19icnVzaFJlc2l6ZXNbMF07ZnVuY3Rpb24gYnJ1c2goZyl7Zy5lYWNoKGZ1bmN0aW9uKCl7dmFyIGc9ZDMuc2VsZWN0KHRoaXMpLnN0eWxlKFwicG9pbnRlci1ldmVudHNcIixcImFsbFwiKS5zdHlsZShcIi13ZWJraXQtdGFwLWhpZ2hsaWdodC1jb2xvclwiLFwicmdiYSgwLDAsMCwwKVwiKS5vbihcIm1vdXNlZG93bi5icnVzaFwiLGJydXNoc3RhcnQpLm9uKFwidG91Y2hzdGFydC5icnVzaFwiLGJydXNoc3RhcnQpO3ZhciBiYWNrZ3JvdW5kPWcuc2VsZWN0QWxsKFwiLmJhY2tncm91bmRcIikuZGF0YShbMF0pO2JhY2tncm91bmQuZW50ZXIoKS5hcHBlbmQoXCJyZWN0XCIpLmF0dHIoXCJjbGFzc1wiLFwiYmFja2dyb3VuZFwiKS5zdHlsZShcInZpc2liaWxpdHlcIixcImhpZGRlblwiKS5zdHlsZShcImN1cnNvclwiLFwiY3Jvc3NoYWlyXCIpO2cuc2VsZWN0QWxsKFwiLmV4dGVudFwiKS5kYXRhKFswXSkuZW50ZXIoKS5hcHBlbmQoXCJyZWN0XCIpLmF0dHIoXCJjbGFzc1wiLFwiZXh0ZW50XCIpLnN0eWxlKFwiY3Vyc29yXCIsXCJtb3ZlXCIpO3ZhciByZXNpemU9Zy5zZWxlY3RBbGwoXCIucmVzaXplXCIpLmRhdGEocmVzaXplcyxkM19pZGVudGl0eSk7cmVzaXplLmV4aXQoKS5yZW1vdmUoKTtyZXNpemUuZW50ZXIoKS5hcHBlbmQoXCJnXCIpLmF0dHIoXCJjbGFzc1wiLGZ1bmN0aW9uKGQpe3JldHVyblwicmVzaXplIFwiK2R9KS5zdHlsZShcImN1cnNvclwiLGZ1bmN0aW9uKGQpe3JldHVybiBkM19zdmdfYnJ1c2hDdXJzb3JbZF19KS5hcHBlbmQoXCJyZWN0XCIpLmF0dHIoXCJ4XCIsZnVuY3Rpb24oZCl7cmV0dXJuL1tld10kLy50ZXN0KGQpPy0zOm51bGx9KS5hdHRyKFwieVwiLGZ1bmN0aW9uKGQpe3JldHVybi9eW25zXS8udGVzdChkKT8tMzpudWxsfSkuYXR0cihcIndpZHRoXCIsNikuYXR0cihcImhlaWdodFwiLDYpLnN0eWxlKFwidmlzaWJpbGl0eVwiLFwiaGlkZGVuXCIpO3Jlc2l6ZS5zdHlsZShcImRpc3BsYXlcIixicnVzaC5lbXB0eSgpP1wibm9uZVwiOm51bGwpO3ZhciBnVXBkYXRlPWQzLnRyYW5zaXRpb24oZyksYmFja2dyb3VuZFVwZGF0ZT1kMy50cmFuc2l0aW9uKGJhY2tncm91bmQpLHJhbmdlO2lmKHgpe3JhbmdlPWQzX3NjYWxlUmFuZ2UoeCk7YmFja2dyb3VuZFVwZGF0ZS5hdHRyKFwieFwiLHJhbmdlWzBdKS5hdHRyKFwid2lkdGhcIixyYW5nZVsxXS1yYW5nZVswXSk7cmVkcmF3WChnVXBkYXRlKX1pZih5KXtyYW5nZT1kM19zY2FsZVJhbmdlKHkpO2JhY2tncm91bmRVcGRhdGUuYXR0cihcInlcIixyYW5nZVswXSkuYXR0cihcImhlaWdodFwiLHJhbmdlWzFdLXJhbmdlWzBdKTtyZWRyYXdZKGdVcGRhdGUpfXJlZHJhdyhnVXBkYXRlKX0pfWJydXNoLmV2ZW50PWZ1bmN0aW9uKGcpe2cuZWFjaChmdW5jdGlvbigpe3ZhciBldmVudF89ZXZlbnQub2YodGhpcyxhcmd1bWVudHMpLGV4dGVudDE9e3g6eEV4dGVudCx5OnlFeHRlbnQsaTp4RXh0ZW50RG9tYWluLGo6eUV4dGVudERvbWFpbn0sZXh0ZW50MD10aGlzLl9fY2hhcnRfX3x8ZXh0ZW50MTt0aGlzLl9fY2hhcnRfXz1leHRlbnQxO2lmKGQzX3RyYW5zaXRpb25Jbmhlcml0SWQpe2QzLnNlbGVjdCh0aGlzKS50cmFuc2l0aW9uKCkuZWFjaChcInN0YXJ0LmJydXNoXCIsZnVuY3Rpb24oKXt4RXh0ZW50RG9tYWluPWV4dGVudDAuaTt5RXh0ZW50RG9tYWluPWV4dGVudDAuajt4RXh0ZW50PWV4dGVudDAueDt5RXh0ZW50PWV4dGVudDAueTtldmVudF8oe3R5cGU6XCJicnVzaHN0YXJ0XCJ9KX0pLnR3ZWVuKFwiYnJ1c2g6YnJ1c2hcIixmdW5jdGlvbigpe3ZhciB4aT1kM19pbnRlcnBvbGF0ZUFycmF5KHhFeHRlbnQsZXh0ZW50MS54KSx5aT1kM19pbnRlcnBvbGF0ZUFycmF5KHlFeHRlbnQsZXh0ZW50MS55KTt4RXh0ZW50RG9tYWluPXlFeHRlbnREb21haW49bnVsbDtyZXR1cm4gZnVuY3Rpb24odCl7eEV4dGVudD1leHRlbnQxLng9eGkodCk7eUV4dGVudD1leHRlbnQxLnk9eWkodCk7XG5ldmVudF8oe3R5cGU6XCJicnVzaFwiLG1vZGU6XCJyZXNpemVcIn0pfX0pLmVhY2goXCJlbmQuYnJ1c2hcIixmdW5jdGlvbigpe3hFeHRlbnREb21haW49ZXh0ZW50MS5pO3lFeHRlbnREb21haW49ZXh0ZW50MS5qO2V2ZW50Xyh7dHlwZTpcImJydXNoXCIsbW9kZTpcInJlc2l6ZVwifSk7ZXZlbnRfKHt0eXBlOlwiYnJ1c2hlbmRcIn0pfSl9ZWxzZXtldmVudF8oe3R5cGU6XCJicnVzaHN0YXJ0XCJ9KTtldmVudF8oe3R5cGU6XCJicnVzaFwiLG1vZGU6XCJyZXNpemVcIn0pO2V2ZW50Xyh7dHlwZTpcImJydXNoZW5kXCJ9KX19KX07ZnVuY3Rpb24gcmVkcmF3KGcpe2cuc2VsZWN0QWxsKFwiLnJlc2l6ZVwiKS5hdHRyKFwidHJhbnNmb3JtXCIsZnVuY3Rpb24oZCl7cmV0dXJuXCJ0cmFuc2xhdGUoXCIreEV4dGVudFsrL2UkLy50ZXN0KGQpXStcIixcIit5RXh0ZW50WysvXnMvLnRlc3QoZCldK1wiKVwifSl9ZnVuY3Rpb24gcmVkcmF3WChnKXtnLnNlbGVjdChcIi5leHRlbnRcIikuYXR0cihcInhcIix4RXh0ZW50WzBdKTtnLnNlbGVjdEFsbChcIi5leHRlbnQsLm4+cmVjdCwucz5yZWN0XCIpLmF0dHIoXCJ3aWR0aFwiLHhFeHRlbnRbMV0teEV4dGVudFswXSl9ZnVuY3Rpb24gcmVkcmF3WShnKXtnLnNlbGVjdChcIi5leHRlbnRcIikuYXR0cihcInlcIix5RXh0ZW50WzBdKTtnLnNlbGVjdEFsbChcIi5leHRlbnQsLmU+cmVjdCwudz5yZWN0XCIpLmF0dHIoXCJoZWlnaHRcIix5RXh0ZW50WzFdLXlFeHRlbnRbMF0pfWZ1bmN0aW9uIGJydXNoc3RhcnQoKXt2YXIgdGFyZ2V0PXRoaXMsZXZlbnRUYXJnZXQ9ZDMuc2VsZWN0KGQzLmV2ZW50LnRhcmdldCksZXZlbnRfPWV2ZW50Lm9mKHRhcmdldCxhcmd1bWVudHMpLGc9ZDMuc2VsZWN0KHRhcmdldCkscmVzaXppbmc9ZXZlbnRUYXJnZXQuZGF0dW0oKSxyZXNpemluZ1g9IS9eKG58cykkLy50ZXN0KHJlc2l6aW5nKSYmeCxyZXNpemluZ1k9IS9eKGV8dykkLy50ZXN0KHJlc2l6aW5nKSYmeSxkcmFnZ2luZz1ldmVudFRhcmdldC5jbGFzc2VkKFwiZXh0ZW50XCIpLGRyYWdSZXN0b3JlPWQzX2V2ZW50X2RyYWdTdXBwcmVzcygpLGNlbnRlcixvcmlnaW49ZDMubW91c2UodGFyZ2V0KSxvZmZzZXQ7dmFyIHc9ZDMuc2VsZWN0KGQzX3dpbmRvdykub24oXCJrZXlkb3duLmJydXNoXCIsa2V5ZG93bikub24oXCJrZXl1cC5icnVzaFwiLGtleXVwKTtpZihkMy5ldmVudC5jaGFuZ2VkVG91Y2hlcyl7dy5vbihcInRvdWNobW92ZS5icnVzaFwiLGJydXNobW92ZSkub24oXCJ0b3VjaGVuZC5icnVzaFwiLGJydXNoZW5kKX1lbHNle3cub24oXCJtb3VzZW1vdmUuYnJ1c2hcIixicnVzaG1vdmUpLm9uKFwibW91c2V1cC5icnVzaFwiLGJydXNoZW5kKX1nLmludGVycnVwdCgpLnNlbGVjdEFsbChcIipcIikuaW50ZXJydXB0KCk7aWYoZHJhZ2dpbmcpe29yaWdpblswXT14RXh0ZW50WzBdLW9yaWdpblswXTtvcmlnaW5bMV09eUV4dGVudFswXS1vcmlnaW5bMV19ZWxzZSBpZihyZXNpemluZyl7dmFyIGV4PSsvdyQvLnRlc3QocmVzaXppbmcpLGV5PSsvXm4vLnRlc3QocmVzaXppbmcpO29mZnNldD1beEV4dGVudFsxLWV4XS1vcmlnaW5bMF0seUV4dGVudFsxLWV5XS1vcmlnaW5bMV1dO29yaWdpblswXT14RXh0ZW50W2V4XTtvcmlnaW5bMV09eUV4dGVudFtleV19ZWxzZSBpZihkMy5ldmVudC5hbHRLZXkpY2VudGVyPW9yaWdpbi5zbGljZSgpO2cuc3R5bGUoXCJwb2ludGVyLWV2ZW50c1wiLFwibm9uZVwiKS5zZWxlY3RBbGwoXCIucmVzaXplXCIpLnN0eWxlKFwiZGlzcGxheVwiLG51bGwpO2QzLnNlbGVjdChcImJvZHlcIikuc3R5bGUoXCJjdXJzb3JcIixldmVudFRhcmdldC5zdHlsZShcImN1cnNvclwiKSk7ZXZlbnRfKHt0eXBlOlwiYnJ1c2hzdGFydFwifSk7YnJ1c2htb3ZlKCk7ZnVuY3Rpb24ga2V5ZG93bigpe2lmKGQzLmV2ZW50LmtleUNvZGU9PTMyKXtpZighZHJhZ2dpbmcpe2NlbnRlcj1udWxsO29yaWdpblswXS09eEV4dGVudFsxXTtvcmlnaW5bMV0tPXlFeHRlbnRbMV07ZHJhZ2dpbmc9Mn1kM19ldmVudFByZXZlbnREZWZhdWx0KCl9fWZ1bmN0aW9uIGtleXVwKCl7aWYoZDMuZXZlbnQua2V5Q29kZT09MzImJmRyYWdnaW5nPT0yKXtvcmlnaW5bMF0rPXhFeHRlbnRbMV07b3JpZ2luWzFdKz15RXh0ZW50WzFdO2RyYWdnaW5nPTA7ZDNfZXZlbnRQcmV2ZW50RGVmYXVsdCgpfX1mdW5jdGlvbiBicnVzaG1vdmUoKXt2YXIgcG9pbnQ9ZDMubW91c2UodGFyZ2V0KSxtb3ZlZD1mYWxzZTtpZihvZmZzZXQpe3BvaW50WzBdKz1vZmZzZXRbMF07cG9pbnRbMV0rPW9mZnNldFsxXX1pZighZHJhZ2dpbmcpe2lmKGQzLmV2ZW50LmFsdEtleSl7aWYoIWNlbnRlciljZW50ZXI9Wyh4RXh0ZW50WzBdK3hFeHRlbnRbMV0pLzIsKHlFeHRlbnRbMF0reUV4dGVudFsxXSkvMl07b3JpZ2luWzBdPXhFeHRlbnRbKyhwb2ludFswXTxjZW50ZXJbMF0pXTtvcmlnaW5bMV09eUV4dGVudFsrKHBvaW50WzFdPGNlbnRlclsxXSldfWVsc2UgY2VudGVyPW51bGx9aWYocmVzaXppbmdYJiZtb3ZlMShwb2ludCx4LDApKXtyZWRyYXdYKGcpO21vdmVkPXRydWV9aWYocmVzaXppbmdZJiZtb3ZlMShwb2ludCx5LDEpKXtyZWRyYXdZKGcpO21vdmVkPXRydWV9aWYobW92ZWQpe3JlZHJhdyhnKTtldmVudF8oe3R5cGU6XCJicnVzaFwiLG1vZGU6ZHJhZ2dpbmc/XCJtb3ZlXCI6XCJyZXNpemVcIn0pfX1mdW5jdGlvbiBtb3ZlMShwb2ludCxzY2FsZSxpKXt2YXIgcmFuZ2U9ZDNfc2NhbGVSYW5nZShzY2FsZSkscjA9cmFuZ2VbMF0scjE9cmFuZ2VbMV0scG9zaXRpb249b3JpZ2luW2ldLGV4dGVudD1pP3lFeHRlbnQ6eEV4dGVudCxzaXplPWV4dGVudFsxXS1leHRlbnRbMF0sbWluLG1heDtpZihkcmFnZ2luZyl7cjAtPXBvc2l0aW9uO3IxLT1zaXplK3Bvc2l0aW9ufW1pbj0oaT95Q2xhbXA6eENsYW1wKT9NYXRoLm1heChyMCxNYXRoLm1pbihyMSxwb2ludFtpXSkpOnBvaW50W2ldO2lmKGRyYWdnaW5nKXttYXg9KG1pbis9cG9zaXRpb24pK3NpemV9ZWxzZXtpZihjZW50ZXIpcG9zaXRpb249TWF0aC5tYXgocjAsTWF0aC5taW4ocjEsMipjZW50ZXJbaV0tbWluKSk7aWYocG9zaXRpb248bWluKXttYXg9bWluO21pbj1wb3NpdGlvbn1lbHNle21heD1wb3NpdGlvbn19aWYoZXh0ZW50WzBdIT1taW58fGV4dGVudFsxXSE9bWF4KXtpZihpKXlFeHRlbnREb21haW49bnVsbDtlbHNlIHhFeHRlbnREb21haW49bnVsbDtleHRlbnRbMF09bWluO2V4dGVudFsxXT1tYXg7cmV0dXJuIHRydWV9fWZ1bmN0aW9uIGJydXNoZW5kKCl7YnJ1c2htb3ZlKCk7Zy5zdHlsZShcInBvaW50ZXItZXZlbnRzXCIsXCJhbGxcIikuc2VsZWN0QWxsKFwiLnJlc2l6ZVwiKS5zdHlsZShcImRpc3BsYXlcIixicnVzaC5lbXB0eSgpP1wibm9uZVwiOm51bGwpO2QzLnNlbGVjdChcImJvZHlcIikuc3R5bGUoXCJjdXJzb3JcIixudWxsKTt3Lm9uKFwibW91c2Vtb3ZlLmJydXNoXCIsbnVsbCkub24oXCJtb3VzZXVwLmJydXNoXCIsbnVsbCkub24oXCJ0b3VjaG1vdmUuYnJ1c2hcIixudWxsKS5vbihcInRvdWNoZW5kLmJydXNoXCIsbnVsbCkub24oXCJrZXlkb3duLmJydXNoXCIsbnVsbCkub24oXCJrZXl1cC5icnVzaFwiLG51bGwpO2RyYWdSZXN0b3JlKCk7ZXZlbnRfKHt0eXBlOlwiYnJ1c2hlbmRcIn0pfX1icnVzaC54PWZ1bmN0aW9uKHope2lmKCFhcmd1bWVudHMubGVuZ3RoKXJldHVybiB4O3g9ejtyZXNpemVzPWQzX3N2Z19icnVzaFJlc2l6ZXNbIXg8PDF8IXldO3JldHVybiBicnVzaH07YnJ1c2gueT1mdW5jdGlvbih6KXtpZighYXJndW1lbnRzLmxlbmd0aClyZXR1cm4geTt5PXo7cmVzaXplcz1kM19zdmdfYnJ1c2hSZXNpemVzWyF4PDwxfCF5XTtyZXR1cm4gYnJ1c2h9O2JydXNoLmNsYW1wPWZ1bmN0aW9uKHope2lmKCFhcmd1bWVudHMubGVuZ3RoKXJldHVybiB4JiZ5P1t4Q2xhbXAseUNsYW1wXTp4P3hDbGFtcDp5P3lDbGFtcDpudWxsO2lmKHgmJnkpeENsYW1wPSEhelswXSx5Q2xhbXA9ISF6WzFdO2Vsc2UgaWYoeCl4Q2xhbXA9ISF6O2Vsc2UgaWYoeSl5Q2xhbXA9ISF6O3JldHVybiBicnVzaH07YnJ1c2guZXh0ZW50PWZ1bmN0aW9uKHope3ZhciB4MCx4MSx5MCx5MSx0O2lmKCFhcmd1bWVudHMubGVuZ3RoKXtpZih4KXtpZih4RXh0ZW50RG9tYWluKXt4MD14RXh0ZW50RG9tYWluWzBdLHgxPXhFeHRlbnREb21haW5bMV19ZWxzZXt4MD14RXh0ZW50WzBdLHgxPXhFeHRlbnRbMV07aWYoeC5pbnZlcnQpeDA9eC5pbnZlcnQoeDApLHgxPXguaW52ZXJ0KHgxKTtpZih4MTx4MCl0PXgwLHgwPXgxLHgxPXR9fWlmKHkpe2lmKHlFeHRlbnREb21haW4pe3kwPXlFeHRlbnREb21haW5bMF0seTE9eUV4dGVudERvbWFpblsxXX1lbHNle3kwPXlFeHRlbnRbMF0seTE9eUV4dGVudFsxXTtpZih5LmludmVydCl5MD15LmludmVydCh5MCkseTE9eS5pbnZlcnQoeTEpO2lmKHkxPHkwKXQ9eTAseTA9eTEseTE9dH19cmV0dXJuIHgmJnk/W1t4MCx5MF0sW3gxLHkxXV06eD9beDAseDFdOnkmJlt5MCx5MV19aWYoeCl7eDA9elswXSx4MT16WzFdO2lmKHkpeDA9eDBbMF0seDE9eDFbMF07eEV4dGVudERvbWFpbj1beDAseDFdO2lmKHguaW52ZXJ0KXgwPXgoeDApLHgxPXgoeDEpO2lmKHgxPHgwKXQ9eDAseDA9eDEseDE9dDtpZih4MCE9eEV4dGVudFswXXx8eDEhPXhFeHRlbnRbMV0peEV4dGVudD1beDAseDFdfWlmKHkpe3kwPXpbMF0seTE9elsxXTtpZih4KXkwPXkwWzFdLHkxPXkxWzFdO3lFeHRlbnREb21haW49W3kwLHkxXTtpZih5LmludmVydCl5MD15KHkwKSx5MT15KHkxKTtpZih5MTx5MCl0PXkwLHkwPXkxLHkxPXQ7aWYoeTAhPXlFeHRlbnRbMF18fHkxIT15RXh0ZW50WzFdKXlFeHRlbnQ9W3kwLHkxXX1yZXR1cm4gYnJ1c2h9O2JydXNoLmNsZWFyPWZ1bmN0aW9uKCl7aWYoIWJydXNoLmVtcHR5KCkpe3hFeHRlbnQ9WzAsMF0seUV4dGVudD1bMCwwXTt4RXh0ZW50RG9tYWluPXlFeHRlbnREb21haW49bnVsbH1yZXR1cm4gYnJ1c2h9O2JydXNoLmVtcHR5PWZ1bmN0aW9uKCl7cmV0dXJuISF4JiZ4RXh0ZW50WzBdPT14RXh0ZW50WzFdfHwhIXkmJnlFeHRlbnRbMF09PXlFeHRlbnRbMV19O3JldHVybiBkMy5yZWJpbmQoYnJ1c2gsZXZlbnQsXCJvblwiKX07dmFyIGQzX3N2Z19icnVzaEN1cnNvcj17bjpcIm5zLXJlc2l6ZVwiLGU6XCJldy1yZXNpemVcIixzOlwibnMtcmVzaXplXCIsdzpcImV3LXJlc2l6ZVwiLG53OlwibndzZS1yZXNpemVcIixuZTpcIm5lc3ctcmVzaXplXCIsc2U6XCJud3NlLXJlc2l6ZVwiLHN3OlwibmVzdy1yZXNpemVcIn07dmFyIGQzX3N2Z19icnVzaFJlc2l6ZXM9W1tcIm5cIixcImVcIixcInNcIixcIndcIixcIm53XCIsXCJuZVwiLFwic2VcIixcInN3XCJdLFtcImVcIixcIndcIl0sW1wiblwiLFwic1wiXSxbXV07ZDMueGhyPWQzX3hoclR5cGUoZDNfaWRlbnRpdHkpO2Z1bmN0aW9uIGQzX3hoclR5cGUocmVzcG9uc2Upe3JldHVybiBmdW5jdGlvbih1cmwsbWltZVR5cGUsY2FsbGJhY2spe2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0yJiZ0eXBlb2YgbWltZVR5cGU9PT1cImZ1bmN0aW9uXCIpY2FsbGJhY2s9bWltZVR5cGUsbWltZVR5cGU9bnVsbDtyZXR1cm4gZDNfeGhyKHVybCxtaW1lVHlwZSxyZXNwb25zZSxjYWxsYmFjayl9fWZ1bmN0aW9uIGQzX3hocih1cmwsbWltZVR5cGUscmVzcG9uc2UsY2FsbGJhY2spe3ZhciB4aHI9e30sZGlzcGF0Y2g9ZDMuZGlzcGF0Y2goXCJiZWZvcmVzZW5kXCIsXCJwcm9ncmVzc1wiLFwibG9hZFwiLFwiZXJyb3JcIiksaGVhZGVycz17fSxyZXF1ZXN0PW5ldyBYTUxIdHRwUmVxdWVzdCxyZXNwb25zZVR5cGU9bnVsbDtpZihkM193aW5kb3cuWERvbWFpblJlcXVlc3QmJiEoXCJ3aXRoQ3JlZGVudGlhbHNcImluIHJlcXVlc3QpJiYvXihodHRwKHMpPzopP1xcL1xcLy8udGVzdCh1cmwpKXJlcXVlc3Q9bmV3IFhEb21haW5SZXF1ZXN0O1wib25sb2FkXCJpbiByZXF1ZXN0P3JlcXVlc3Qub25sb2FkPXJlcXVlc3Qub25lcnJvcj1yZXNwb25kOnJlcXVlc3Qub25yZWFkeXN0YXRlY2hhbmdlPWZ1bmN0aW9uKCl7cmVxdWVzdC5yZWFkeVN0YXRlPjMmJnJlc3BvbmQoKX07ZnVuY3Rpb24gcmVzcG9uZCgpe3ZhciBzdGF0dXM9cmVxdWVzdC5zdGF0dXMscmVzdWx0O2lmKCFzdGF0dXMmJnJlcXVlc3QucmVzcG9uc2VUZXh0fHxzdGF0dXM+PTIwMCYmc3RhdHVzPDMwMHx8c3RhdHVzPT09MzA0KXt0cnl7cmVzdWx0PXJlc3BvbnNlLmNhbGwoeGhyLHJlcXVlc3QpfWNhdGNoKGUpe2Rpc3BhdGNoLmVycm9yLmNhbGwoeGhyLGUpO3JldHVybn1kaXNwYXRjaC5sb2FkLmNhbGwoeGhyLHJlc3VsdCl9ZWxzZXtkaXNwYXRjaC5lcnJvci5jYWxsKHhocixyZXF1ZXN0KX19cmVxdWVzdC5vbnByb2dyZXNzPWZ1bmN0aW9uKGV2ZW50KXt2YXIgbz1kMy5ldmVudDtkMy5ldmVudD1ldmVudDt0cnl7ZGlzcGF0Y2gucHJvZ3Jlc3MuY2FsbCh4aHIscmVxdWVzdCl9ZmluYWxseXtkMy5ldmVudD1vfX07eGhyLmhlYWRlcj1mdW5jdGlvbihuYW1lLHZhbHVlKXtuYW1lPShuYW1lK1wiXCIpLnRvTG93ZXJDYXNlKCk7aWYoYXJndW1lbnRzLmxlbmd0aDwyKXJldHVybiBoZWFkZXJzW25hbWVdO2lmKHZhbHVlPT1udWxsKWRlbGV0ZSBoZWFkZXJzW25hbWVdO2Vsc2UgaGVhZGVyc1tuYW1lXT12YWx1ZStcIlwiO3JldHVybiB4aHJ9O3hoci5taW1lVHlwZT1mdW5jdGlvbih2YWx1ZSl7aWYoIWFyZ3VtZW50cy5sZW5ndGgpcmV0dXJuIG1pbWVUeXBlO21pbWVUeXBlPXZhbHVlPT1udWxsP251bGw6dmFsdWUrXCJcIjtyZXR1cm4geGhyfTt4aHIucmVzcG9uc2VUeXBlPWZ1bmN0aW9uKHZhbHVlKXtpZighYXJndW1lbnRzLmxlbmd0aClyZXR1cm4gcmVzcG9uc2VUeXBlO3Jlc3BvbnNlVHlwZT12YWx1ZTtyZXR1cm4geGhyfTt4aHIucmVzcG9uc2U9ZnVuY3Rpb24odmFsdWUpe3Jlc3BvbnNlPXZhbHVlO3JldHVybiB4aHJ9O1tcImdldFwiLFwicG9zdFwiXS5mb3JFYWNoKGZ1bmN0aW9uKG1ldGhvZCl7eGhyW21ldGhvZF09ZnVuY3Rpb24oKXtyZXR1cm4geGhyLnNlbmQuYXBwbHkoeGhyLFttZXRob2RdLmNvbmNhdChkM19hcnJheShhcmd1bWVudHMpKSl9fSk7eGhyLnNlbmQ9ZnVuY3Rpb24obWV0aG9kLGRhdGEsY2FsbGJhY2spe2lmKGFyZ3VtZW50cy5sZW5ndGg9PT0yJiZ0eXBlb2YgZGF0YT09PVwiZnVuY3Rpb25cIiljYWxsYmFjaz1kYXRhLGRhdGE9bnVsbDtyZXF1ZXN0Lm9wZW4obWV0aG9kLHVybCx0cnVlKTtpZihtaW1lVHlwZSE9bnVsbCYmIShcImFjY2VwdFwiaW4gaGVhZGVycykpaGVhZGVyc1tcImFjY2VwdFwiXT1taW1lVHlwZStcIiwqLypcIjtpZihyZXF1ZXN0LnNldFJlcXVlc3RIZWFkZXIpZm9yKHZhciBuYW1lIGluIGhlYWRlcnMpcmVxdWVzdC5zZXRSZXF1ZXN0SGVhZGVyKG5hbWUsaGVhZGVyc1tuYW1lXSk7aWYobWltZVR5cGUhPW51bGwmJnJlcXVlc3Qub3ZlcnJpZGVNaW1lVHlwZSlyZXF1ZXN0Lm92ZXJyaWRlTWltZVR5cGUobWltZVR5cGUpO2lmKHJlc3BvbnNlVHlwZSE9bnVsbClyZXF1ZXN0LnJlc3BvbnNlVHlwZT1yZXNwb25zZVR5cGU7aWYoY2FsbGJhY2shPW51bGwpeGhyLm9uKFwiZXJyb3JcIixjYWxsYmFjaykub24oXCJsb2FkXCIsZnVuY3Rpb24ocmVxdWVzdCl7Y2FsbGJhY2sobnVsbCxyZXF1ZXN0KX0pO2Rpc3BhdGNoLmJlZm9yZXNlbmQuY2FsbCh4aHIscmVxdWVzdCk7cmVxdWVzdC5zZW5kKGRhdGE9PW51bGw/bnVsbDpkYXRhKTtyZXR1cm4geGhyfTt4aHIuYWJvcnQ9ZnVuY3Rpb24oKXtyZXF1ZXN0LmFib3J0KCk7cmV0dXJuIHhocn07ZDMucmViaW5kKHhocixkaXNwYXRjaCxcIm9uXCIpO3JldHVybiBjYWxsYmFjaz09bnVsbD94aHI6eGhyLmdldChkM194aHJfZml4Q2FsbGJhY2soY2FsbGJhY2spKX1mdW5jdGlvbiBkM194aHJfZml4Q2FsbGJhY2soY2FsbGJhY2spe3JldHVybiBjYWxsYmFjay5sZW5ndGg9PT0xP2Z1bmN0aW9uKGVycm9yLHJlcXVlc3Qpe2NhbGxiYWNrKGVycm9yPT1udWxsP3JlcXVlc3Q6bnVsbCl9OmNhbGxiYWNrfWQzLnRleHQ9ZDNfeGhyVHlwZShmdW5jdGlvbihyZXF1ZXN0KXtyZXR1cm4gcmVxdWVzdC5yZXNwb25zZVRleHR9KTtkMy5qc29uPWZ1bmN0aW9uKHVybCxjYWxsYmFjayl7cmV0dXJuIGQzX3hocih1cmwsXCJhcHBsaWNhdGlvbi9qc29uXCIsZDNfanNvbixjYWxsYmFjayl9O2Z1bmN0aW9uIGQzX2pzb24ocmVxdWVzdCl7cmV0dXJuIEpTT04ucGFyc2UocmVxdWVzdC5yZXNwb25zZVRleHQpfWQzLmh0bWw9ZnVuY3Rpb24odXJsLGNhbGxiYWNrKXtyZXR1cm4gZDNfeGhyKHVybCxcInRleHQvaHRtbFwiLGQzX2h0bWwsY2FsbGJhY2spfTtmdW5jdGlvbiBkM19odG1sKHJlcXVlc3Qpe3ZhciByYW5nZT1kM19kb2N1bWVudC5jcmVhdGVSYW5nZSgpO3JhbmdlLnNlbGVjdE5vZGUoZDNfZG9jdW1lbnQuYm9keSk7cmV0dXJuIHJhbmdlLmNyZWF0ZUNvbnRleHR1YWxGcmFnbWVudChyZXF1ZXN0LnJlc3BvbnNlVGV4dCl9ZDMueG1sPWQzX3hoclR5cGUoZnVuY3Rpb24ocmVxdWVzdCl7cmV0dXJuIHJlcXVlc3QucmVzcG9uc2VYTUx9KTtpZih0eXBlb2YgZGVmaW5lPT09XCJmdW5jdGlvblwiJiZkZWZpbmUuYW1kKXtkZWZpbmUoZDMpfWVsc2UgaWYodHlwZW9mIG1vZHVsZT09PVwib2JqZWN0XCImJm1vZHVsZS5leHBvcnRzKXttb2R1bGUuZXhwb3J0cz1kM31lbHNle3RoaXMuZDM9ZDN9fSgpOyIsInZhciBkMyA9IHJlcXVpcmUoJy4uL2xpYi9kM19jdXN0b20nKTtcbnZhciB1dGlsaXR5ID0gcmVxdWlyZSgnLi91dGlsaXR5Jyk7XG5cbnZhciBTdXJmYWNlQ29udHJvbCA9IEwuQ29udHJvbC5leHRlbmQoe1xuICAgIGluY2x1ZGVzOiBMLk1peGluLkV2ZW50cyxcblxuICAgIG9wdGlvbnM6IHtcbiAgICAgICAgY29sbGFwc2VkOiB0cnVlLFxuICAgICAgICBwb3NpdGlvbjogJ3RvcHJpZ2h0JyxcbiAgICAgICAgYXV0b1pJbmRleDogdHJ1ZVxuICAgIH0sXG5cbiAgICBpbml0aWFsaXplOiBmdW5jdGlvbihvcHRpb25zLCBkYXRhKSB7XG4gICAgICAgIG9wdGlvbnMuZGF0YSA9IGRhdGE7XG4gICAgICAgIEwuc2V0T3B0aW9ucyh0aGlzLCBvcHRpb25zKTtcbiAgICB9LFxuXG4gICAgb25BZGQ6IGZ1bmN0aW9uKG1hcCkge1xuICAgICAgICB0aGlzLl9tYXAgPSBtYXA7XG4gICAgICAgIHZhciBjbGFzc05hbWVzID0gJ2xlYWZsZXQtc3VyZmFjZS1jaGFydCBsZWFmbGV0LWJhcic7XG4gICAgICAgIHZhciBjb250YWluZXIgPSB0aGlzLl9jb250YWluZXIgPSBMLkRvbVV0aWwuY3JlYXRlKCdkaXYnLCBjbGFzc05hbWVzKTtcbiAgICAgICAgZDMuc2VsZWN0KGNvbnRhaW5lcikuYXR0cignaWQnLCAnY2hhcnQtY29udGFpbmVyJyk7XG4gICAgICAgIHRoaXMuX3JlbW92ZUNoYXJ0KCk7XG4gICAgICAgIHRoaXMuX21ha2VDaGFydCgpO1xuICAgICAgICByZXR1cm4gY29udGFpbmVyO1xuICAgIH0sXG5cbiAgICBfbWFrZUNoYXJ0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHN1cmZhY2UgPSB0aGlzO1xuICAgICAgICB2YXIgb3B0aW9ucyA9IHRoaXMub3B0aW9ucztcbiAgICAgICAgdmFyIGRhdGEgPSB1dGlsaXR5LmZvcm1hdFZhbHVlc0ZvckNoYXJ0KG9wdGlvbnMuZGF0YS5yZXN1bHRzLCBvcHRpb25zKTtcblxuICAgICAgICBpZiAoZGF0YS5sZW5ndGggPD0gMSkgdGhyb3cgbmV3IEVycm9yKCdUb28gZmV3IHBvaW50cyB0byBjcmVhdGUgYSBjaGFydCcpO1xuICAgICAgICBpZiAoZGF0YS50eXBlID09PSAnRmVhdHVyZUNvbGxlY3Rpb24nKSB0aHJvdyBuZXcgRXJyb3IoJ1R1cm4gb3B0aW9uIGBnZW9qc29uYCB0byBmYWxzZSB0byB1c2UgY2hhcnQnKTtcblxuICAgICAgICBpZighb3B0aW9ucy55QXhpcy5kYXRhKSB0aHJvdyBuZXcgRXJyb3IoJ0EgeUF4aXMgZGF0YSBmaWVsZCBpcyByZXF1aXJlZCcpO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGRhdGEubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgIGlmICh0eXBlb2YgZGF0YVtpXVtvcHRpb25zLnlBeGlzLmRhdGFdID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTC5tYXBib3guc3VyZmFjZS5jaGFydCBvbmx5IHdvcmtzIHdpdGggaW50ZWdlcnMuIFwiJyArIG9wdGlvbnMueUF4aXMuZGF0YSArICdcIiBpcyBhIHN0cmluZy4nKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIG9wdGlvbnMubWFyZ2luID0gb3B0aW9ucy5tYXJnaW4gfHwgWzI1LCAyMCwgMjUsIDYwXTtcbiAgICAgICAgb3B0aW9ucy5oZWlnaHQgPSBvcHRpb25zLmhlaWdodCB8fCAxMDA7XG4gICAgICAgIG9wdGlvbnMud2lkdGggPSBvcHRpb25zLndpZHRoIHx8IDM1MDtcbiAgICAgICAgb3B0aW9ucy54QXhpcyA9IG9wdGlvbnMueEF4aXMgfHwge307XG4gICAgICAgIG9wdGlvbnMueUF4aXMgPSBvcHRpb25zLnlBeGlzIHx8IHt9O1xuICAgICAgICBvcHRpb25zLnhBeGlzLm51bWJlck9mVGlja3MgPSBvcHRpb25zLnhBeGlzLm51bWJlck9mVGlja3MgfHwgNTtcbiAgICAgICAgb3B0aW9ucy55QXhpcy5udW1iZXJPZlRpY2tzID0gb3B0aW9ucy55QXhpcy5udW1iZXJPZlRpY2tzIHx8IDQ7XG4gICAgICAgIG9wdGlvbnMueEF4aXMudW5pdHMgPSBvcHRpb25zLnhBeGlzLnVuaXRzIHx8ICdrbSc7XG4gICAgICAgIG9wdGlvbnMueUF4aXMudW5pdHMgPSBvcHRpb25zLnlBeGlzLnVuaXRzIHx8ICcnO1xuICAgICAgICBvcHRpb25zLnhBeGlzLmxhYmVsID0gb3B0aW9ucy54QXhpcy5sYWJlbCB8fCBudWxsO1xuICAgICAgICBvcHRpb25zLnlBeGlzLmxhYmVsID0gb3B0aW9ucy55QXhpcy5sYWJlbCB8fCBudWxsO1xuICAgICAgICBvcHRpb25zLnhBeGlzLmRhdGEgPSBvcHRpb25zLnhBeGlzLmRhdGEgfHwgJ2Rpc3RhbmNlJztcbiAgICAgICAgb3B0aW9ucy55QXhpcy5kYXRhID0gb3B0aW9ucy55QXhpcy5kYXRhO1xuXG4gICAgICAgIHZhciBkb21haW5YID0gZDMuZXh0ZW50KGRhdGEsIGZ1bmN0aW9uKGRhdHVtKSB7XG4gICAgICAgICAgICByZXR1cm4gZGF0dW1bb3B0aW9ucy54QXhpcy5kYXRhXTtcbiAgICAgICAgfSk7XG4gICAgICAgIHZhciBkb21haW5ZID0gZDMuZXh0ZW50KGRhdGEsIGZ1bmN0aW9uKGRhdHVtKSB7XG4gICAgICAgICAgICByZXR1cm4gZGF0dW1bb3B0aW9ucy55QXhpcy5kYXRhXTtcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIHJhbmdlWCA9IFswLCBvcHRpb25zLndpZHRoXSxcbiAgICAgICAgICAgIHJhbmdlWSA9IFtvcHRpb25zLmhlaWdodCwgMF07XG5cbiAgICAgICAgdmFyIHNjYWxlWCA9IGQzLnNjYWxlLmxpbmVhcigpXG4gICAgICAgICAgICAuZG9tYWluKGRvbWFpblgpXG4gICAgICAgICAgICAucmFuZ2UocmFuZ2VYKTtcbiAgICAgICAgdmFyIHNjYWxlWSA9IGQzLnNjYWxlLmxpbmVhcigpXG4gICAgICAgICAgICAuZG9tYWluKGRvbWFpblkpXG4gICAgICAgICAgICAucmFuZ2UocmFuZ2VZKTtcblxuICAgICAgICB2YXIgeEF4aXMgPSBkMy5zdmcuYXhpcygpXG4gICAgICAgICAgICAuc2NhbGUoc2NhbGVYKVxuICAgICAgICAgICAgLm9yaWVudCgnYm90dG9tJylcbiAgICAgICAgICAgIC5vdXRlclRpY2tTaXplKDApXG4gICAgICAgICAgICAudGlja3Mob3B0aW9ucy54QXhpcy5udW1iZXJPZlRpY2tzKVxuICAgICAgICAgICAgLnRpY2tGb3JtYXQoZnVuY3Rpb24oZCkgeyByZXR1cm4gZCArICcgJyArIG9wdGlvbnMueEF4aXMudW5pdHM7IH0pO1xuXG4gICAgICAgIHZhciB5QXhpcyA9IGQzLnN2Zy5heGlzKClcbiAgICAgICAgICAgIC5zY2FsZShzY2FsZVkpXG4gICAgICAgICAgICAub3V0ZXJUaWNrU2l6ZSgwKVxuICAgICAgICAgICAgLm9yaWVudCgnbGVmdCcpXG4gICAgICAgICAgICAudGlja3Mob3B0aW9ucy55QXhpcy5udW1iZXJPZlRpY2tzKVxuICAgICAgICAgICAgLnRpY2tGb3JtYXQoZnVuY3Rpb24oZCkgeyByZXR1cm4gZCArICcgJyArIG9wdGlvbnMueUF4aXMudW5pdHM7IH0pO1xuXG4gICAgICAgIHZhciBsaW5lID0gZDMuc3ZnLmxpbmUoKVxuICAgICAgICAgICAgLmludGVycG9sYXRlKCdtb25vdG9uZScpXG4gICAgICAgICAgICAueChmdW5jdGlvbihkYXR1bSkge1xuICAgICAgICAgICAgICAgIHJldHVybiBzY2FsZVgoZGF0dW1bb3B0aW9ucy54QXhpcy5kYXRhXSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnkoZnVuY3Rpb24oZGF0dW0pIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc2NhbGVZKGRhdHVtW29wdGlvbnMueUF4aXMuZGF0YV0pO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgdmFyIGFyZWEgPSBkMy5zdmcuYXJlYSgpXG4gICAgICAgICAgICAuaW50ZXJwb2xhdGUoJ21vbm90b25lJylcbiAgICAgICAgICAgIC54KGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc2NhbGVYKGRbb3B0aW9ucy54QXhpcy5kYXRhXSk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnkwKG9wdGlvbnMuaGVpZ2h0KVxuICAgICAgICAgICAgLnkxKGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gc2NhbGVZKGRbb3B0aW9ucy55QXhpcy5kYXRhXSk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICB2YXIgc3ZnID0gZDMuc2VsZWN0KHN1cmZhY2UuX2NvbnRhaW5lcilcbiAgICAgICAgICAgIC5hcHBlbmQoJ2RpdicpXG4gICAgICAgICAgICAuYXR0cignaWQnLCAnY2hhcnQnKVxuICAgICAgICAgICAgLmFwcGVuZCgnc3ZnJylcbiAgICAgICAgICAgIC5hdHRyKCd3aWR0aCcsIG9wdGlvbnMud2lkdGggKyBvcHRpb25zLm1hcmdpblszXSArIG9wdGlvbnMubWFyZ2luWzFdKVxuICAgICAgICAgICAgLmF0dHIoJ2hlaWdodCcsIG9wdGlvbnMuaGVpZ2h0ICsgb3B0aW9ucy5tYXJnaW5bMF0gKyBvcHRpb25zLm1hcmdpblsyXSlcbiAgICAgICAgICAgIC5hcHBlbmQoJ2cnKVxuICAgICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArIG9wdGlvbnMubWFyZ2luWzNdICsgJywnICsgb3B0aW9ucy5tYXJnaW5bMF0gKyAnKScpO1xuXG4gICAgICAgIHZhciBleHRlbnQgPSBkMy5leHRlbnQoZGF0YSwgZnVuY3Rpb24oZCkgeyByZXR1cm4gZFtvcHRpb25zLnlBeGlzLmRhdGFdOyB9KTtcbiAgICAgICAgZXh0ZW50WzBdID0gZXh0ZW50WzBdIC0gKGV4dGVudFswXSAqIDAuMDUpO1xuXG4gICAgICAgIHNjYWxlWC5kb21haW4oW2RhdGFbMF1bb3B0aW9ucy54QXhpcy5kYXRhXSwgZGF0YVtkYXRhLmxlbmd0aCAtIDFdW29wdGlvbnMueEF4aXMuZGF0YV1dKTtcbiAgICAgICAgc2NhbGVZLmRvbWFpbihleHRlbnQpO1xuXG4gICAgICAgIGlmIChvcHRpb25zLmNoYXJ0VHlwZSA9PT0gJ2FyZWEnKSB7XG4gICAgICAgICAgICBzdmcuYXBwZW5kKCdwYXRoJylcbiAgICAgICAgICAgICAgICAuZGF0dW0oZGF0YSlcbiAgICAgICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnYXJlYScpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2QnLCBhcmVhKTtcbiAgICAgICAgICAgIHN2Zy5hcHBlbmQoJ3BhdGgnKVxuICAgICAgICAgICAgICAgIC5kYXR1bShkYXRhKVxuICAgICAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICdsaW5lJylcbiAgICAgICAgICAgICAgICAuYXR0cignZCcsIGxpbmUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgc3ZnLmFwcGVuZCgncGF0aCcpXG4gICAgICAgICAgICAgICAgLmRhdHVtKGRhdGEpXG4gICAgICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ2xpbmUnKVxuICAgICAgICAgICAgICAgIC5hdHRyKCdkJywgbGluZSk7XG4gICAgICAgIH1cblxuICAgICAgICBzdmcuYXBwZW5kKCdnJylcbiAgICAgICAgICAgIC5hdHRyKCdjbGFzcycsICd4IGF4aXMnKVxuICAgICAgICAgICAgLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoMCwnICsgb3B0aW9ucy5oZWlnaHQgKyAnKScpXG4gICAgICAgICAgICAuY2FsbCh4QXhpcylcbiAgICAgICAgICAgIC5hcHBlbmQoJ3RleHQnKVxuICAgICAgICAgICAgLnN0eWxlKCd0ZXh0LWFuY2hvcicsICdlbmQnKVxuICAgICAgICAgICAgLmF0dHIoJ3gnLCBvcHRpb25zLndpZHRoKVxuICAgICAgICAgICAgLmF0dHIoJ3knLCAtNylcbiAgICAgICAgICAgIC50ZXh0KG9wdGlvbnMueEF4aXMubGFiZWwpO1xuXG4gICAgICAgIHN2Zy5hcHBlbmQoJ2cnKVxuICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ3kgYXhpcycpXG4gICAgICAgICAgICAuY2FsbCh5QXhpcylcbiAgICAgICAgICAgIC5hcHBlbmQoJ3RleHQnKVxuICAgICAgICAgICAgLmF0dHIoJ3knLCAtMTUpXG4gICAgICAgICAgICAuYXR0cigneCcsIC01KVxuICAgICAgICAgICAgLnRleHQob3B0aW9ucy55QXhpcy5sYWJlbCk7XG5cblxuICAgICAgICB2YXIgaG92ZXIgPSBzdmdcbiAgICAgICAgICAgIC5hcHBlbmQoJ2cnKTtcblxuICAgICAgICBob3Zlci5hcHBlbmQoJ3RleHQnKVxuICAgICAgICAgICAgLmF0dHIoJ3gnLCAtMTUpXG4gICAgICAgICAgICAuYXR0cignY2xhc3MnLCAnaG92ZXItdGV4dCcpXG4gICAgICAgICAgICAuYXR0cignZHknLCAtNSk7XG5cbiAgICAgICAgaG92ZXIuYXBwZW5kKCdsaW5lJylcbiAgICAgICAgICAgIC5hdHRyKHtcbiAgICAgICAgICAgICAgICAneDEnOiAwLFxuICAgICAgICAgICAgICAgICd5MSc6IDAsXG4gICAgICAgICAgICAgICAgJ3gyJzogMCxcbiAgICAgICAgICAgICAgICAneTInOiBvcHRpb25zLmhlaWdodFxuICAgICAgICAgICAgfSkuYXR0cignY2xhc3MnLCAnaG92ZXItbGluZScpO1xuXG4gICAgICAgIHZhciBiaXNlY3QgPSBkMy5iaXNlY3RvcihmdW5jdGlvbihkYXR1bSkge1xuICAgICAgICAgICAgcmV0dXJuIGRhdHVtW29wdGlvbnMueEF4aXMuZGF0YV07XG4gICAgICAgIH0pLnJpZ2h0O1xuXG4gICAgICAgIHN2Zy5hcHBlbmQoJ3JlY3QnKVxuICAgICAgICAgICAgLmF0dHIoJ2NsYXNzJywgJ292ZXJsYXknKVxuICAgICAgICAgICAgLmF0dHIoJ3dpZHRoJywgb3B0aW9ucy53aWR0aClcbiAgICAgICAgICAgIC5hdHRyKCdoZWlnaHQnLCBvcHRpb25zLmhlaWdodClcbiAgICAgICAgICAgIC5vbignbW91c2VvdmVyJywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgICAgaG92ZXIuc3R5bGUoJ2Rpc3BsYXknLCAnaW5oZXJpdCcpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5vbignbW91c2VvdXQnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBob3Zlci5zdHlsZSgnZGlzcGxheScsICdub25lJyk7XG4gICAgICAgICAgICAgICAgc3VyZmFjZS5fcmVzZXRIb3Zlck1hcmtlcigpO1xuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5vbignbW91c2Vtb3ZlJywgbW91c2Vtb3ZlKTtcblxuICAgICAgICBmdW5jdGlvbiBtb3VzZW1vdmUoKSB7XG4gICAgICAgICAgICB2YXIgbW91c2UgPSBkMy5tb3VzZSh0aGlzKSxcbiAgICAgICAgICAgICAgICBtb3VzZVggPSBzY2FsZVguaW52ZXJ0KG1vdXNlWzBdKSxcbiAgICAgICAgICAgICAgICBpbmRleCA9IGJpc2VjdChkYXRhLCBtb3VzZVgpLFxuICAgICAgICAgICAgICAgIHN0YXJ0RGF0dW0gPSBkYXRhW2luZGV4IC0gMV0sXG4gICAgICAgICAgICAgICAgZW5kRGF0dW0gPSBkYXRhW2luZGV4XSxcbiAgICAgICAgICAgICAgICBpbnRlcnBvbGF0ZVZhbHVlID0gZDMuc2NhbGUubGluZWFyKClcbiAgICAgICAgICAgICAgICAgICAgLnJhbmdlKFswLCAxXSlcbiAgICAgICAgICAgICAgICAgICAgLmRvbWFpbihbc3RhcnREYXR1bVtvcHRpb25zLnhBeGlzLmRhdGFdLCBlbmREYXR1bVtvcHRpb25zLnhBeGlzLmRhdGFdXSk7XG5cbiAgICAgICAgICAgIHZhciBiaWFzID0gaW50ZXJwb2xhdGVWYWx1ZShtb3VzZVgpO1xuICAgICAgICAgICAgdmFyIGludERhdGEgPSB1dGlsaXR5LmxlcnAoc3RhcnREYXR1bSwgZW5kRGF0dW0sIGJpYXMsIG9wdGlvbnMueUF4aXMuZGF0YSk7XG5cbiAgICAgICAgICAgIGhvdmVyLmF0dHIoJ3RyYW5zZm9ybScsICd0cmFuc2xhdGUoJyArIG1vdXNlWzBdICsgJywwKScpO1xuICAgICAgICAgICAgaG92ZXIuc2VsZWN0KCd0ZXh0JylcbiAgICAgICAgICAgICAgICAudGV4dChpbnREYXRhLnZhbHVlLnRvRml4ZWQoMCkgKyAnICcgKyBvcHRpb25zLnlBeGlzLnVuaXRzKTtcblxuICAgICAgICAgICAgaWYoc3VyZmFjZS5fbWFya2VyTGF5ZXIpe1xuICAgICAgICAgICAgICAgIHN1cmZhY2UuX21hcmtlckxheWVyLnNldExhdExuZyhbaW50RGF0YS5sYXQsIGludERhdGEubG5nXSk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHN1cmZhY2UuX2FkZEhvdmVyTWFya2VyKGludERhdGEubGF0LCBpbnREYXRhLmxuZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9zdmcgPSBzdmc7XG4gICAgfSxcblxuICAgIF9hZGRIb3Zlck1hcmtlcjogZnVuY3Rpb24obGF0LCBsbmcpIHtcbiAgICAgICAgdmFyIG1hcmtlckxheWVyID0gTC5jaXJjbGVNYXJrZXIoW2xhdCwgbG5nXSwge1xuICAgICAgICAgICAgY29sb3I6ICcjZmZmJyxcbiAgICAgICAgICAgIHdpZHRoOiAnMnB4JyxcbiAgICAgICAgICAgIG9wYWNpdHk6IDEsXG4gICAgICAgICAgICBmaWxsQ29sb3I6ICcjMzg4N2JlJyxcbiAgICAgICAgICAgIGZpbGxPcGFjaXR5OiAxXG4gICAgICAgIH0pXG4gICAgICAgICAgICAuc2V0UmFkaXVzKDgpO1xuXG4gICAgICAgIHRoaXMuX21hcC5hZGRMYXllcihtYXJrZXJMYXllcik7XG4gICAgICAgIHRoaXMuX21hcmtlckxheWVyID0gbWFya2VyTGF5ZXI7XG4gICAgfSxcblxuICAgIF9yZXNldEhvdmVyTWFya2VyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5fbWFwLnJlbW92ZUxheWVyKHRoaXMuX21hcmtlckxheWVyKTtcbiAgICAgICAgZGVsZXRlIHRoaXMuX21hcmtlckxheWVyO1xuICAgIH0sXG5cbiAgICBfcmVtb3ZlQ2hhcnQ6IGZ1bmN0aW9uKGNvbnRhaW5lcikge1xuICAgICAgICBkMy5zZWxlY3QoJy5sZWFmbGV0LXN1cmZhY2UtY2hhcnQgI2NoYXJ0JykucmVtb3ZlKCk7XG4gICAgfVxuXG59KTtcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbihfLCBvcHRpb25zKSB7XG4gICAgcmV0dXJuIG5ldyBTdXJmYWNlQ29udHJvbChfLCBvcHRpb25zKTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbnZhciBkMyA9IHJlcXVpcmUoJy4uL2xpYi9kM19jdXN0b20nKTtcbnZhciB1dGlsaXR5ID0gcmVxdWlyZSgnLi91dGlsaXR5Jyk7XG5cbnZhciBzdXJmYWNlTGluZSA9IEwuUG9seWxpbmUuZXh0ZW5kKHtcblxuICAgIG9wdGlvbnM6IHt9LFxuXG4gICAgaW5pdGlhbGl6ZTogZnVuY3Rpb24ob3B0aW9ucywgcGF0aCkge1xuICAgICAgICBMLlBvbHlsaW5lLnByb3RvdHlwZS5pbml0aWFsaXplLmNhbGwodGhpcywgb3B0aW9ucyk7XG4gICAgICAgIEwuVXRpbC5zZXRPcHRpb25zKHRoaXMsIG9wdGlvbnMpO1xuICAgICAgICB0aGlzLl9tYXAgPSBtYXA7XG4gICAgICAgIHRoaXMuX2luaXRMaW5lKG9wdGlvbnMsIHBhdGgpO1xuICAgIH0sXG5cbiAgICBfaW5pdExpbmU6IGZ1bmN0aW9uKG9wdGlvbnMsIHBhdGgpIHtcbiAgICAgICAgaWYgKHBhdGgubGVuZ3RoIDw9IDEpIHRocm93IG5ldyBFcnJvcignVG9vIGZldyBwb2ludHMgdG8gY3JlYXRlIGEgbGluZScpO1xuXG4gICAgICAgIHZhciBsaW5lID0gW107XG4gICAgICAgIGlmIChwYXRoLnR5cGUgPT09ICdGZWF0dXJlQ29sbGVjdGlvbicpIHtcbiAgICAgICAgICAgIHBhdGguZmVhdHVyZXMuZm9yRWFjaChmdW5jdGlvbihwb2ludCkge1xuICAgICAgICAgICAgICAgIGxpbmUucHVzaChbcG9pbnQuZ2VvbWV0cnkuY29vcmRpbmF0ZXNbMV0sIHBvaW50Lmdlb21ldHJ5LmNvb3JkaW5hdGVzWzBdXSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIEwuZ2VvSnNvbihMLnBvbHlsaW5lKGxpbmUpLnRvR2VvSlNPTigpLCBvcHRpb25zKS5hZGRUbyh0aGlzLl9tYXApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcGF0aC5mb3JFYWNoKGZ1bmN0aW9uKHBvaW50KSB7XG4gICAgICAgICAgICAgICAgbGluZS5wdXNoKFtwb2ludC5sYXRsbmcubGF0LCBwb2ludC5sYXRsbmcubG5nXSk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIEwuZ2VvSnNvbihMLnBvbHlsaW5lKGxpbmUpLnRvR2VvSlNPTigpLCBvcHRpb25zKS5hZGRUbyh0aGlzLl9tYXApO1xuICAgICAgICB9XG4gICAgfVxufSk7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24oXywgb3B0aW9ucykge1xuICAgIHJldHVybiBuZXcgc3VyZmFjZUxpbmUoXywgb3B0aW9ucyk7XG59O1xuIiwidmFyIGQzID0gcmVxdWlyZSgnLi4vbGliL2QzX2N1c3RvbScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uKG9wdGlvbnMpIHtcblxuICAgIHZhciBzdXJmYWNlID0ge307XG4gICAgaWYgKG9wdGlvbnMpIHN1cmZhY2Uub3B0aW9ucyA9IG9wdGlvbnM7XG5cbiAgICBzdXJmYWNlLmdldERhdGEgPSBmdW5jdGlvbihvcHRpb25zLCBsYXRsbmdzLCBjYWxsYmFjaykge1xuICAgICAgICBpZiAoc3VyZmFjZS5vcHRpb25zICYmIG9wdGlvbnMgaW5zdGFuY2VvZiBBcnJheSkge1xuICAgICAgICAgICAgY2FsbGJhY2sgPSBsYXRsbmdzO1xuICAgICAgICAgICAgbGF0bG5ncyA9IG9wdGlvbnM7XG4gICAgICAgICAgICBvcHRpb25zID0gc3VyZmFjZS5vcHRpb25zO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCFvcHRpb25zLm1hcGlkKSByZXR1cm4gY2FsbGJhY2soJ01pc3NpbmcgbWFwaWQnKTtcbiAgICAgICAgaWYgKCFvcHRpb25zLmxheWVyKSByZXR1cm4gY2FsbGJhY2soJ01pc3NpbmcgbGF5ZXInKTtcbiAgICAgICAgaWYgKCFvcHRpb25zLmZpZWxkcykgcmV0dXJuIGNhbGxiYWNrKCdNaXNzaW5nIGZpZWxkcycpO1xuXG4gICAgICAgIG9wdGlvbnMuYWNjZXNzX3Rva2VuID0gTC5tYXBib3guYWNjZXNzVG9rZW47XG4gICAgICAgIHZhciB1cmwgPSAnaHR0cHM6Ly9hcGkudGlsZXMubWFwYm94LmNvbS92NC9zdXJmYWNlLycgKyBvcHRpb25zLm1hcGlkICsgJy5qc29uPyc7XG4gICAgICAgIGlmIChsYXRsbmdzLmxhdCkge1xuICAgICAgICAgICAgb3B0aW9ucy5wb2ludHMgPSBsYXRsbmdzLmxuZyArICcsJyArIGxhdGxuZ3MubGF0O1xuICAgICAgICB9IGVsc2UgaWYgKGxhdGxuZ3MubGVuZ3RoID09PSAyKSB7XG4gICAgICAgICAgICBvcHRpb25zLnBvaW50cyA9IGxhdGxuZ3NbMV0gKyAnLCcgKyBsYXRsbmdzWzBdO1xuICAgICAgICB9IGVsc2UgaWYgKGxhdGxuZ3MubGVuZ3RoID09PSAxKSB7XG4gICAgICAgICAgICBvcHRpb25zLnBvaW50cyA9IGxhdGxuZ3NbMF1bMV0gKyAnLCcgKyBsYXRsbmdzWzBdWzBdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgb3B0aW9ucy5wb2ludHMgPSBsYXRsbmdzLm1hcChmdW5jdGlvbihsKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGwucmV2ZXJzZSgpLmpvaW4oJywnKTtcbiAgICAgICAgICAgIH0pLmpvaW4oJzsnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuZ2V0SFRUUCh1cmwsIG9wdGlvbnMsIGZ1bmN0aW9uKGVycm9yLCByZXNwb25zZSkge1xuICAgICAgICAgICAgaWYgKGVycm9yKSByZXR1cm4gY2FsbGJhY2soZXJyb3IsIG51bGwpO1xuXG4gICAgICAgICAgICB2YXIgdG90YWxEaXN0YW5jZSA9IDA7XG4gICAgICAgICAgICBpZiAoIW9wdGlvbnMuZ2VvanNvbikge1xuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcmVzcG9uc2UucmVzdWx0cy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdG90YWxEaXN0YW5jZSArPSBzdXJmYWNlLl9jYWxjdWxhdGVEaXN0YW5jZShyZXNwb25zZS5yZXN1bHRzWzBdLmxhdGxuZy5sYXQsIHJlc3BvbnNlLnJlc3VsdHNbMF0ubGF0bG5nLmxuZywgcmVzcG9uc2UucmVzdWx0c1swXS5sYXRsbmcubGF0LCByZXNwb25zZS5yZXN1bHRzWzBdLmxhdGxuZy5sbmcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2UucmVzdWx0c1tpXS5kaXN0YW5jZSA9IHBhcnNlRmxvYXQodG90YWxEaXN0YW5jZS50b0ZpeGVkKDMpKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChpIDwgcmVzcG9uc2UucmVzdWx0cy5sZW5ndGggLSAxKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b3RhbERpc3RhbmNlICs9IHN1cmZhY2UuX2NhbGN1bGF0ZURpc3RhbmNlKHJlc3BvbnNlLnJlc3VsdHNbaV0ubGF0bG5nLmxhdCwgcmVzcG9uc2UucmVzdWx0c1tpXS5sYXRsbmcubG5nLCByZXNwb25zZS5yZXN1bHRzW2kgKyAxXS5sYXRsbmcubGF0LCByZXNwb25zZS5yZXN1bHRzW2kgKyAxXS5sYXRsbmcubG5nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLnJlc3VsdHNbaV0uZGlzdGFuY2UgPSBwYXJzZUZsb2F0KHRvdGFsRGlzdGFuY2UudG9GaXhlZCgzKSk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0b3RhbERpc3RhbmNlICs9IHN1cmZhY2UuX2NhbGN1bGF0ZURpc3RhbmNlKHJlc3BvbnNlLnJlc3VsdHNbcmVzcG9uc2UucmVzdWx0cy5sZW5ndGggLSAxXS5sYXRsbmcubGF0LCByZXNwb25zZS5yZXN1bHRzW3Jlc3BvbnNlLnJlc3VsdHMubGVuZ3RoIC0gMV0ubGF0bG5nLmxuZywgcmVzcG9uc2UucmVzdWx0c1tyZXNwb25zZS5yZXN1bHRzLmxlbmd0aCAtIDJdLmxhdGxuZy5sYXQsIHJlc3BvbnNlLnJlc3VsdHNbcmVzcG9uc2UucmVzdWx0cy5sZW5ndGggLSAyXS5sYXRsbmcubG5nKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlLnJlc3VsdHNbaV0uZGlzdGFuY2UgPSBwYXJzZUZsb2F0KHRvdGFsRGlzdGFuY2UudG9GaXhlZCgzKSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhlcnJvciwgcmVzcG9uc2UpO1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgc3VyZmFjZS5nZXRJbmZvID0gZnVuY3Rpb24obWFwaWQsIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciB1cmwgPSAnaHR0cHM6Ly9hLnRpbGVzLm1hcGJveC5jb20vdjQvJyArIG1hcGlkICsgJy5qc29uP2FjY2Vzc190b2tlbj0nICsgTC5tYXBib3guYWNjZXNzVG9rZW47XG5cbiAgICAgICAgdGhpcy5nZXRIVFRQKHVybCwgbnVsbCwgZnVuY3Rpb24oZXJyLCByZXNwb25zZSkge1xuICAgICAgICAgICAgaWYgKGVycikgcmV0dXJuIGNhbGxiYWNrKGVyciwgbnVsbCk7XG5cbiAgICAgICAgICAgIC8vIFJlbmFtZSB0byBzdGF5IGNvbnNpc3RlbnQgd2l0aCB0aGUgQVBJXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHJlc3BvbnNlLnZlY3Rvcl9sYXllcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICByZXNwb25zZS52ZWN0b3JfbGF5ZXJzW2ldLmxheWVyID0gcmVzcG9uc2UudmVjdG9yX2xheWVyc1tpXS5pZDtcbiAgICAgICAgICAgICAgICBkZWxldGUgcmVzcG9uc2UudmVjdG9yX2xheWVyc1tpXS5pZDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCByZXNwb25zZS52ZWN0b3JfbGF5ZXJzKTtcbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIHN1cmZhY2UuY2FsY3VsYXRlQmV0d2VlbiA9IGZ1bmN0aW9uKG9wdGlvbnMsIHRvUG9pbnQsIGZyb21Qb2ludCwgaW50ZXJ2YWxDb3VudCwgY2FsbGJhY2spIHtcbiAgICAgICAgdmFyIHF1ZXJ5UG9pbnRzID0gW10sXG4gICAgICAgICAgICBsYXREaWZmZXJlbmNlID0gdG9Qb2ludFswXSAtIGZyb21Qb2ludFswXSxcbiAgICAgICAgICAgIGxuZ0RpZmZlcmVuY2UgPSB0b1BvaW50WzFdIC0gZnJvbVBvaW50WzFdLFxuICAgICAgICAgICAgbGF0RGVsdGEgPSBsYXREaWZmZXJlbmNlIC8gaW50ZXJ2YWxDb3VudCxcbiAgICAgICAgICAgIGxuZ0RlbHRhID0gbG5nRGlmZmVyZW5jZSAvIGludGVydmFsQ291bnQ7XG4gICAgICAgIGZvciAodmFyIHMgPSBpbnRlcnZhbENvdW50IC0gMTsgcyA+PSAwOyBzLS0pIHtcbiAgICAgICAgICAgIHZhciBpbnRlcnZhbExhdCA9IChzICogbGF0RGVsdGEpICsgZnJvbVBvaW50WzBdO1xuICAgICAgICAgICAgdmFyIGludGVydmFsTG5nID0gKHMgKiBsbmdEZWx0YSkgKyBmcm9tUG9pbnRbMV07XG4gICAgICAgICAgICBxdWVyeVBvaW50cy5wdXNoKFtpbnRlcnZhbExhdCwgaW50ZXJ2YWxMbmddKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChxdWVyeVBvaW50cy5sZW5ndGggPiAzMDApIHJldHVybiBjYWxsYmFjaygnUXVlcnkgaXMgdG9vIGxvbmcsIG1heCBudW1iZXIgb2YgcG9pbnRzIGlzIDMwMC4nKTtcblxuICAgICAgICB0aGlzLmdldERhdGEob3B0aW9ucywgcXVlcnlQb2ludHMsIGZ1bmN0aW9uKGVyciwgcmVzcG9uc2UpIHtcbiAgICAgICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCByZXNwb25zZSk7XG4gICAgICAgIH0pO1xuXG4gICAgfTtcblxuICAgIHN1cmZhY2UuZ2V0SFRUUCA9IGZ1bmN0aW9uKHVybCwgcGFyYW1zLCBjYWxsYmFjaykge1xuICAgICAgICBkMy5qc29uKHVybCArIHRoaXMuX3F1ZXJ5U3RyaW5nKHBhcmFtcyksIGZ1bmN0aW9uKGVyciwgcmVzcCkge1xuICAgICAgICAgICAgaWYgKGVycikgcmV0dXJuIGNhbGxiYWNrKGVyci5yZXNwb25zZVRleHQsIG51bGwpO1xuICAgICAgICAgICAgcmV0dXJuIGNhbGxiYWNrKG51bGwsIHJlc3ApO1xuICAgICAgICB9LCB0cnVlKTtcbiAgICB9O1xuXG4gICAgc3VyZmFjZS5fY2FsY3VsYXRlRGlzdGFuY2UgPSBmdW5jdGlvbihsYXQxLCBsbmcxLCBsYXQyLCBsbmcyKSB7XG4gICAgICAgIHZhciBzdXJmYWNlID0gdGhpcztcbiAgICAgICAgdmFyIFJLbSA9IDYzNzguMTsgLy8gUmFkaXVzIG9mIHRoZSBlYXJ0aCBpbiBrbVxuICAgICAgICB2YXIgUm1pbGVzID0gMzk2My4xNjc2OyAvLyBSYWRpdXMgb2YgdGhlIGVhcnRoIGluIG1pbGVzXG4gICAgICAgIHZhciBkTGF0ID0gc3VyZmFjZS5fY2FsY3VsYXRlRGVnMlJhZChsYXQyIC0gbGF0MSk7IC8vIGRlZzJyYWQgYmVsb3dcbiAgICAgICAgdmFyIGRMb24gPSBzdXJmYWNlLl9jYWxjdWxhdGVEZWcyUmFkKGxuZzIgLSBsbmcxKTtcbiAgICAgICAgdmFyIGEgPVxuICAgICAgICAgICAgTWF0aC5zaW4oZExhdCAvIDIpICogTWF0aC5zaW4oZExhdCAvIDIpICtcbiAgICAgICAgICAgIE1hdGguY29zKHN1cmZhY2UuX2NhbGN1bGF0ZURlZzJSYWQobGF0MSkpICogTWF0aC5jb3Moc3VyZmFjZS5fY2FsY3VsYXRlRGVnMlJhZChsYXQyKSkgKlxuICAgICAgICAgICAgTWF0aC5zaW4oZExvbiAvIDIpICogTWF0aC5zaW4oZExvbiAvIDIpO1xuICAgICAgICB2YXIgYyA9IDIgKiBNYXRoLmF0YW4yKE1hdGguc3FydChhKSwgTWF0aC5zcXJ0KDEgLSBhKSk7XG4gICAgICAgIHZhciBkID0gUkttICogYzsgLy8gRGlzdGFuY2UgaW4ga21cbiAgICAgICAgcmV0dXJuIGQ7XG4gICAgfTtcblxuICAgIHN1cmZhY2UuX2NhbGN1bGF0ZURlZzJSYWQgPSBmdW5jdGlvbihkZWcpIHtcbiAgICAgICAgcmV0dXJuIGRlZyAqIChNYXRoLlBJIC8gMTgwKTtcbiAgICB9O1xuXG4gICAgc3VyZmFjZS5fcXVlcnlTdHJpbmcgPSBmdW5jdGlvbihvYmplY3QpIHtcbiAgICAgICAgdmFyIHN0ciA9IFtdO1xuICAgICAgICBmb3IgKHZhciBwIGluIG9iamVjdClcbiAgICAgICAgICAgIGlmIChvYmplY3QuaGFzT3duUHJvcGVydHkocCkpIHtcbiAgICAgICAgICAgICAgICBzdHIucHVzaChlbmNvZGVVUklDb21wb25lbnQocCkgKyAnPScgKyBlbmNvZGVVUklDb21wb25lbnQob2JqZWN0W3BdKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIHJldHVybiBzdHIuam9pbignJicpO1xuICAgIH07XG5cbiAgICByZXR1cm4gc3VyZmFjZTtcblxufTtcbiIsInZhciB1dGlsaXR5ID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcblxudXRpbGl0eS5sZXJwID0gZnVuY3Rpb24oYSwgYiwgdCwgdmFsdWUpIHtcbiAgICByZXR1cm4ge1xuICAgICAgICBsYXQ6IChhLmxhdGxuZy5sYXQgKiAoMSAtIHQpKSArIChiLmxhdGxuZy5sYXQgKiAodCkpLFxuICAgICAgICBsbmc6IChhLmxhdGxuZy5sbmcgKiAoMSAtIHQpKSArIChiLmxhdGxuZy5sbmcgKiAodCkpLFxuICAgICAgICBkaXN0YW5jZTogKGEuZGlzdGFuY2UgKiAoMSAtIHQpKSArIChiLmRpc3RhbmNlICogKHQpKSxcbiAgICAgICAgdmFsdWU6IChhW3ZhbHVlXSAqICgxIC0gdCkpICsgKGJbdmFsdWVdICogKHQpKVxuICAgIH07XG59O1xuXG51dGlsaXR5LmZvcm1hdFZhbHVlc0ZvckNoYXJ0ID0gZnVuY3Rpb24odmFsdWVzLCBvcHRpb25zKSB7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCB2YWx1ZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKHZhbHVlc1tpXVtvcHRpb25zLnlBeGlzLmRhdGFdID09PSBudWxsKSB7XG4gICAgICAgICAgICB2YWx1ZXNbaV1bb3B0aW9ucy55QXhpcy5kYXRhXSA9IDA7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHZhbHVlcztcbn07XG4iXX0=
