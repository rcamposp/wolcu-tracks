/* global L */
var utility = require('./utility');

var surfaceLine = L.Polyline.extend({

    options: {},

    initialize: function(options, path) {
        L.Polyline.prototype.initialize.call(this, options);
        L.Util.setOptions(this, options);
        this._map = map;
        this._initLine(options, path);
    },

    _initLine: function(options, path) {
        if (path.length <= 1) throw new Error('Too few points to create a line');

        var line = [];
        if (path.type === 'FeatureCollection') {
            path.features.forEach(function(point) {
                line.push([point.geometry.coordinates[1], point.geometry.coordinates[0]]);
            });
            L.geoJson(L.polyline(line).toGeoJSON(), options).addTo(this._map);
        } else {
            path.forEach(function(point) {
                line.push([point.latlng.lat, point.latlng.lng]);
            });
            L.geoJson(L.polyline(line).toGeoJSON(), options).addTo(this._map);
        }
    }
});

module.exports = function(_, options) {
    return new surfaceLine(_, options);
};
